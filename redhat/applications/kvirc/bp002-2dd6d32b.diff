commit 2dd6d32bd821b303aa7b25edda76d1ef7c14b2bf
Author: Timothy Pearson <kb9vqf@pearsoncomputing.net>
Date:   1324497989 -0600

    Rename obsolete tq methods to standard names

diff --git a/src/kvilib/config/kvi_wincfg.h b/src/kvilib/config/kvi_wincfg.h
index 3441e7b..1759e32 100644
--- a/src/kvilib/config/kvi_wincfg.h
+++ b/src/kvilib/config/kvi_wincfg.h
@@ -132,7 +132,7 @@
 /* define this if you are on a big endian machine */
 /* #undef BIG_ENDIAN_MACHINE_BYTE_ORDER */
 
-/* define this if you want to use the tqunicode-local 8bit charset translation */
+/* define this if you want to use the unicode-local 8bit charset translation */
 /* #undef COMPILE_USE_LOCAL_8BIT */
 
 /* define this if you want to disable the inter-process communication support */
diff --git a/src/kvilib/core/kvi_pointerhashtable.h b/src/kvilib/core/kvi_pointerhashtable.h
index 1c2bcab..99e513f 100644
--- a/src/kvilib/core/kvi_pointerhashtable.h
+++ b/src/kvilib/core/kvi_pointerhashtable.h
@@ -236,18 +236,18 @@ inline unsigned int kvi_hash_hash(const TQString &szKey,bool bCaseSensitive)
 	if(!p)return 0;
 	if(bCaseSensitive)
 	{
-		while(p->tqunicode())
+		while(p->unicode())
 		{
-			uResult += p->tqunicode();
+			uResult += p->unicode();
 			p++;
 		}
 	} else {
-		while(p->tqunicode())
+		while(p->unicode())
 		{
 #ifdef COMPILE_USE_QT4
-			uResult += p->toLower().tqunicode();
+			uResult += p->toLower().unicode();
 #else
-			uResult += p->lower().tqunicode();
+			uResult += p->lower().unicode();
 #endif
 			p++;
 		}
diff --git a/src/kvilib/core/kvi_qstring.cpp b/src/kvilib/core/kvi_qstring.cpp
index b02e308..84beaa0 100644
--- a/src/kvilib/core/kvi_qstring.cpp
+++ b/src/kvilib/core/kvi_qstring.cpp
@@ -54,8 +54,8 @@ namespace KviTQString
 	bool equalCSN(const TQString &sz1,const TQString &sz2,unsigned int len)
 	{
 		if(len == 0)return true; // assume equal
-		const TQChar * c1 = sz1.tqunicode();
-		const TQChar * c2 = sz2.tqunicode();
+		const TQChar * c1 = sz1.unicode();
+		const TQChar * c2 = sz2.unicode();
 		unsigned int lmin = MY_MIN(sz1.length(),sz2.length());
 		if(lmin < len)return false;
 		const TQChar * c1e = c1 + len;
@@ -64,7 +64,7 @@ namespace KviTQString
 		
 		while(c1 < c1e)
 		{
-			if(c1->tqunicode() != c2->tqunicode())return false;
+			if(c1->unicode() != c2->unicode())return false;
 			c1++;
 			c2++;
 		}
@@ -74,8 +74,8 @@ namespace KviTQString
 	bool equalCIN(const TQString &sz1,const TQString &sz2,unsigned int len)
 	{
 		if(len == 0)return true; // assume equal
-		const TQChar * c1 = sz1.tqunicode();
-		const TQChar * c2 = sz2.tqunicode();
+		const TQChar * c1 = sz1.unicode();
+		const TQChar * c2 = sz2.unicode();
 		unsigned int lmin = MY_MIN(sz1.length(),sz2.length());
 		if(lmin < len)return false;
 		const TQChar * c1e = c1 + len;
@@ -85,9 +85,9 @@ namespace KviTQString
 		while(c1 < c1e)
 		{
 #ifdef COMPILE_USE_QT4
-			if(c1->toLower().tqunicode() != c2->toLower().tqunicode())return false;
+			if(c1->toLower().unicode() != c2->toLower().unicode())return false;
 #else
-			if(c1->lower().tqunicode() != c2->lower().tqunicode())return false;
+			if(c1->lower().unicode() != c2->lower().unicode())return false;
 #endif
 			c1++;
 			c2++;
@@ -98,7 +98,7 @@ namespace KviTQString
 	bool equalCSN(const TQString &sz1,const char * sz2,unsigned int len)
 	{
 		if(len == 0)return true; // assume equal
-		const TQChar * c1 = sz1.tqunicode();
+		const TQChar * c1 = sz1.unicode();
 		if(sz1.length() < len)return false;
 		const TQChar * c1e = c1 + len;
 
@@ -107,7 +107,7 @@ namespace KviTQString
 
 		while((c1 < c1e) && (*sz2))
 		{
-			if(c1->tqunicode() != *sz2)return false;
+			if(c1->unicode() != *sz2)return false;
 			c1++;
 			sz2++;
 		}
@@ -117,7 +117,7 @@ namespace KviTQString
 	bool equalCIN(const TQString &sz1,const char * sz2,unsigned int len)
 	{
 		if(len == 0)return true; // assume equal
-		const TQChar * c1 = sz1.tqunicode();
+		const TQChar * c1 = sz1.unicode();
 		if(sz1.length() < len)return false;
 		const TQChar * c1e = c1 + len;
 
@@ -127,9 +127,9 @@ namespace KviTQString
 		while((c1 < c1e) && (*sz2))
 		{
 #ifdef COMPILE_USE_QT4
-			if(c1->toLower().tqunicode() != tolower(*sz2))return false;
+			if(c1->toLower().unicode() != tolower(*sz2))return false;
 #else
-			if(c1->lower().tqunicode() != tolower(*sz2))return false;
+			if(c1->lower().unicode() != tolower(*sz2))return false;
 #endif
 			c1++;
 			sz2++;
@@ -141,19 +141,19 @@ namespace KviTQString
 	bool equalCIN(const TQString &sz1,const TQChar *sz2,unsigned int len)
 	{
 		if(len == 0)return true; // assume equal
-		const TQChar * c1 = sz1.tqunicode();
+		const TQChar * c1 = sz1.unicode();
 		if(sz1.length() < len)return false;
 		const TQChar * c1e = c1 + len;
 
 		if(!sz2)return !c1;
-		if(!c1)return !(sz2->tqunicode());
+		if(!c1)return !(sz2->unicode());
 
-		while((c1 < c1e) && (sz2->tqunicode()))
+		while((c1 < c1e) && (sz2->unicode()))
 		{
 #ifdef COMPILE_USE_QT4
-			if(c1->toLower().tqunicode() != sz2->toLower().tqunicode())return false;
+			if(c1->toLower().unicode() != sz2->toLower().unicode())return false;
 #else
-			if(c1->lower().tqunicode() != sz2->lower().tqunicode())return false;
+			if(c1->lower().unicode() != sz2->lower().unicode())return false;
 #endif
 			c1++;
 			sz2++;
@@ -189,15 +189,15 @@ namespace KviTQString
 	{
 		if(sz1.length() != sz2.length())return false;
 
-		const TQChar * c1 = sz1.tqunicode();
-		const TQChar * c2 = sz2.tqunicode();
+		const TQChar * c1 = sz1.unicode();
+		const TQChar * c2 = sz2.unicode();
 		const TQChar * c1e = c1 + sz1.length();
 		
 		if(!c1 || !c2)return (c1 == c2);
 		
 		while(c1 < c1e)
 		{
-			if(c1->tqunicode() != c2->tqunicode())return false;
+			if(c1->unicode() != c2->unicode())return false;
 			c1++;
 			c2++;
 		}
@@ -208,8 +208,8 @@ namespace KviTQString
 	{
 		if(sz1.length() != sz2.length())return false;
 
-		const TQChar * c1 = sz1.tqunicode();
-		const TQChar * c2 = sz2.tqunicode();
+		const TQChar * c1 = sz1.unicode();
+		const TQChar * c2 = sz2.unicode();
 		const TQChar * c1e = c1 + sz1.length();
 
 		if(!c1 || !c2)return (c1 == c2);
@@ -217,9 +217,9 @@ namespace KviTQString
 		while(c1 < c1e)
 		{
 #ifdef COMPILE_USE_QT4
-			if(c1->toLower().tqunicode() != c2->toLower().tqunicode())return false;
+			if(c1->toLower().unicode() != c2->toLower().unicode())return false;
 #else
-			if(c1->lower().tqunicode() != c2->lower().tqunicode())return false;
+			if(c1->lower().unicode() != c2->lower().unicode())return false;
 #endif
 			c1++;
 			c2++;
@@ -230,35 +230,35 @@ namespace KviTQString
 	// sz2 is assumed to be null terminated, sz1 is not!
 	bool equalCI(const TQString &sz1,const TQChar *sz2)
 	{
-		const TQChar * c1 = sz1.tqunicode();
+		const TQChar * c1 = sz1.unicode();
 		const TQChar * c1e = c1 + sz1.length();
 
 		if(!c1 || !sz2)return (c1 == sz2);
 
 		while(c1 < c1e)
 		{
-			if(!sz2->tqunicode())return false; // sz1 has at least another character
+			if(!sz2->unicode())return false; // sz1 has at least another character
 #ifdef COMPILE_USE_QT4
-			if(c1->toLower().tqunicode() != sz2->toLower().tqunicode())return false;
+			if(c1->toLower().unicode() != sz2->toLower().unicode())return false;
 #else
-			if(c1->lower().tqunicode() != sz2->lower().tqunicode())return false;
+			if(c1->lower().unicode() != sz2->lower().unicode())return false;
 #endif
 			c1++;
 			sz2++;
 		}
-		return (c1 == c1e) && (!sz2->tqunicode());
+		return (c1 == c1e) && (!sz2->unicode());
 	}
 
 	bool equalCS(const TQString &sz1,const char * sz2)
 	{
-		const TQChar * c1 = sz1.tqunicode();
+		const TQChar * c1 = sz1.unicode();
 		const TQChar * c1e = c1 + sz1.length();
 
 		if(!c1)return !sz2;
 
 		while((c1 < c1e) && (*sz2))
 		{
-			if(c1->tqunicode() != *sz2)return false;
+			if(c1->unicode() != *sz2)return false;
 			c1++;
 			sz2++;
 		}
@@ -267,7 +267,7 @@ namespace KviTQString
 
 	bool equalCI(const TQString &sz1,const char * sz2)
 	{
-		const TQChar * c1 = sz1.tqunicode();
+		const TQChar * c1 = sz1.unicode();
 		const TQChar * c1e = c1 + sz1.length();
 
 		if(!c1)return !sz2;
@@ -275,9 +275,9 @@ namespace KviTQString
 		while((c1 < c1e) && (*sz2))
 		{
 #ifdef COMPILE_USE_QT4
-			if(c1->toLower().tqunicode() != tolower(*sz2))return false;
+			if(c1->toLower().unicode() != tolower(*sz2))return false;
 #else
-			if(c1->lower().tqunicode() != tolower(*sz2))return false;
+			if(c1->lower().unicode() != tolower(*sz2))return false;
 #endif
 			c1++;
 			sz2++;
@@ -287,8 +287,8 @@ namespace KviTQString
 
 	int cmpCS(const TQString &sz1,const TQString &sz2)
 	{
-		const TQChar * c1 = sz1.tqunicode();
-		const TQChar * c2 = sz2.tqunicode();
+		const TQChar * c1 = sz1.unicode();
+		const TQChar * c2 = sz2.unicode();
 		const TQChar * c1e = c1 + sz1.length();
 		const TQChar * c2e = c2 + sz2.length();
 
@@ -304,12 +304,12 @@ namespace KviTQString
 		{
 			if(c1 >= c1e)
 			{
-				if(c2 < c2e)return /* 0 */ - (c2->tqunicode());
+				if(c2 < c2e)return /* 0 */ - (c2->unicode());
 				return 0;
 			}
-			if(c2 >= c2e)return c1->tqunicode() /* - 0 */;
+			if(c2 >= c2e)return c1->unicode() /* - 0 */;
 
-			int diff = c1->tqunicode() - c2->tqunicode();
+			int diff = c1->unicode() - c2->unicode();
 			if(diff)return diff;
 
 			c1++;
@@ -321,8 +321,8 @@ namespace KviTQString
 
 	int cmpCI(const TQString &sz1,const TQString &sz2)
 	{
-		const TQChar * c1 = sz1.tqunicode();
-		const TQChar * c2 = sz2.tqunicode();
+		const TQChar * c1 = sz1.unicode();
+		const TQChar * c2 = sz2.unicode();
 		const TQChar * c1e = c1 + sz1.length();
 		const TQChar * c2e = c2 + sz2.length();
 
@@ -338,22 +338,22 @@ namespace KviTQString
 			if(c1 >= c1e)
 			{
 #ifdef COMPILE_USE_QT4
-				if(c2 < c2e)return /* 0 */ - (c2->toLower().tqunicode());
+				if(c2 < c2e)return /* 0 */ - (c2->toLower().unicode());
 #else
-				if(c2 < c2e)return /* 0 */ - (c2->lower().tqunicode());
+				if(c2 < c2e)return /* 0 */ - (c2->lower().unicode());
 #endif
 				return 0;
 			}
 #ifdef COMPILE_USE_QT4
-			if(c2 >= c2e)return c1->toLower().tqunicode() /* - 0 */;
+			if(c2 >= c2e)return c1->toLower().unicode() /* - 0 */;
 #else
-			if(c2 >= c2e)return c1->lower().tqunicode() /* - 0 */;
+			if(c2 >= c2e)return c1->lower().unicode() /* - 0 */;
 #endif
 
 #ifdef COMPILE_USE_QT4
-			int diff = c1->toLower().tqunicode() - c2->toLower().tqunicode();
+			int diff = c1->toLower().unicode() - c2->toLower().unicode();
 #else
-			int diff = c1->lower().tqunicode() - c2->lower().tqunicode();
+			int diff = c1->lower().unicode() - c2->lower().unicode();
 #endif
 			if(diff)return diff;
 
@@ -370,8 +370,8 @@ namespace KviTQString
 		unsigned int l1 = MY_MIN(len,sz1.length());
 		unsigned int l = MY_MIN(l1,sz2.length()); // FIXME: THIS IS NOT OK
 
-		const TQChar * c1 = sz1.tqunicode();
-		const TQChar * c2 = sz2.tqunicode();
+		const TQChar * c1 = sz1.unicode();
+		const TQChar * c2 = sz2.unicode();
 		const TQChar * c1e = c1 + l;
 
 		if(!c1)
@@ -384,9 +384,9 @@ namespace KviTQString
 		int diff = 0;
 
 #ifdef COMPILE_USE_QT4
-		while((c1 < c1e) && !(diff = (c1->toLower().tqunicode() - c2->toLower().tqunicode())))
+		while((c1 < c1e) && !(diff = (c1->toLower().unicode() - c2->toLower().unicode())))
 #else
-		while((c1 < c1e) && !(diff = (c1->lower().tqunicode() - c2->lower().tqunicode())))
+		while((c1 < c1e) && !(diff = (c1->lower().unicode() - c2->lower().unicode())))
 #endif
 		{
 			c1++;
@@ -533,7 +533,7 @@ namespace KviTQString
 		}
 
 		TQChar * buffer = (TQChar *)kvi_malloc(sizeof(TQChar) * allocsize);
-		//TQChar * p = (TQChar *)s.tqunicode();
+		//TQChar * p = (TQChar *)s.unicode();
 
 		char *argString;
 		long argValue;
@@ -561,12 +561,12 @@ namespace KviTQString
 		}
 
 
-		for(; fmt->tqunicode() ; ++fmt)
+		for(; fmt->unicode() ; ++fmt)
 		{
 			if(reallen == allocsize)INCREMENT_MEM
 
 			//copy up to a '%'
-			if(fmt->tqunicode() != '%')
+			if(fmt->unicode() != '%')
 			{
 				*p++ = *fmt;
 				reallen++;
@@ -574,7 +574,7 @@ namespace KviTQString
 			}
 
 			++fmt; //skip this '%'
-			switch(fmt->tqunicode())
+			switch(fmt->unicode())
 			{
 				case 's': // char * string
 				{
@@ -583,7 +583,7 @@ namespace KviTQString
 					TQString str(argString);
 					if(str.isEmpty())continue;
 					int len = str.length();
-					const TQChar * ch = str.tqunicode();
+					const TQChar * ch = str.unicode();
 					if(!ch)continue;
 					if((allocsize - reallen) < len)INCREMENT_MEM_BY(len)
 					while(len--)*p++ = *ch++;
@@ -606,7 +606,7 @@ namespace KviTQString
 					if(!str)continue;
 					if(str->isEmpty())continue;
 					int len = str->length();
-					const TQChar * ch = str->tqunicode();
+					const TQChar * ch = str->unicode();
 					if(!ch)continue;
 					if((allocsize - reallen) < len)INCREMENT_MEM_BY(len)
 					while(len--)*p++ = *ch++;
@@ -721,7 +721,7 @@ namespace KviTQString
 				{
 					*p++ = '%';  //write it
 					reallen++;
-					if(fmt->tqunicode())
+					if(fmt->unicode())
 					{
 						if(reallen == allocsize)INCREMENT_MEM
 						*p++ = *fmt;
@@ -789,21 +789,21 @@ namespace KviTQString
 		const TQChar * m2 = (const TQChar *)szM2.ucs2();
 #endif
 
-		if(!(m1 && m2 && (m1->tqunicode())))return false;
+		if(!(m1 && m2 && (m1->unicode())))return false;
 		const TQChar * savePos1 = 0;
 		const TQChar * savePos2 = m2;
-		while(m1->tqunicode())
+		while(m1->unicode())
 		{
 			//loop managed by m1 (initially first mask)
-			if(m1->tqunicode()=='*')
+			if(m1->unicode()=='*')
 			{
 				//Found a wildcard in m1
 				savePos1 = ++m1;            //move to the next char and save the position...this is our jolly
-				if(!savePos1->tqunicode())return true;  //last was a wildcard , matches everything ahead...
+				if(!savePos1->unicode())return true;  //last was a wildcard , matches everything ahead...
 				savePos2 = m2+1;            //next return state for the second string
 				continue;                   //and return
 			}
-			if(!m2->tqunicode())return false;         //m2 finished and we had something to match here!
+			if(!m2->unicode())return false;         //m2 finished and we had something to match here!
 #ifdef COMPILE_USE_QT4
 			if(m1->toLower()==m2->toLower())
 #else
@@ -813,7 +813,7 @@ namespace KviTQString
 				//chars matched
 				m1++;                       //Go ahead in the two strings
 				m2++;                       //
-				if((!(m1->tqunicode())) && m2->tqunicode() && savePos1)
+				if((!(m1->unicode())) && m2->unicode() && savePos1)
 				{
 					//m1 finished , but m2 not yet and we have a savePosition for m1 (there was a wildcard)...
 					//retry matching the string following the * from the savePos2 (one char ahead last time)
@@ -822,7 +822,7 @@ namespace KviTQString
 					savePos2++;             //next savePos2 will be next char
 				}
 			} else {
-				if(m2->tqunicode() == '*')
+				if(m2->unicode() == '*')
 				{
 					//A wlidcard in the second string
 					//Invert the game : mask1 <-> mask2
@@ -835,11 +835,11 @@ namespace KviTQString
 					continue;               //...and again
 				}
 				// m1 != m2 , m1 != * , m2 != *
-				if((m1->tqunicode() == '?') || (m2->tqunicode() == '?'))
+				if((m1->unicode() == '?') || (m2->unicode() == '?'))
 				{
 					m1++;
 					m2++;
-					if((!(m1->tqunicode())) && m2->tqunicode() && savePos1)
+					if((!(m1->unicode())) && m2->unicode() && savePos1)
 					{
 						//m1 finished , but m2 not yet and we have a savePosition for m1 (there was a wildcard)...
 						//retry matching the string following the * from the savePos2 (one char ahead last time)
@@ -858,7 +858,7 @@ namespace KviTQString
 				}
 			}
 		}
-		return (!(m2->tqunicode()));           //m1 surely finished , so for the match , m2 must be finished too
+		return (!(m2->unicode()));           //m1 surely finished , so for the match , m2 must be finished too
 	}
 
 	bool matchStringCI(const TQString &szExp,const TQString &szStr,bool bIsRegExp,bool bExact)
@@ -870,9 +870,9 @@ namespace KviTQString
 		TQChar* ptr=(TQChar*)szExp.ucs2();
 #endif
 		if(!ptr) return 0;
-		while(ptr->tqunicode())
+		while(ptr->unicode())
 		{
-			if((ptr->tqunicode()=='[') || (ptr->tqunicode()==']'))
+			if((ptr->unicode()=='[') || (ptr->unicode()==']'))
 			{
 				szWildcard.append("[");
 				szWildcard.append(*ptr);
@@ -904,9 +904,9 @@ namespace KviTQString
 		TQChar* ptr=(TQChar*)szExp.ucs2();
 #endif
 		if(!ptr) return 0;
-		while(ptr->tqunicode())
+		while(ptr->unicode())
 		{
-			if((ptr->tqunicode()=='[')) // <-- hum ?
+			if((ptr->unicode()=='[')) // <-- hum ?
 			{
 				szWildcard.append("[");
 				szWildcard.append(*ptr);
@@ -1043,7 +1043,7 @@ namespace KviTQString
 		}
 		TQChar * buffer = (TQChar *)kvi_malloc(sizeof(TQChar) * szSrc.length());
 		TQChar * b = buffer;
-		unsigned short us = c->tqunicode();
+		unsigned short us = c->unicode();
 		while(us)
 		{
 			if(us < 256)
@@ -1052,7 +1052,7 @@ namespace KviTQString
 				*b = *c;
 			c++;
 			b++;
-			us = c->tqunicode();
+			us = c->unicode();
 		}
 		TQString ret(buffer,szSrc.length());
 		kvi_free(buffer);
@@ -1069,7 +1069,7 @@ namespace KviTQString
 		}
 		TQChar * buffer = (TQChar *)kvi_malloc(sizeof(TQChar) * szSrc.length());
 		TQChar * b = buffer;
-		unsigned short us = c->tqunicode();
+		unsigned short us = c->unicode();
 		while(us)
 		{
 			if(us < 256)
@@ -1079,7 +1079,7 @@ namespace KviTQString
 				*b = *c;
 			c++;
 			b++;
-			us = c->tqunicode();
+			us = c->unicode();
 		}
 		TQString ret(buffer,szSrc.length());
 		kvi_free(buffer);
diff --git a/src/kvilib/core/kvi_string.cpp b/src/kvilib/core/kvi_string.cpp
index 525ad71..54a1c4a 100644
--- a/src/kvilib/core/kvi_string.cpp
+++ b/src/kvilib/core/kvi_string.cpp
@@ -109,7 +109,7 @@ kvi_wslen_t kvi_wstrlen(const kvi_wchar_t * str)
 				if(pString->length() > 0) \
 				{ \
 					if(len <= ((int)(pString->length())))return (-1); \
-					_WSTRING_WMEMCPY(p,pString->tqunicode(),pString->length()); \
+					_WSTRING_WMEMCPY(p,pString->unicode(),pString->length()); \
 					p += pString->length(); \
 					len -= pString->length(); \
 				} \
@@ -192,8 +192,8 @@ int kvi_wvsnprintf(kvi_wchar_t *buffer,kvi_wslen_t len,const kvi_wchar_t *fmt,kv
 
 bool kvi_qstringEqualCI(const TQString &s1,const TQString &s2)
 {
-	const TQChar * p1 = s1.tqunicode();
-	const TQChar * p2 = s2.tqunicode();
+	const TQChar * p1 = s1.unicode();
+	const TQChar * p2 = s2.unicode();
 	int l = s1.length() < s2.length() ? s1.length() : s2.length();
 #ifdef COMPILE_USE_QT4
 	while(l-- && (p1->toLower() == p2->toLower()))p1++,p2++;
@@ -1141,23 +1141,23 @@ KviStr::KviStr(char c,int fillLen)
 }
 
 
-KviStr::KviStr(const kvi_wchar_t * tqunicode)
+KviStr::KviStr(const kvi_wchar_t * unicode)
 {
-	if(!tqunicode)
+	if(!unicode)
 	{
 		m_len = 0;
 		m_ptr = (char *)kvi_malloc(1);
 		*m_ptr = 0;
 	} else {
-		m_len = kvi_wstrlen(tqunicode);
+		m_len = kvi_wstrlen(unicode);
 		m_ptr = (char *)kvi_malloc(m_len + 1);
 		register char * p = m_ptr;
-		while(*tqunicode)*p++ = *tqunicode++;
+		while(*unicode)*p++ = *unicode++;
 		*p = 0;
 	}
 }
 
-KviStr::KviStr(const kvi_wchar_t * tqunicode,int len)
+KviStr::KviStr(const kvi_wchar_t * unicode,int len)
 {
 	m_len = len;
 	m_ptr = (char *)kvi_malloc(m_len + 1);
@@ -1165,7 +1165,7 @@ KviStr::KviStr(const kvi_wchar_t * tqunicode,int len)
 	char * end = p + len;
 	while(p != end)
 	{
-		*p++ = *tqunicode++;
+		*p++ = *unicode++;
 	}
 	*p = 0;
 }
diff --git a/src/kvilib/core/kvi_string.h b/src/kvilib/core/kvi_string.h
index 4e9a3ac..9434e27 100644
--- a/src/kvilib/core/kvi_string.h
+++ b/src/kvilib/core/kvi_string.h
@@ -155,9 +155,9 @@ public:
 	// Creates a string long fillLen characters filled with character c.<br>
 	KviStr(char c,int fillLen = 1);
 
-	KviStr(const kvi_wchar_t * tqunicode);
+	KviStr(const kvi_wchar_t * unicode);
 
-	KviStr(const kvi_wchar_t * tqunicode,int len);
+	KviStr(const kvi_wchar_t * unicode,int len);
 
 	// just free(m_ptr)
 	~KviStr();
diff --git a/src/kvilib/file/kvi_fileutils.cpp b/src/kvilib/file/kvi_fileutils.cpp
index 1668999..3410773 100644
--- a/src/kvilib/file/kvi_fileutils.cpp
+++ b/src/kvilib/file/kvi_fileutils.cpp
@@ -60,7 +60,7 @@ namespace KviFileUtils
 				if(tmp_buf[255] == '\r')cur_len--; //Ignore CR...
 				int lastlen = szBuffer.length();
 				szBuffer.setLength(lastlen + cur_len);
-				TQChar *p1 = szBuffer.tqunicode() + lastlen;
+				TQChar *p1 = szBuffer.unicode() + lastlen;
 				char * p2 = tmp_buf;
 				for(int i=0;i<cur_len;i++)*p1++ = *p2++;
 				cur_len = 0;
@@ -76,7 +76,7 @@ namespace KviFileUtils
 			if(tmp_buf[cur_len - 1] == '\r')cur_len--; //Ignore CR...
 			int lastlen = szBuffer.length();
 			szBuffer.setLength(lastlen + cur_len);
-			TQChar *p1 = szBuffer.tqunicode() + lastlen;
+			TQChar *p1 = szBuffer.unicode() + lastlen;
 			char * p2 = tmp_buf;
 			for(int i=0;i<cur_len;i++)*p1++ = *p2++;
 		}
diff --git a/src/kvilib/irc/kvi_ircmask.cpp b/src/kvilib/irc/kvi_ircmask.cpp
index 4552cc9..acc2de8 100644
--- a/src/kvilib/irc/kvi_ircmask.cpp
+++ b/src/kvilib/irc/kvi_ircmask.cpp
@@ -232,8 +232,8 @@ KviIrcMask::KviIrcMask(const TQString &szMask)
 	if(b)
 	{
 		const TQChar * p = b;
-		while(p->tqunicode() && (p->tqunicode() != '!'))p++;
-		if(p->tqunicode())
+		while(p->unicode() && (p->unicode() != '!'))p++;
+		if(p->unicode())
 		{
 			if(p != b)
 			{
@@ -250,8 +250,8 @@ KviIrcMask::KviIrcMask(const TQString &szMask)
 		}
 		p++;
 		b = p;
-		while(p->tqunicode() && (p->tqunicode() != '@'))p++;
-		if(p->tqunicode())
+		while(p->unicode() && (p->unicode() != '@'))p++;
+		if(p->unicode())
 		{
 			if(p != b)
 			{
@@ -267,7 +267,7 @@ KviIrcMask::KviIrcMask(const TQString &szMask)
 		}
 		p++;
 		b=p;
-		while(p->tqunicode())p++;
+		while(p->unicode())p++;
 		if(p != b)
 		{
 			m_szHost.setUnicode(b,p-b);
@@ -291,7 +291,7 @@ bool KviIrcMask::hasNumericHost() const
 	int nPoints = 0;
 	int nDoublePoints = 0;
 	unsigned short uc;
-	while((uc = p->tqunicode()))
+	while((uc = p->unicode()))
 	{
 		if(uc == '.')nPoints++; // ipv6 masks can contain dots too!
 		else {
@@ -300,9 +300,9 @@ bool KviIrcMask::hasNumericHost() const
 				if((uc < '0') || (uc > '9'))
 				{
 #ifdef COMPILE_USE_QT4
-					uc = p->toUpper().tqunicode();
+					uc = p->toUpper().unicode();
 #else
-					uc = p->upper().tqunicode();
+					uc = p->upper().unicode();
 #endif
 					if((uc < 'A') || (uc > 'F'))return false;
 				}
@@ -408,13 +408,13 @@ void KviIrcMask::mask(TQString &szMask,MaskType eMaskType) const
 			break;
 		default:
 			if (m_szUser.length() > 0) {
-				if(m_szUser[0].tqunicode() != '*')
+				if(m_szUser[0].unicode() != '*')
 					szMask.append(m_szWild);
-				if ((m_szUser[0].tqunicode() == '~') ||
-					(m_szUser[0].tqunicode() == '^') ||
-					(m_szUser[0].tqunicode() == '+') ||
-					(m_szUser[0].tqunicode() == '-') ||
-					(m_szUser[0].tqunicode() == '='))szMask.append(m_szUser.right(m_szUser.length() - 1));
+				if ((m_szUser[0].unicode() == '~') ||
+					(m_szUser[0].unicode() == '^') ||
+					(m_szUser[0].unicode() == '+') ||
+					(m_szUser[0].unicode() == '-') ||
+					(m_szUser[0].unicode() == '='))szMask.append(m_szUser.right(m_szUser.length() - 1));
 				else
 					szMask.append(m_szUser);
 			}
@@ -614,13 +614,13 @@ bool KviIrcMask::matchesFixed(const TQString &nick,const TQString &user,const TQ
 int KviIrcMask::getIpDomainMaskLen() const
 {
 	int len = m_szHost.length();
-	const TQChar *p = m_szHost.tqunicode();
+	const TQChar *p = m_szHost.unicode();
 	const TQChar *b = p;
 	p += len;
 	if(b < p)
 	{
 		p--;
-		while((b < p) && (p->tqunicode() != '.') && (p->tqunicode() != ':'))p--;
+		while((b < p) && (p->unicode() != '.') && (p->unicode() != ':'))p--;
 	}
 	// 000.000.000.000
 	//            p
@@ -632,17 +632,17 @@ int KviIrcMask::getIpDomainMaskLen() const
 int KviIrcMask::getLargeIpDomainMaskLen() const
 {
 	int len = m_szHost.length();
-	const TQChar *p = m_szHost.tqunicode();
+	const TQChar *p = m_szHost.unicode();
 	const TQChar *b = p;
 	p += len;
 	if(b < p)
 	{
 		p--;
-		while((b < p) && (p->tqunicode() != '.') && (p->tqunicode() != ':'))p--;
+		while((b < p) && (p->unicode() != '.') && (p->unicode() != ':'))p--;
 		if(b < p)
 		{
 			p--;
-			while((b < p) && (p->tqunicode() != '.') && (p->tqunicode() != ':'))p--;
+			while((b < p) && (p->unicode() != '.') && (p->unicode() != ':'))p--;
 		}
 	}
 	// 000.000.000.000
@@ -657,7 +657,7 @@ TQString KviIrcMask::getHostDomainMask() const
 	const TQChar *p=KviTQString::nullTerminatedArray(m_szHost);
 	if(!p)return TQString();
 	const TQChar *b = p;
-	while(p->tqunicode() && p->tqunicode() != '.')p++;
+	while(p->unicode() && p->unicode() != '.')p++;
 	TQString ret(p,len - (p - b));
 	return ret;
 }
@@ -666,18 +666,18 @@ TQString KviIrcMask::getHostDomainMask() const
 TQString KviIrcMask::getLargeHostDomainMask() const
 {
 	int len = m_szHost.length();
-	const TQChar *p = m_szHost.tqunicode();
+	const TQChar *p = m_szHost.unicode();
 	const TQChar *b = p;
 	p += len;
 
 	if(b < p)
 	{
 		p--;
-		while((b < p) && (p->tqunicode() != '.'))p--;
+		while((b < p) && (p->unicode() != '.'))p--;
 		if(b < p)
 		{
 			p--;
-			while((b < p) && (p->tqunicode() != '.'))p--;
+			while((b < p) && (p->unicode() != '.'))p--;
 		}
 	}
 
@@ -692,14 +692,14 @@ TQString KviIrcMask::getLargeHostDomainMask() const
 bool KviIrcMask::hasMaskedIp() const
 {
 	int len = m_szHost.length();
-	const TQChar *p = m_szHost.tqunicode();
+	const TQChar *p = m_szHost.unicode();
 	const TQChar *b = p;
 	if(len == 0)return false;
 	//run to the end
 	p += len;
 	const TQChar *e = p;
 	p--;
-	while((b < p) && (p->tqunicode() != '.'))p--;
+	while((b < p) && (p->unicode() != '.'))p--;
 	return ((e - p) > 4); // at the moment 4 should be enough : the largest top part is "name"
 }
 
@@ -721,7 +721,7 @@ bool KviIrcMask::hasWildNick()
 	const TQChar * aux = KviTQString::nullTerminatedArray(m_szNick);
 	if(!aux)return false;
 	unsigned short uc;
-	while((uc = aux->tqunicode()))
+	while((uc = aux->unicode()))
 	{
 		if((uc == '*') || (uc == '?'))return true;
 		aux++;
@@ -736,14 +736,14 @@ int KviIrcMask::nonWildChars()
 	if(!aux)return 0;
 	unsigned short uc;
 
-	while((uc = aux->tqunicode()))
+	while((uc = aux->unicode()))
 	{
 		if((uc != '*') && (uc != '?'))iCnt++;
 		aux++;
 	}
 
 	aux = KviTQString::nullTerminatedArray(m_szUser);
-	while((uc = aux->tqunicode()))
+	while((uc = aux->unicode()))
 	{
 		if((uc != '*') && (uc != '?'))iCnt++;
 		aux++;
@@ -751,7 +751,7 @@ int KviIrcMask::nonWildChars()
 
 
 	aux = KviTQString::nullTerminatedArray(m_szHost);
-	while((uc = aux->tqunicode()))
+	while((uc = aux->unicode()))
 	{
 		if((uc != '*') && (uc != '?'))iCnt++;
 		aux++;
diff --git a/src/kvilib/irc/kvi_ircuserdb.cpp b/src/kvilib/irc/kvi_ircuserdb.cpp
index 7fda2d1..3394b04 100644
--- a/src/kvilib/irc/kvi_ircuserdb.cpp
+++ b/src/kvilib/irc/kvi_ircuserdb.cpp
@@ -54,9 +54,9 @@ void KviIrcUserEntry::setRealName(const TQString &rn)
 	m_szRealName = KviTQString::trimmed(m_szRealName);
 	if(m_szRealName.length()>=3)
 	{
-		if( (m_szRealName[0].tqunicode()==KVI_TEXT_COLOR) && (m_szRealName[2].tqunicode()==KVI_TEXT_RESET) )
+		if( (m_szRealName[0].unicode()==KVI_TEXT_COLOR) && (m_szRealName[2].unicode()==KVI_TEXT_RESET) )
 		{
-			switch(m_szRealName[1].tqunicode())
+			switch(m_szRealName[1].unicode())
 			{
 				case '1': // hum.. encoded as hidden color code eh ? publish is somewhere, so others might implement this...
 					setGender(Male);
diff --git a/src/kvilib/irc/kvi_mirccntrl.cpp b/src/kvilib/irc/kvi_mirccntrl.cpp
index 21b5258..e42f316 100644
--- a/src/kvilib/irc/kvi_mirccntrl.cpp
+++ b/src/kvilib/irc/kvi_mirccntrl.cpp
@@ -169,7 +169,7 @@ KVILIB_API unsigned int getUnicodeColorBytes(const TQString &szData,unsigned int
 		return charIdx;
 	}
 
-	unsigned short c = szData[(int)charIdx].tqunicode();
+	unsigned short c = szData[(int)charIdx].unicode();
 
 	//First we can have a digit or a coma
 	if(((c < '0') || (c > '9')))
@@ -189,7 +189,7 @@ KVILIB_API unsigned int getUnicodeColorBytes(const TQString &szData,unsigned int
 		return charIdx;
 	}
 
-	c = szData[(int)charIdx].tqunicode();
+	c = szData[(int)charIdx].unicode();
 
 	if(((c < '0') || (c > '9')) && (c != ','))
 	{
@@ -207,7 +207,7 @@ KVILIB_API unsigned int getUnicodeColorBytes(const TQString &szData,unsigned int
 			(*byte_2)=KVI_NOCHANGE;
 			return charIdx;
 		}
-		c = szData[(int)charIdx].tqunicode();
+		c = szData[(int)charIdx].unicode();
 	}
 
 	if(c == ',')
@@ -218,7 +218,7 @@ KVILIB_API unsigned int getUnicodeColorBytes(const TQString &szData,unsigned int
 			(*byte_2)=KVI_NOCHANGE;
 			return charIdx;
 		}
-		c = szData[(int)charIdx].tqunicode();
+		c = szData[(int)charIdx].unicode();
 	} else {
 		(*byte_2)=KVI_NOCHANGE;
 		return charIdx;
@@ -227,7 +227,7 @@ KVILIB_API unsigned int getUnicodeColorBytes(const TQString &szData,unsigned int
 	if((c < '0') || (c > '9'))
 	{
 		(*byte_2)=KVI_NOCHANGE;
-		if(szData[(int)(charIdx-1)].tqunicode()==',')
+		if(szData[(int)(charIdx-1)].unicode()==',')
 			return charIdx-1;
 		else
 			return charIdx;
@@ -237,7 +237,7 @@ KVILIB_API unsigned int getUnicodeColorBytes(const TQString &szData,unsigned int
 	(*byte_2)=c-'0';
 	charIdx++;
 	if(charIdx >= szData.length())return charIdx;
-	c = szData[(int)charIdx].tqunicode();
+	c = szData[(int)charIdx].unicode();
 
 	if((c >= '0') && (c <='9'))
 	{
@@ -262,7 +262,7 @@ namespace KviMircCntrl
 		unsigned char b2;
 		while(i < l)
 		{
-			switch(szData[i].tqunicode())
+			switch(szData[i].unicode())
 			{
 				case KVI_TEXT_UNDERLINE:
 				case KVI_TEXT_BOLD:
@@ -288,7 +288,7 @@ namespace KviMircCntrl
 					i++;
 					while(i < l)
 					{
-						if(szData[i].tqunicode() == ' ')break;
+						if(szData[i].unicode() == ' ')break;
 						else i++;
 					}
 					begin = i;
diff --git a/src/kvilib/tal/kvi_tal_listview.cpp b/src/kvilib/tal/kvi_tal_listview.cpp
index 68e6967..d090fda 100644
--- a/src/kvilib/tal/kvi_tal_listview.cpp
+++ b/src/kvilib/tal/kvi_tal_listview.cpp
@@ -479,7 +479,7 @@
 	        return;
 	
 	    TQPoint pos;
-	    int boxsize = lv->tqstyle()->pixelMetric(TQStyle::PM_CheckListButtonSize, 0, lv);
+	    int boxsize = lv->style()->pixelMetric(TQStyle::PM_CheckListButtonSize, 0, lv);
 	    if (activatedPos(pos)) {
 	        bool parentControl = false;
 	        if (parent() && parent()->rtti() == 1  &&
@@ -652,7 +652,7 @@
 	    int h = height();
 	    KviTalListView *lv = listView();
 	    if (lv)
-	        h = qMax(lv->tqstyle()->pixelMetric(TQStyle::PM_CheckListButtonSize, 0, lv),
+	        h = qMax(lv->style()->pixelMetric(TQStyle::PM_CheckListButtonSize, 0, lv),
 	                  h);
 	    h = qMax(h, TQApplication::globalStrut().height());
 	    setHeight(h);
@@ -666,7 +666,7 @@
 	        if (myType == RadioButtonController && pixmap(0)) {
 	            //             r += 0;
 	        } else {
-	            r +=  lv->tqstyle()->pixelMetric(TQStyle::PM_CheckListButtonSize, 0, lv) + 4;
+	            r +=  lv->style()->pixelMetric(TQStyle::PM_CheckListButtonSize, 0, lv) + 4;
 	        }
 	    }
 	    return qMax(r, TQApplication::globalStrut().width());
@@ -700,7 +700,7 @@
 	        parentControl = true;
 	
 	    TQFontMetrics fm(lv->fontMetrics());
-	    int boxsize = lv->tqstyle()->pixelMetric(myType == RadioButtonController ? TQStyle::PM_CheckListControllerSize :
+	    int boxsize = lv->style()->pixelMetric(myType == RadioButtonController ? TQStyle::PM_CheckListControllerSize :
 	                                           TQStyle::PM_CheckListButtonSize, 0, lv);
 	    int marg = lv->itemMargin();
 	    int r = marg;
@@ -733,7 +733,7 @@
 	            opt.rect.setRect(x, 0, boxsize, fm.height() + 2 + marg);
 	            opt.palette = cg;
 	            opt.state = styleflags;
-	            lv->tqstyle()->drawPrimitive(TQStyle::PE_Q3CheckListController, &opt, p, lv);
+	            lv->style()->drawPrimitive(TQStyle::PE_Q3CheckListController, &opt, p, lv);
 	            r += boxsize + 4;
 	        }
 	    } else {
@@ -751,7 +751,7 @@
 	        opt.rect.setRect(x, y, boxsize, fm.height() + 2 + marg);
 	        opt.palette = cg;
 	        opt.state = styleflags;
-	        lv->tqstyle()->drawPrimitive((myType == CheckBox || myType == CheckBoxController)
+	        lv->style()->drawPrimitive((myType == CheckBox || myType == CheckBoxController)
 	                                    ? TQStyle::PE_Q3CheckListIndicator
 	                                    : TQStyle::PE_Q3CheckListExclusiveIndicator, &opt, p, lv);
 	        r += boxsize + 4;
@@ -782,7 +782,7 @@
 	         (lv->rootIsDecorated() || myType == RadioButton ||
 	          (myType == CheckBox && parentControl))) {
 	        TQRect rect;
-	        int boxsize = lv->tqstyle()->pixelMetric(TQStyle::PM_CheckListButtonSize, 0, lv);
+	        int boxsize = lv->style()->pixelMetric(TQStyle::PM_CheckListButtonSize, 0, lv);
 	        if (lv->columnAlignment(0) == TQt::AlignCenter) {
 	            TQFontMetrics fm(lv->font());
 	            int bx = (lv->columnWidth(0) - (boxsize + fm.width(text())))/2 + boxsize;
@@ -1216,7 +1216,7 @@
 		return;
 	
 	    TQPoint pos;
-	    int boxsize = lv->tqstyle().pixelMetric(TQStyle::PM_CheckListButtonSize, lv);
+	    int boxsize = lv->style().pixelMetric(TQStyle::PM_CheckListButtonSize, lv);
 	    if ( activatedPos( pos ) ) {
 		bool parentControl = FALSE;
 		if ( parent() && parent()->rtti() == 1  &&
@@ -1388,7 +1388,7 @@
 	    int h = height();
 	    KviTalListView *lv = listView();
 	    if ( lv )
-		h = TQMAX( lv->tqstyle().pixelMetric(TQStyle::PM_CheckListButtonSize, lv),
+		h = TQMAX( lv->style().pixelMetric(TQStyle::PM_CheckListButtonSize, lv),
 			  h );
 	    h = TQMAX( h, TQApplication::globalStrut().height() );
 	    setHeight( h );
@@ -1402,7 +1402,7 @@
 		if ( myType == RadioButtonController && pixmap( 0 ) ) {
 		    //	     r += 0;
 		} else {
-		    r +=  lv->tqstyle().pixelMetric(TQStyle::PM_CheckListButtonSize, lv) + 4;
+		    r +=  lv->style().pixelMetric(TQStyle::PM_CheckListButtonSize, lv) + 4;
 		}
 	    }
 	    return TQMAX( r, TQApplication::globalStrut().width() );
@@ -1437,7 +1437,7 @@
 		parentControl = TRUE;
 	
 	    TQFontMetrics fm( lv->fontMetrics() );
-	    int boxsize = lv->tqstyle().pixelMetric( myType == RadioButtonController ? TQStyle::PM_CheckListControllerSize :
+	    int boxsize = lv->style().pixelMetric( myType == RadioButtonController ? TQStyle::PM_CheckListControllerSize :
 						   TQStyle::PM_CheckListButtonSize, lv);
 	    int marg = lv->itemMargin();
 	    int r = marg;
@@ -1464,7 +1464,7 @@
 		if(!parentControl)
 		    x += 3;
 		if ( !pixmap( 0 ) ) {
-		    lv->tqstyle().tqdrawPrimitive(TQStyle::PE_CheckListController, p,
+		    lv->style().tqdrawPrimitive(TQStyle::PE_CheckListController, p,
 					  TQRect(x, 0, boxsize,
 						fm.height() + 2 + marg),
 					  cg, styleflags, TQStyleOption(this));
@@ -1482,12 +1482,12 @@
 		    y = (fm.height() + 2 + marg - boxsize) / 2;
 	
 		if ( ( myType == CheckBox ) || ( myType == CheckBoxController ) ) {
-		    lv->tqstyle().tqdrawPrimitive(TQStyle::PE_CheckListIndicator, p,
+		    lv->style().tqdrawPrimitive(TQStyle::PE_CheckListIndicator, p,
 					      TQRect(x, y, boxsize,
 						    fm.height() + 2 + marg),
 					      cg, styleflags, TQStyleOption(this));
 		} else { //radio button look
-		    lv->tqstyle().tqdrawPrimitive(TQStyle::PE_CheckListExclusiveIndicator,
+		    lv->style().tqdrawPrimitive(TQStyle::PE_CheckListExclusiveIndicator,
 						      p, TQRect(x, y, boxsize,
 							       fm.height() + 2 + marg),
 						      cg, styleflags, TQStyleOption(this));
@@ -1519,7 +1519,7 @@
 		 (lv->rootIsDecorated() || myType == RadioButton ||
 		  (myType == CheckBox && parentControl) ) ) {
 		TQRect rect;
-		int boxsize = lv->tqstyle().pixelMetric(TQStyle::PM_CheckListButtonSize, lv);
+		int boxsize = lv->style().pixelMetric(TQStyle::PM_CheckListButtonSize, lv);
 		if ( lv->columnAlignment(0) == AlignCenter ) {
 		    TQFontMetrics fm( lv->font() );
 		    int bx = (lv->columnWidth(0) - (boxsize + fm.width(text())))/2 + boxsize;
diff --git a/src/kvilib/tal/kvi_tal_toolbar.cpp b/src/kvilib/tal/kvi_tal_toolbar.cpp
index 80ac44a..85e24f3 100644
--- a/src/kvilib/tal/kvi_tal_toolbar.cpp
+++ b/src/kvilib/tal/kvi_tal_toolbar.cpp
@@ -49,7 +49,7 @@
 		{
 			//setFrameStyle(TQFrame::NoFrame);
 			setObjectName(nam);
-			if(!tqlayout())
+			if(!layout())
 				this->setLayout(new TQBoxLayout(TQBoxLayout::LeftToRight));
 			w->addToolBar(dock,this);
 		}
@@ -58,14 +58,14 @@
 		{
 			//setFrameStyle(TQFrame::NoFrame);
 			setObjectName(name);
-			if(!tqlayout())
+			if(!layout())
 				this->setLayout(new TQBoxLayout(TQBoxLayout::LeftToRight));
 			w->addToolBar(this);
 		}
 
 		TQBoxLayout * KviTalToolBar::boxLayout()
 		{
-			return (TQBoxLayout*)this->tqlayout();
+			return (TQBoxLayout*)this->layout();
 		}
 		
 		void KviTalToolBar::setBoxLayout(TQBoxLayout * l)
diff --git a/src/kvirc/kernel/kvi_app.cpp b/src/kvirc/kernel/kvi_app.cpp
index 1f9224c..66b65cf 100644
--- a/src/kvirc/kernel/kvi_app.cpp
+++ b/src/kvirc/kernel/kvi_app.cpp
@@ -916,8 +916,8 @@ TQString KviApp::getClipboardText()
 	return buffer;
 	*/
 	
-	TQString buffer = tqclipboard()->text(TQClipboard::Clipboard);
-	if(buffer.isEmpty())return tqclipboard()->text(TQClipboard::Selection);
+	TQString buffer = clipboard()->text(TQClipboard::Clipboard);
+	if(buffer.isEmpty())return clipboard()->text(TQClipboard::Selection);
 	return buffer;
 }
 
@@ -945,8 +945,8 @@ void KviApp::setClipboardText(const TQString &str)
 #if [[[TQT_VERSION IS DEPRECATED]]] >= 300
 	}
 #endif*/
-	tqclipboard()->setText(str,TQClipboard::Clipboard);
-	tqclipboard()->setText(str,TQClipboard::Selection);
+	clipboard()->setText(str,TQClipboard::Clipboard);
+	clipboard()->setText(str,TQClipboard::Selection);
 }
 
 void KviApp::setClipboardText(const KviStr &str)
diff --git a/src/kvirc/kernel/kvi_customtoolbardescriptor.cpp b/src/kvirc/kernel/kvi_customtoolbardescriptor.cpp
index 2e3b8fa..8bf97f4 100644
--- a/src/kvirc/kernel/kvi_customtoolbardescriptor.cpp
+++ b/src/kvirc/kernel/kvi_customtoolbardescriptor.cpp
@@ -127,7 +127,7 @@ void KviCustomToolBarDescriptor::fillToolBar()
 {
 	if(m_pActions->count() == 0)
 	{
-		// force tqlayout of the toolbar
+		// force layout of the toolbar
 		TQApplication::postEvent(m_pToolBar,new TQEvent(TQEvent::LayoutHint));
 	} else {
 		KviPointerList<TQString> dying;
diff --git a/src/kvirc/kernel/kvi_ircconnectionserverinfo.cpp b/src/kvirc/kernel/kvi_ircconnectionserverinfo.cpp
index 9c5ef5a..0040b53 100644
--- a/src/kvirc/kernel/kvi_ircconnectionserverinfo.cpp
+++ b/src/kvirc/kernel/kvi_ircconnectionserverinfo.cpp
@@ -67,7 +67,7 @@ void KviIrcConnectionServerInfo::setSupportedChannelModes(const TQString &szSupp
 	m_bSupportsModesIe = (szSupportedChannelModes.contains('e') && szSupportedChannelModes.contains('I'));
 	
 	TQChar* aux=(TQChar*)szSupportedChannelModes.ucs2();
-	while(aux->tqunicode())
+	while(aux->unicode())
 	{
 		if(!m_szSupportedChannelModes.contains(*aux))
 			m_szSupportedChannelModes.append(*aux);
@@ -98,7 +98,7 @@ void KviIrcConnectionServerInfo::buildModePrefixTable()
 	// Alexey: FIXED: rethinked:)
 	// Pragma: LOL :DDDD
 	int i=0;
-	while( (uPrefix = cPrefix->tqunicode()) && (uFlag = cFlag->tqunicode()) && i<m_uPrefixes*3)
+	while( (uPrefix = cPrefix->unicode()) && (uFlag = cFlag->unicode()) && i<m_uPrefixes*3)
 	{
 		m_pModePrefixTable[i]=uPrefix;
 		m_pModePrefixTable[i+1]=uFlag;
@@ -131,7 +131,7 @@ bool KviIrcConnectionServerInfo::isSupportedModePrefix(TQChar c)
 	if(!m_pModePrefixTable) return false;
 	for(int i=0;i<m_uPrefixes;i++)
 	{
-		if(m_pModePrefixTable[i*3]==c.tqunicode()) return true;
+		if(m_pModePrefixTable[i*3]==c.unicode()) return true;
 	}
 	return false;
 }
@@ -141,7 +141,7 @@ bool KviIrcConnectionServerInfo::isSupportedModeFlag(TQChar c)
 	if(!m_pModePrefixTable) return false;
 	for(int i=0;i<m_uPrefixes;i++)
 	{
-		if(m_pModePrefixTable[(i*3)+1]==c.tqunicode()) return true;
+		if(m_pModePrefixTable[(i*3)+1]==c.unicode()) return true;
 	}
 	return false;
 }
@@ -171,7 +171,7 @@ kvi_u32_t KviIrcConnectionServerInfo::modeFlagFromPrefixChar(TQChar c)
 	if(!m_pModePrefixTable) return 0;
 	for(int i=0;i<m_uPrefixes;i++)
 	{
-		if(m_pModePrefixTable[i*3]==c.tqunicode()) return m_pModePrefixTable[i*3+2];
+		if(m_pModePrefixTable[i*3]==c.unicode()) return m_pModePrefixTable[i*3+2];
 	}
 	return 0;
 }
@@ -181,7 +181,7 @@ kvi_u32_t KviIrcConnectionServerInfo::modeFlagFromModeChar(TQChar c)
 	if(!m_pModePrefixTable) return 0;
 	for(int i=0;i<m_uPrefixes;i++)
 	{
-		if(m_pModePrefixTable[i*3+1]==c.tqunicode()) return m_pModePrefixTable[i*3+2];
+		if(m_pModePrefixTable[i*3+1]==c.unicode()) return m_pModePrefixTable[i*3+2];
 	}
 	return 0;
 }
@@ -225,7 +225,7 @@ const TQString & KviBasicIrcServerInfo::getUserModeDescription(TQChar mode)
 
 const TQString & KviBasicIrcServerInfo::getBasicChannelModeDescription(TQChar mode)
 {
-	switch(mode.tqunicode())
+	switch(mode.unicode())
 	{
 		case 'o': return __tr2qs("Channel operators"); break;
 		case 'v': return __tr2qs("Voiced users"); break;
@@ -265,7 +265,7 @@ const TQString & KviBasicIrcServerInfo::getBasicChannelModeDescription(TQChar mo
 
 const TQString & KviBasicIrcServerInfo::getBasicUserModeDescription(TQChar mode)
 {
-	switch(mode.tqunicode())
+	switch(mode.unicode())
 	{
 		case 'o': return __tr2qs("o: IRC operator (OPER)"); break;
 		case 'O': return __tr2qs("O: Local IRC operator (LOCOP)"); break;
diff --git a/src/kvirc/kernel/kvi_userinput.cpp b/src/kvirc/kernel/kvi_userinput.cpp
index 6de1110..0bf241d 100644
--- a/src/kvirc/kernel/kvi_userinput.cpp
+++ b/src/kvirc/kernel/kvi_userinput.cpp
@@ -44,17 +44,17 @@ namespace KviUserInput
 		if(!c)return true; // empty
 		
 		while(c->isSpace())c++;
-		if(!c->tqunicode())return true; // empty
+		if(!c->unicode())return true; // empty
 		
-		if(c->tqunicode() == '\\')
+		if(c->unicode() == '\\')
 		{
 			c++;
-			if(c->tqunicode() != '/')c--;
+			if(c->unicode() != '/')c--;
 		} else {
-			if(c->tqunicode() == '/')
+			if(c->unicode() == '/')
 			{
 				c++;
-				if(c->tqunicode() != '/')
+				if(c->unicode() != '/')
 				{
 					szData.remove(0,c-b);
 					return parseCommand(szData,pWindow,szContext,bUserFriendlyCommandline);
@@ -103,11 +103,11 @@ namespace KviUserInput
 		const TQChar * beg = aux;
 		if(!beg)return; // empty
 	
-		while(aux->tqunicode())
+		while(aux->unicode())
 		{
-			while(aux->tqunicode() && (aux->tqunicode() != '\n'))aux++;
+			while(aux->unicode() && (aux->unicode() != '\n'))aux++;
 			TQString buf(beg,aux-beg);
-			if(aux->tqunicode() == '\n')aux++;
+			if(aux->unicode() == '\n')aux++;
 			beg = aux;
 	
 			if(buf.isEmpty())buf = " "; // avoid "No text to send" (d3vah)
diff --git a/src/kvirc/kvs/kvi_kvs_corefunctions.cpp b/src/kvirc/kvs/kvi_kvs_corefunctions.cpp
index 0610328..f376b58 100644
--- a/src/kvirc/kvs/kvi_kvs_corefunctions.cpp
+++ b/src/kvirc/kvs/kvi_kvs_corefunctions.cpp
@@ -47,7 +47,7 @@ namespace KviKvsCoreFunctions
 		// a_f
 		_REGFNC("active",active)
 		_REGFNC("array",array)
-		_REGFNC("ascii",tqunicode)
+		_REGFNC("ascii",unicode)
 		_REGFNC("asciiToHex",asciiToHex)
 		_REGFNC("asciiToBase64",asciiToBase64)
 		_REGFNC("away",away)
@@ -121,7 +121,7 @@ namespace KviKvsCoreFunctions
 		_REGFNC("true",trueCKEYWORDWORKAROUND)
 		_REGFNC("typeof",typeofCKEYWORDWORKAROUND)
 		_REGFNC("u",u)
-		_REGFNC("tqunicode",tqunicode)
+		_REGFNC("unicode",unicode)
 		_REGFNC("unixtime",unixtime)
 		_REGFNC("unserialize",unserialize)
 		_REGFNC("username",username)
diff --git a/src/kvirc/kvs/kvi_kvs_corefunctions.h b/src/kvirc/kvs/kvi_kvs_corefunctions.h
index 31a73b7..b902ebe 100644
--- a/src/kvirc/kvs/kvi_kvs_corefunctions.h
+++ b/src/kvirc/kvs/kvi_kvs_corefunctions.h
@@ -131,7 +131,7 @@ namespace KviKvsCoreFunctions
 	KVSCF(trueCKEYWORDWORKAROUND);
 	KVSCF(typeofCKEYWORDWORKAROUND);
 	KVSCF(u);
-	KVSCF(tqunicode);
+	KVSCF(unicode);
 	KVSCF(unixtime);
 	KVSCF(unserialize);
 	KVSCF(username);
diff --git a/src/kvirc/kvs/kvi_kvs_corefunctions_af.cpp b/src/kvirc/kvs/kvi_kvs_corefunctions_af.cpp
index 60fbe44..096ff3c 100644
--- a/src/kvirc/kvs/kvi_kvs_corefunctions_af.cpp
+++ b/src/kvirc/kvs/kvi_kvs_corefunctions_af.cpp
@@ -108,7 +108,7 @@ namespace KviKvsCoreFunctions
 		@syntax:
 			<variant> $ascii(<char:string>)
 		@description:
-			This function has been renamed to $tqunicode and is present
+			This function has been renamed to $unicode and is present
 			only for backward compatibility.
 		@seealso:
 			[fnc]$cr[/fnc], [fnc]$lf[/fnc], [fnc]$char[/fnc]
@@ -489,24 +489,24 @@ namespace KviKvsCoreFunctions
 		@title:
 			$char
 		@short:
-			Returns a character specified by tqunicode
+			Returns a character specified by unicode
 		@syntax:
-			<string> $char(<tqunicode_value:integer>)
+			<string> $char(<unicode_value:integer>)
 		@description:
-			Returns a character corresponding to the UNICODE code <tqunicode_value>.[br]
+			Returns a character corresponding to the UNICODE code <unicode_value>.[br]
 			This function can not return NUL character (UNICODE 0). Basically
 			you should never need it: if you do, drop me a mail.[br]
-			If the <tqunicode_code> is not a valid UNICODE code (or is 0), this function returns
+			If the <unicode_code> is not a valid UNICODE code (or is 0), this function returns
 			an empty string.[br]
 		@seealso:
-			[fnc]$cr[/fnc], [fnc]$lf[/fnc], [fnc]$tqunicode[/fnc]
+			[fnc]$cr[/fnc], [fnc]$lf[/fnc], [fnc]$unicode[/fnc]
 	*/
 
 	KVSCF(charCKEYWORDWORKAROUND)
 	{
 		kvs_uint_t ac;
 		KVSCF_PARAMETERS_BEGIN
-			KVSCF_PARAMETER("tqunicode_value",KVS_PT_UINT,0,ac)
+			KVSCF_PARAMETER("unicode_value",KVS_PT_UINT,0,ac)
 		KVSCF_PARAMETERS_END
 
 		if(ac != 0 && ac < 65536)
@@ -780,15 +780,15 @@ namespace KviKvsCoreFunctions
 		const TQChar * c = KviTQString::nullTerminatedArray(szFormat);
 		if(c)
 		{
-			while(c->tqunicode())
+			while(c->unicode())
 			{
 				//Check for right Characters
 				#ifdef COMPILE_ON_WINDOWS
-					if (szAllowedCharacters.find((char)(c->tqunicode()),0,true) >= 0)	tmpFormat += '%';
+					if (szAllowedCharacters.find((char)(c->unicode()),0,true) >= 0)	tmpFormat += '%';
 				#else
 					if (c->isLetter()) tmpFormat += '%';
 				#endif
-				tmpFormat += (char)(c->tqunicode());
+				tmpFormat += (char)(c->unicode());
 				c++;
 			}
 		}
diff --git a/src/kvirc/kvs/kvi_kvs_corefunctions_sz.cpp b/src/kvirc/kvs/kvi_kvs_corefunctions_sz.cpp
index a5478dc..e56abbe 100644
--- a/src/kvirc/kvs/kvi_kvs_corefunctions_sz.cpp
+++ b/src/kvirc/kvs/kvi_kvs_corefunctions_sz.cpp
@@ -401,12 +401,12 @@ namespace KviKvsCoreFunctions
 			if(szLongSwitch.isEmpty())
 				v = sl->find(szSwitch);
 			else
-				v = sl->find(szSwitch[0].tqunicode(),szLongSwitch);
+				v = sl->find(szSwitch[0].unicode(),szLongSwitch);
 		}else {
 			if(szLongSwitch.isEmpty())
 				v = sl->find(szSwitch[0]);
 			else
-				v = sl->find(szSwitch[0].tqunicode(),szLongSwitch);
+				v = sl->find(szSwitch[0].unicode(),szLongSwitch);
 		}
 
 		if(v)KVSCF_pRetBuffer->copyFrom(*v);
@@ -842,15 +842,15 @@ namespace KviKvsCoreFunctions
 	/////////////////////////////////////////////////////////////////////////////////////////
 
 	/*
-		@doc: tqunicode
+		@doc: unicode
 		@type:
 			function
 		@title:
-			$tqunicode
+			$unicode
 		@short:
 			Returns the UNICODE code of a sets of characters
 		@syntax:
-			<variant> $tqunicode(<char:string>)
+			<variant> $unicode(<char:string>)
 		@description:
 			If <char> is composed only of a single character
 			then returns its UNICODE code point as an integer.
@@ -860,7 +860,7 @@ namespace KviKvsCoreFunctions
 			[fnc]$cr[/fnc], [fnc]$lf[/fnc], [fnc]$char[/fnc]
 	*/
 
-	KVSCF(tqunicode)
+	KVSCF(unicode)
 	{
 		TQString sz;
 		KVSCF_PARAMETERS_BEGIN
@@ -871,10 +871,10 @@ namespace KviKvsCoreFunctions
 		{
 			KviKvsArray * a = new KviKvsArray();
 			for(kvs_int_t i=0;i<sz.length();i++)
-				a->set(i,new KviKvsVariant((kvs_int_t)(sz[(int)i].tqunicode())));
+				a->set(i,new KviKvsVariant((kvs_int_t)(sz[(int)i].unicode())));
 			KVSCF_pRetBuffer->setArray(a);
 		} else {
-			KVSCF_pRetBuffer->setInteger((kvs_int_t)(sz[0].tqunicode()));
+			KVSCF_pRetBuffer->setInteger((kvs_int_t)(sz[0].unicode()));
 		}
 		return true;
 	}
diff --git a/src/kvirc/kvs/kvi_kvs_coresimplecommands_af.cpp b/src/kvirc/kvs/kvi_kvs_coresimplecommands_af.cpp
index 0a4aa54..4f11db0 100644
--- a/src/kvirc/kvs/kvi_kvs_coresimplecommands_af.cpp
+++ b/src/kvirc/kvs/kvi_kvs_coresimplecommands_af.cpp
@@ -427,7 +427,7 @@ namespace KviKvsCoreSimpleCommands
 
 	//	TQChar o = tbOp.length() > 0 ? tbOp[0] : TQChar('x');
 
-		switch(o.tqunicode())
+		switch(o.unicode())
 		{
 			case 't':
 				KviTalToolTip::remove(pButton);
@@ -853,7 +853,7 @@ namespace KviKvsCoreSimpleCommands
 			{
 				TQString szWnd;
 				v->asString(szWnd);
-	//#warning "FIXME: the window database is not tqunicode! (we even could keep integer window id's at this point!)"
+	//#warning "FIXME: the window database is not unicode! (we even could keep integer window id's at this point!)"
 				pWnd = g_pApp->findWindow(szWnd.utf8().data());
 				if(!pWnd)
 				{
diff --git a/src/kvirc/kvs/kvi_kvs_coresimplecommands_sz.cpp b/src/kvirc/kvs/kvi_kvs_coresimplecommands_sz.cpp
index acf8eec..85c6c5c 100644
--- a/src/kvirc/kvs/kvi_kvs_coresimplecommands_sz.cpp
+++ b/src/kvirc/kvs/kvi_kvs_coresimplecommands_sz.cpp
@@ -673,7 +673,7 @@ namespace KviKvsCoreSimpleCommands
 			to load catalogues that reside in different directories.[br]
 			[b]NOTE[/b][br]
 			This feature is currently work in progress: the scripting engine
-			is not yet fully tqunicode and thus some more exotic translations may still suffer...
+			is not yet fully unicode and thus some more exotic translations may still suffer...
 		@seealso:
 			[fnc]$tr[/fnc], [cmd]trunload[/cmd]
 	*/
diff --git a/src/kvirc/kvs/kvi_kvs_parser.cpp b/src/kvirc/kvs/kvi_kvs_parser.cpp
index fc483f5..074753e 100644
--- a/src/kvirc/kvs/kvi_kvs_parser.cpp
+++ b/src/kvirc/kvs/kvi_kvs_parser.cpp
@@ -117,9 +117,9 @@ void KviKvsParser::report(bool bError,const TQChar * pLocation,const TQString &s
 
 void KviKvsParser::errorBadChar(const TQChar * pLocation,char cExpected,const char * szCommandName)
 {
-	if(pLocation->tqunicode())
-		error(pLocation,__tr2qs("Found character '%q' (tqunicode 0x%x) where '%c' was expected: see \"/help %s\" for the command syntax"),
-			pLocation,pLocation->tqunicode(),cExpected,szCommandName);
+	if(pLocation->unicode())
+		error(pLocation,__tr2qs("Found character '%q' (unicode 0x%x) where '%c' was expected: see \"/help %s\" for the command syntax"),
+			pLocation,pLocation->unicode(),cExpected,szCommandName);
 	else
 		error(pLocation,__tr2qs("Found end of input where character '%c' was expected: see \"/help %s\" for the command syntax"),
 			cExpected,szCommandName);
@@ -1349,7 +1349,7 @@ KviKvsTreeNodeInstruction * KviKvsParser::parseAsParameter(const TQChar * pBuffe
 		so the callback code is empty, but if you continue reading we will soon fill it.
 		[/p]
 
-		[big]A typical addon tqlayout[/big]
+		[big]A typical addon layout[/big]
 		[p]
 		As stated above, the addons are usually shipped in a compressed archive.
 		Once uncompressed, the archive will expand into a small directory tree
@@ -1400,7 +1400,7 @@ KviKvsTreeNodeInstruction * KviKvsParser::parseAsParameter(const TQChar * pBuffe
 		[/p]
 		[p]
 		The entries in [b]bold[/b] are directories while the other are files.
-		Please note that this is a general tqlayout for a huge and rather complex
+		Please note that this is a general layout for a huge and rather complex
 		addon: you might not need all of these directories. Remember: the minimal
 		addon has only an install.kvs file. Anyway, a really cool addon
 		will probably have all of them and maybe some more.
@@ -1496,7 +1496,7 @@ KviKvsTreeNodeInstruction * KviKvsParser::parseAsParameter(const TQChar * pBuffe
 		[p]
 		It is a good idea to start on the KVIrc web site. There are surely
 		several addons to look at. Pick one that seems simple and analyze its
-		tqlayout and code (wow... the free software!). It will be easier to do than it was to explain it :D
+		layout and code (wow... the free software!). It will be easier to do than it was to explain it :D
 		[/p]
 		[p]
 		Have fun! :)
@@ -2724,7 +2724,7 @@ KviKvsTreeNodeInstruction * KviKvsParser::parseInstruction()
 				return parseCommand();
 			} else {
 				// what the heck is this ?
-				error(KVSP_curCharPointer,__tr2qs("Found character '%q' (tqunicode %x) where an instruction was expected"),KVSP_curCharPointer,KVSP_curCharUnicode);
+				error(KVSP_curCharPointer,__tr2qs("Found character '%q' (unicode %x) where an instruction was expected"),KVSP_curCharPointer,KVSP_curCharUnicode);
 				return 0;
 			}
 		break;
@@ -2839,7 +2839,7 @@ KviKvsTreeNodeSwitchList * KviKvsParser::parseCommandSwitchList()
 	
 				if(KVSP_curCharUnicode == 0)
 				{
-					error(KVSP_curCharPointer,__tr2qs("Unexpected character '%q' (tqunicode %x) after a switch dash"),KVSP_curCharPointer,KVSP_curCharUnicode);
+					error(KVSP_curCharPointer,__tr2qs("Unexpected character '%q' (unicode %x) after a switch dash"),KVSP_curCharPointer,KVSP_curCharUnicode);
 				} else {
 					error(KVSP_curCharPointer,__tr2qs("Unexpected end of script after a switch dash"));
 				}
@@ -2880,12 +2880,12 @@ KviKvsTreeNodeSwitchList * KviKvsParser::parseCommandSwitchList()
 			if(bLong)
 				sw->addLong(TQString(pSw,pSwEnd - pSw),p);
 			else
-				sw->addShort(pSw->lower().tqunicode(),p);
+				sw->addShort(pSw->lower().unicode(),p);
 		} else {
 			if(bLong)
 				sw->addLong(TQString(pSw,pSwEnd - pSw),new KviKvsTreeNodeConstantData(KVSP_curCharPointer,new KviKvsVariant(true))); // empty param
 			else
-				sw->addShort(pSw->lower().tqunicode(),new KviKvsTreeNodeConstantData(KVSP_curCharPointer,new KviKvsVariant(true))); // empty param
+				sw->addShort(pSw->lower().unicode(),new KviKvsTreeNodeConstantData(KVSP_curCharPointer,new KviKvsVariant(true))); // empty param
 		}
 	}
 
@@ -3300,7 +3300,7 @@ KviKvsTreeNodeData * KviKvsParser::parseArrayIndex()
 							error(KVSP_curCharPointer,__tr2qs("Unexpected end of line in array index (missing ']' character or unescaped newline)"));
 						break;
 						default:
-							error(KVSP_curCharPointer,__tr2qs("Unexpected character '%q' (tqunicode %x) in array index: it should be already terminated"),KVSP_curCharPointer,KVSP_curCharUnicode);
+							error(KVSP_curCharPointer,__tr2qs("Unexpected character '%q' (unicode %x) in array index: it should be already terminated"),KVSP_curCharPointer,KVSP_curCharUnicode);
 						break;
 					}
 					return 0;
diff --git a/src/kvirc/kvs/kvi_kvs_parser_command.cpp b/src/kvirc/kvs/kvi_kvs_parser_command.cpp
index 094fc30..865bf18 100644
--- a/src/kvirc/kvs/kvi_kvs_parser_command.cpp
+++ b/src/kvirc/kvs/kvi_kvs_parser_command.cpp
@@ -139,7 +139,7 @@ KviKvsTreeNodeCommand * KviKvsParser::parseCommand()
 		// perl.begin has a *really* half special parsing routine
 		if(iIdentifierLen == 4)
 		{
-			if(pIdentifier->lower().tqunicode() == 'p')
+			if(pIdentifier->lower().unicode() == 'p')
 			{
 				if(KviTQString::equalCI(szIdentifier,"perl"))
 				{
diff --git a/src/kvirc/kvs/kvi_kvs_parser_comment.cpp b/src/kvirc/kvs/kvi_kvs_parser_comment.cpp
index 18fbbbe..ea15840 100644
--- a/src/kvirc/kvs/kvi_kvs_parser_comment.cpp
+++ b/src/kvirc/kvs/kvi_kvs_parser_comment.cpp
@@ -85,7 +85,7 @@ KviKvsTreeNode * KviKvsParser::parseComment()
 				}
 				break;
 				default:
-					error(KVSP_curCharPointer,__tr2qs("Unexpected character '%q' (tqunicode %x) after a slash (it is a typo or a malformed comment begin ?)"),KVSP_curCharPointer,KVSP_curCharUnicode);
+					error(KVSP_curCharPointer,__tr2qs("Unexpected character '%q' (unicode %x) after a slash (it is a typo or a malformed comment begin ?)"),KVSP_curCharPointer,KVSP_curCharUnicode);
 					return 0;
 				break;
 			}
diff --git a/src/kvirc/kvs/kvi_kvs_parser_dollar.cpp b/src/kvirc/kvs/kvi_kvs_parser_dollar.cpp
index a2d6516..b556614 100644
--- a/src/kvirc/kvs/kvi_kvs_parser_dollar.cpp
+++ b/src/kvirc/kvs/kvi_kvs_parser_dollar.cpp
@@ -50,7 +50,7 @@ KviKvsTreeNodeData * KviKvsParser::parseDollar(bool bInObjScope)
 	if(!KVSP_curCharIsFunctionStart)
 	{
 		if(KVSP_curCharUnicode == 0)warning(KVSP_curCharPointer,__tr2qs("Unexpected end of script after '$' function call prefix"));
-		else warning(KVSP_curCharPointer,__tr2qs("Unexpected character %q (tqunicode %x) after '$' function call prefix"),KVSP_curCharPointer,KVSP_curCharUnicode);
+		else warning(KVSP_curCharPointer,__tr2qs("Unexpected character %q (unicode %x) after '$' function call prefix"),KVSP_curCharPointer,KVSP_curCharUnicode);
 		error(KVSP_curCharPointer,__tr2qs("Syntax error after '$' function call prefix. If you want to use a plain '$' in the code you need to escape it"));
 		return 0;
 	}
diff --git a/src/kvirc/kvs/kvi_kvs_parser_expression.cpp b/src/kvirc/kvs/kvi_kvs_parser_expression.cpp
index ee91df4..44ce71d 100644
--- a/src/kvirc/kvs/kvi_kvs_parser_expression.cpp
+++ b/src/kvirc/kvs/kvi_kvs_parser_expression.cpp
@@ -420,7 +420,7 @@ KviKvsTreeNodeExpression * KviKvsParser::parseExpressionOperandCore(char termina
 						pDataList->append(new KviKvsTreeNodeConstantData(pBegin,new KviKvsVariant(iVal)));
 					} else {
 						// bOk is false
-						if(pBegin->tqunicode() == '0')
+						if(pBegin->unicode() == '0')
 						{
 							if(tmp.length() > 2)
 							{
@@ -448,7 +448,7 @@ KviKvsTreeNodeExpression * KviKvsParser::parseExpressionOperandCore(char termina
 						}
 					}
 				} else {
-					error(KVSP_curCharPointer,__tr2qs("Unexpected character %q (tqunicode %h) in expression. If it meant to be a string use the quotes."),KVSP_curCharPointer,KVSP_curCharUnicode);
+					error(KVSP_curCharPointer,__tr2qs("Unexpected character %q (unicode %h) in expression. If it meant to be a string use the quotes."),KVSP_curCharPointer,KVSP_curCharUnicode);
 					delete pDataList;
 					return 0;
 				}
diff --git a/src/kvirc/kvs/kvi_kvs_parser_lside.cpp b/src/kvirc/kvs/kvi_kvs_parser_lside.cpp
index 3733f55..bcca75d 100644
--- a/src/kvirc/kvs/kvi_kvs_parser_lside.cpp
+++ b/src/kvirc/kvs/kvi_kvs_parser_lside.cpp
@@ -828,7 +828,7 @@ KviKvsTreeNodeOperation * KviKvsParser::parseBindingOperation()
 	
 	if(KVSP_curCharUnicode != '/')
 	{
-		error(KVSP_curCharPointer,__tr2qs("Found character '%q' (tqunicode %x) where a slash '/' was expected"),KVSP_curCharPointer,KVSP_curCharUnicode);
+		error(KVSP_curCharPointer,__tr2qs("Found character '%q' (unicode %x) where a slash '/' was expected"),KVSP_curCharPointer,KVSP_curCharUnicode);
 		return 0;
 	}
 
@@ -846,7 +846,7 @@ KviKvsTreeNodeOperation * KviKvsParser::parseBindingOperation()
 
 	if(KVSP_curCharUnicode != '/')
 	{
-		error(KVSP_curCharPointer,__tr2qs("Found character '%q' (tqunicode %x) where a slash '/' was expected"),KVSP_curCharPointer,KVSP_curCharUnicode);
+		error(KVSP_curCharPointer,__tr2qs("Found character '%q' (unicode %x) where a slash '/' was expected"),KVSP_curCharPointer,KVSP_curCharUnicode);
 		delete pFirst;
 		return 0;
 	}
@@ -869,7 +869,7 @@ KviKvsTreeNodeOperation * KviKvsParser::parseBindingOperation()
 
 	if(KVSP_curCharUnicode != '/')
 	{
-		error(KVSP_curCharPointer,__tr2qs("Found character '%q' (tqunicode %x) where a slash '/' was expected"),KVSP_curCharPointer,KVSP_curCharUnicode);
+		error(KVSP_curCharPointer,__tr2qs("Found character '%q' (unicode %x) where a slash '/' was expected"),KVSP_curCharPointer,KVSP_curCharUnicode);
 		delete pFirst;
 		return 0;
 	}
@@ -1173,10 +1173,10 @@ KviKvsTreeNodeInstruction * KviKvsParser::parseVoidFunctionCallOrOperation()
 		// must be followed by the end of a command
 		if(r->isFunctionCall())
 		{
-			error(KVSP_curCharPointer,__tr2qs("Unexpected character '%q' (tqunicode %x) after a void function call: end of instruction expected"),KVSP_curCharPointer,KVSP_curCharUnicode);
+			error(KVSP_curCharPointer,__tr2qs("Unexpected character '%q' (unicode %x) after a void function call: end of instruction expected"),KVSP_curCharPointer,KVSP_curCharUnicode);
 		} else {
 			warning(pBegin,__tr2qs("Unexpected (and senseless) read-only data evaluation"));
-			warning(pBegin,__tr2qs("Unexpected character '%q' (tqunicode %x)"),KVSP_curCharPointer,KVSP_curCharUnicode);
+			warning(pBegin,__tr2qs("Unexpected character '%q' (unicode %x)"),KVSP_curCharPointer,KVSP_curCharUnicode);
 			error(KVSP_curCharPointer,__tr2qs("Syntax error: confused by earlier errors: bailing out"));
 		}
 		delete r;
diff --git a/src/kvirc/kvs/kvi_kvs_parser_macros.h b/src/kvirc/kvs/kvi_kvs_parser_macros.h
index e727e4a..8de1f47 100644
--- a/src/kvirc/kvs/kvi_kvs_parser_macros.h
+++ b/src/kvirc/kvs/kvi_kvs_parser_macros.h
@@ -29,15 +29,15 @@
 #define KVSP_backChar m_ptr--
 #define KVSP_backNChars(n) m_ptr -= n
 
-#define KVSP_curCharUnicode (m_ptr->tqunicode())
+#define KVSP_curCharUnicode (m_ptr->unicode())
 #define KVSP_curCharPointer m_ptr
 
 #define KVSP_curCharIsLetter (m_ptr->isLetter())
 #define KVSP_curCharIsNumber (m_ptr->isNumber())
 #define KVSP_curCharIsLetterOrNumber (m_ptr->isLetterOrNumber())
-#define KVSP_curCharIsFunctionStart (m_ptr->isLetterOrNumber() || (m_ptr->tqunicode() == '(') || (m_ptr->tqunicode() == '{') || (m_ptr->tqunicode() == '$'))
-#define KVSP_curCharIsEndOfCommand ((m_ptr->tqunicode() == ';') || (m_ptr->tqunicode() == 0) || (m_ptr->tqunicode() == '\n') || (m_ptr->tqunicode() == '\r'))
-#define KVSP_curCharIsEndOfBuffer (m_ptr->tqunicode() == 0)
+#define KVSP_curCharIsFunctionStart (m_ptr->isLetterOrNumber() || (m_ptr->unicode() == '(') || (m_ptr->unicode() == '{') || (m_ptr->unicode() == '$'))
+#define KVSP_curCharIsEndOfCommand ((m_ptr->unicode() == ';') || (m_ptr->unicode() == 0) || (m_ptr->unicode() == '\n') || (m_ptr->unicode() == '\r'))
+#define KVSP_curCharIsEndOfBuffer (m_ptr->unicode() == 0)
 
 #define KVSP_setCurCharPointer(_ptr) m_ptr = _ptr
 
diff --git a/src/kvirc/kvs/kvi_kvs_parser_specialcommands.cpp b/src/kvirc/kvs/kvi_kvs_parser_specialcommands.cpp
index 95eca6a..6d6ab96 100644
--- a/src/kvirc/kvs/kvi_kvs_parser_specialcommands.cpp
+++ b/src/kvirc/kvs/kvi_kvs_parser_specialcommands.cpp
@@ -207,7 +207,7 @@ KviKvsTreeNodeCommand * KviKvsParser::parseSpecialCommandUnset()
 	if(!KVSP_curCharIsEndOfCommand)
 	{
 		warning(KVSP_curCharPointer,__tr2qs("The 'unset' command needs a variable list"));
-		error(KVSP_curCharPointer,__tr2qs("Found character %q (tqunicode %x) where a variable was expected"),KVSP_curCharPointer,KVSP_curCharUnicode);
+		error(KVSP_curCharPointer,__tr2qs("Found character %q (unicode %x) where a variable was expected"),KVSP_curCharPointer,KVSP_curCharUnicode);
 		return 0;
 	}
 
@@ -277,7 +277,7 @@ KviKvsTreeNodeCommand * KviKvsParser::parseSpecialCommandGlobal()
 	if(!KVSP_curCharIsEndOfCommand)
 	{
 		warning(KVSP_curCharPointer,__tr2qs("The 'global' command needs a variable list"));
-		error(KVSP_curCharPointer,__tr2qs("Found character %q (tqunicode %x) where a variable was expected"),KVSP_curCharPointer,KVSP_curCharUnicode);
+		error(KVSP_curCharPointer,__tr2qs("Found character %q (unicode %x) where a variable was expected"),KVSP_curCharPointer,KVSP_curCharUnicode);
 		return 0;
 	}
 
@@ -376,7 +376,7 @@ KviKvsTreeNodeCommand * KviKvsParser::parseSpecialCommandClass()
 
 	if(KVSP_curCharUnicode != '(')
 	{
-		error(KVSP_curCharPointer,__tr2qs("Found character %q (tqunicode %x) where an open parenthesis was expected"),KVSP_curCharPointer,KVSP_curCharUnicode);
+		error(KVSP_curCharPointer,__tr2qs("Found character %q (unicode %x) where an open parenthesis was expected"),KVSP_curCharPointer,KVSP_curCharUnicode);
 		return 0;
 	}
 
@@ -443,7 +443,7 @@ KviKvsTreeNodeCommand * KviKvsParser::parseSpecialCommandClass()
 
 		if(KVSP_curCharPointer == pLabelBegin)
 		{
-			error(KVSP_curCharPointer,__tr2qs("Found character %q (tqunicode %x) where a function name was expected"),KVSP_curCharPointer,KVSP_curCharUnicode);
+			error(KVSP_curCharPointer,__tr2qs("Found character %q (unicode %x) where a function name was expected"),KVSP_curCharPointer,KVSP_curCharUnicode);
 			delete pClass;
 			return 0;
 		}
@@ -471,7 +471,7 @@ KviKvsTreeNodeCommand * KviKvsParser::parseSpecialCommandClass()
 		
 				if(KVSP_curCharPointer == pLabelBegin)
 				{
-					error(KVSP_curCharPointer,__tr2qs("Found character %q (tqunicode %x) where a function name was expected"),KVSP_curCharPointer,KVSP_curCharUnicode);
+					error(KVSP_curCharPointer,__tr2qs("Found character %q (unicode %x) where a function name was expected"),KVSP_curCharPointer,KVSP_curCharUnicode);
 					delete pClass;
 					return 0;
 				}
@@ -498,7 +498,7 @@ KviKvsTreeNodeCommand * KviKvsParser::parseSpecialCommandClass()
 		
 				if(KVSP_curCharPointer == pLabelBegin)
 				{
-					error(KVSP_curCharPointer,__tr2qs("Found character %q (tqunicode %x) where a function name was expected"),KVSP_curCharPointer,KVSP_curCharUnicode);
+					error(KVSP_curCharPointer,__tr2qs("Found character %q (unicode %x) where a function name was expected"),KVSP_curCharPointer,KVSP_curCharUnicode);
 					delete pClass;
 					return 0;
 				}
@@ -628,7 +628,7 @@ KviKvsTreeNodeCommand * KviKvsParser::parseSpecialCommandWhile()
 	if(KVSP_curCharUnicode != '(')
 	{
 		warning(KVSP_curCharPointer,__tr2qs("The while command needs an expression enclosed in parenthesis"));
-		error(KVSP_curCharPointer,__tr2qs("Found character %q (tqunicode %x) where an open parenthesis was expected"),KVSP_curCharPointer,KVSP_curCharUnicode);
+		error(KVSP_curCharPointer,__tr2qs("Found character %q (unicode %x) where an open parenthesis was expected"),KVSP_curCharPointer,KVSP_curCharUnicode);
 		return 0;
 	}
 
@@ -740,7 +740,7 @@ KviKvsTreeNodeCommand * KviKvsParser::parseSpecialCommandDo()
 				if(KVSP_curCharIsEndOfBuffer)
 					error(KVSP_curCharPointer,__tr2qs("Unexpected end of command after the 'do' command block: expected 'while' keyword"));
 				else
-					error(KVSP_curCharPointer,__tr2qs("Found character %q (tqunicode %x) where a 'while' keyword was expected"),KVSP_curCharPointer,KVSP_curCharUnicode);
+					error(KVSP_curCharPointer,__tr2qs("Found character %q (unicode %x) where a 'while' keyword was expected"),KVSP_curCharPointer,KVSP_curCharUnicode);
 				if(i)delete i;
 				return 0;
 			}
@@ -1089,7 +1089,7 @@ KviKvsTreeNodeCommand * KviKvsParser::parseSpecialCommandFor()
 	
 	if(KVSP_curCharUnicode != ')')
 	{
-		error(KVSP_curCharPointer,__tr2qs("Found char %q (tqunicode %x) while looking for the terminating ')' in 'for' command"),KVSP_curCharPointer,KVSP_curCharUnicode);
+		error(KVSP_curCharPointer,__tr2qs("Found char %q (unicode %x) while looking for the terminating ')' in 'for' command"),KVSP_curCharPointer,KVSP_curCharUnicode);
 		if(i1)delete i1;
 		if(e)delete e;
 		if(i2)delete i2;
@@ -1193,7 +1193,7 @@ KviKvsTreeNodeCommand * KviKvsParser::parseSpecialCommandForeach()
 	if((KVSP_curCharUnicode != '%') && (KVSP_curCharUnicode != '$') && (KVSP_curCharUnicode != '@'))
 	{
 		warning(KVSP_curCharPointer,__tr2qs("The 'foreach' command expects a writeable iteration variable as first parameter"));
-		error(KVSP_curCharPointer,__tr2qs("Found character '%q' (tqunicode %x) where '%' or '$' was expected: see /help foreach for the command syntax"),KVSP_curCharPointer,KVSP_curCharUnicode);
+		error(KVSP_curCharPointer,__tr2qs("Found character '%q' (unicode %x) where '%' or '$' was expected: see /help foreach for the command syntax"),KVSP_curCharPointer,KVSP_curCharUnicode);
 		return 0;
 	}
 
@@ -1419,7 +1419,7 @@ KviKvsTreeNodeCommand * KviKvsParser::parseSpecialCommandSwitch()
 
 		if(KVSP_curCharPointer == pLabelBegin)
 		{
-			error(KVSP_curCharPointer,__tr2qs("Found character %q (tqunicode %x) where a 'case','match','regexp','default' or 'break' label was expected"),KVSP_curCharPointer,KVSP_curCharUnicode);
+			error(KVSP_curCharPointer,__tr2qs("Found character %q (unicode %x) where a 'case','match','regexp','default' or 'break' label was expected"),KVSP_curCharPointer,KVSP_curCharUnicode);
 			delete pSwitch;
 			return 0;
 		}
@@ -1566,7 +1566,7 @@ KviKvsTreeNodeSpecialCommandDefpopupLabelPopup * KviKvsParser::parseSpecialComma
 
 		if(KVSP_curCharPointer == pLabelBegin)
 		{
-			error(KVSP_curCharPointer,__tr2qs("Found character %q (tqunicode %x) where a 'prologue','separator','label','popup','item','extpopup' or 'epilogue' label was expected"),KVSP_curCharPointer,KVSP_curCharUnicode);
+			error(KVSP_curCharPointer,__tr2qs("Found character %q (unicode %x) where a 'prologue','separator','label','popup','item','extpopup' or 'epilogue' label was expected"),KVSP_curCharPointer,KVSP_curCharUnicode);
 			delete pPopup;
 			return 0;
 		}
diff --git a/src/kvirc/kvs/kvi_kvs_processmanager.cpp b/src/kvirc/kvs/kvi_kvs_processmanager.cpp
index 53ac882..c80794e 100644
--- a/src/kvirc/kvs/kvi_kvs_processmanager.cpp
+++ b/src/kvirc/kvs/kvi_kvs_processmanager.cpp
@@ -73,7 +73,7 @@ bool KviKvsProcessAsyncOperation::start()
 		if(szShell.isEmpty())
 		{
 #ifdef COMPILE_ON_WINDOWS
-			// [01:26:00] <PragmaOff> btw, what is qt_wintqunicode ?
+			// [01:26:00] <PragmaOff> btw, what is qt_winunicode ?
 			// [01:26:12] <kode54> TQt export specific to win32
 			// [01:26:27] <kode54> bool which indicates whether system is Unicode (NT) or not
 			// [01:26:58] <kode54> not sure if that's documented, but it is a public export
diff --git a/src/kvirc/kvs/kvi_kvs_report.cpp b/src/kvirc/kvs/kvi_kvs_report.cpp
index aa40ef3..7618e29 100644
--- a/src/kvirc/kvs/kvi_kvs_report.cpp
+++ b/src/kvirc/kvs/kvi_kvs_report.cpp
@@ -60,7 +60,7 @@ void KviKvsReport::findLineAndCol(const TQChar * pBegin,const TQChar * pPoint,in
 	const TQChar * pPrevLine = 0;
 	const TQChar * pLineBegin = pBegin;
 
-	unsigned short us = pBegin->tqunicode();
+	unsigned short us = pBegin->unicode();
 
 	while(us && (pBegin < pPoint))
 	{
@@ -73,7 +73,7 @@ void KviKvsReport::findLineAndCol(const TQChar * pBegin,const TQChar * pPoint,in
 		} else {
 			pBegin++;
 		}
-		us = pBegin->tqunicode();
+		us = pBegin->unicode();
 	}
 	
 	iCol = (pBegin - pLineBegin) + 1;
@@ -92,7 +92,7 @@ void KviKvsReport::findLineColAndListing(const TQChar * pBegin,const TQChar * pP
 	const TQChar * pPrevLine = 0;
 	const TQChar * pLineBegin = pBegin;
 
-	unsigned short us = pBegin->tqunicode();
+	unsigned short us = pBegin->unicode();
 
 	while(us && (pBegin < pPoint))
 	{
@@ -105,7 +105,7 @@ void KviKvsReport::findLineColAndListing(const TQChar * pBegin,const TQChar * pP
 		} else {
 			pBegin++;
 		}
-		us = pBegin->tqunicode();
+		us = pBegin->unicode();
 	}
 	
 	iCol = (pBegin - pLineBegin) + 1;
@@ -131,11 +131,11 @@ void KviKvsReport::findLineColAndListing(const TQChar * pBegin,const TQChar * pP
 	// current line
 	pBegin = pLineBegin;
 
-	us = pBegin->tqunicode();
+	us = pBegin->unicode();
 	while(us && (us != '\n'))
 	{
 		pBegin++;
-		us = pBegin->tqunicode();
+		us = pBegin->unicode();
 	}
 	if(us)pBegin++;
 
@@ -152,11 +152,11 @@ void KviKvsReport::findLineColAndListing(const TQChar * pBegin,const TQChar * pP
 		// next line
 		pLineBegin = pBegin;
 	
-		us = pBegin->tqunicode();
+		us = pBegin->unicode();
 		while(us && (us != '\n'))
 		{
 			pBegin++;
-			us = pBegin->tqunicode();
+			us = pBegin->unicode();
 		}
 		if(us)pBegin++;
 	
diff --git a/src/kvirc/kvs/kvi_kvs_switchlist.h b/src/kvirc/kvs/kvi_kvs_switchlist.h
index b82d93f..fc31461 100644
--- a/src/kvirc/kvs/kvi_kvs_switchlist.h
+++ b/src/kvirc/kvs/kvi_kvs_switchlist.h
@@ -48,7 +48,7 @@ public:
 
 	KviKvsVariant * find(const TQChar &c)
 	{
-		return m_pShortSwitchDict ? m_pShortSwitchDict->find(c.tqunicode()) : 0;
+		return m_pShortSwitchDict ? m_pShortSwitchDict->find(c.unicode()) : 0;
 	};
 
 	KviKvsVariant * find(unsigned short uShortKey)
diff --git a/src/kvirc/kvs/kvi_kvs_treenode_operation.cpp b/src/kvirc/kvs/kvi_kvs_treenode_operation.cpp
index 26b05b9..bdb1310 100644
--- a/src/kvirc/kvs/kvi_kvs_treenode_operation.cpp
+++ b/src/kvirc/kvs/kvi_kvs_treenode_operation.cpp
@@ -1467,18 +1467,18 @@ bool KviKvsTreeNodeOperationStringSubstitution::execute(KviKvsRunTimeContext * c
 			TQString szReplaced;
 			const TQChar * p2 = KviTQString::nullTerminatedArray(szR);
 			const TQChar * begin = p2;
-			while(p2->tqunicode())
+			while(p2->unicode())
 			{
-				if(p2->tqunicode() == '\\')
+				if(p2->unicode() == '\\')
 				{
 					p2++;
-					if(p2->tqunicode() >= '0' && p2->tqunicode() <= '9')
+					if(p2->unicode() >= '0' && p2->unicode() <= '9')
 					{
 						szReplaced.append(TQString(begin,(p2 - begin) - 1));
-						szReplaced.append(re.cap(p2->tqunicode() - '0'));
+						szReplaced.append(re.cap(p2->unicode() - '0'));
 						p2++;
 						begin = p2;
-					} else if(p2->tqunicode())p2++;
+					} else if(p2->unicode())p2++;
 				} else p2++;
 			}
 			if(begin != p2)szReplaced.append(TQString(begin,p2 - begin));
diff --git a/src/kvirc/kvs/kvi_kvs_variant.cpp b/src/kvirc/kvs/kvi_kvs_variant.cpp
index c4e457f..b2da370 100644
--- a/src/kvirc/kvs/kvi_kvs_variant.cpp
+++ b/src/kvirc/kvs/kvi_kvs_variant.cpp
@@ -1010,7 +1010,7 @@ KviKvsVariant* KviKvsVariant::unserializeNull(const TQChar** aux)
 KviKvsVariant* KviKvsVariant::unserializeRealOrInteger(const TQChar** aux)
 {
 	TQString data;
-	if((*aux)->tqunicode() == '-')
+	if((*aux)->unicode() == '-')
 	{
 		data.append('-');
 		(*aux)++;
@@ -1024,7 +1024,7 @@ KviKvsVariant* KviKvsVariant::unserializeRealOrInteger(const TQChar** aux)
 		data.append(**aux);
 		(*aux)++;
 	}
-	if((*aux)->tqunicode()=='.')
+	if((*aux)->unicode()=='.')
 	{
 		return unserializeReal(aux,data);
 	}
@@ -1042,15 +1042,15 @@ KviKvsVariant* KviKvsVariant::unserializeReal(const TQChar** aux,TQString& data)
 		(*aux)++;
 	}
 
-	if((*aux)->tqunicode() == 'e' || (*aux)->tqunicode() == 'E')
+	if((*aux)->unicode() == 'e' || (*aux)->unicode() == 'E')
 	{
 		(*aux)++;
-		if((*aux)->tqunicode() == '-')
+		if((*aux)->unicode() == '-')
 		{
 			exponent.append('-');
 			(*aux)++;
 		} else {
-			if((*aux)->tqunicode() == '+')
+			if((*aux)->unicode() == '+')
 			{
 				exponent.append('+');
 				(*aux)++;
@@ -1079,15 +1079,15 @@ KviKvsVariant* KviKvsVariant::unserializeInteger(const TQChar** aux,TQString& da
 
 	TQString exponent;
 
-	if((*aux)->tqunicode() == 'e' || (*aux)->tqunicode() == 'E')
+	if((*aux)->unicode() == 'e' || (*aux)->unicode() == 'E')
 	{
 		(*aux)++;
-		if((*aux)->tqunicode() == '-')
+		if((*aux)->unicode() == '-')
 		{
 			exponent.append('-');
 			(*aux)++;
 		} else {
-			if((*aux)->tqunicode() == '+')
+			if((*aux)->unicode() == '+')
 			{
 				exponent.append('+');
 				(*aux)++;
@@ -1122,9 +1122,9 @@ void KviKvsVariant::unserializeString(const TQChar** aux,TQString& data)
 	TQString hex; //temp var
 	//skip leading "
 	(*aux)++;
-	while((*aux)->tqunicode())
+	while((*aux)->unicode())
 	{
-		switch((*aux)->tqunicode())
+		switch((*aux)->unicode())
 		{
 		case '"':
 			//EOF
@@ -1134,7 +1134,7 @@ void KviKvsVariant::unserializeString(const TQChar** aux,TQString& data)
 		case '\\':
 			//Special
 			(*aux)++;
-			switch((*aux)->tqunicode())
+			switch((*aux)->unicode())
 			{
 			case 't':
 				data.append('\t');
@@ -1159,11 +1159,11 @@ void KviKvsVariant::unserializeString(const TQChar** aux,TQString& data)
 				//4 hexadecmical digits pending...
 				hex="";
 				(*aux)++;
-				for(int k=0;k<4 && (*aux)->tqunicode(); k++)
+				for(int k=0;k<4 && (*aux)->unicode(); k++)
 				{
 					if((*aux)->isDigit() ||
-						((*aux)->tqunicode() >='A' && (*aux)->tqunicode() <='F')|| //ABCDEF
-						((*aux)->tqunicode() >='a' && (*aux)->tqunicode() <='f')) //abcdef
+						((*aux)->unicode() >='A' && (*aux)->unicode() <='F')|| //ABCDEF
+						((*aux)->unicode() >='a' && (*aux)->unicode() <='f')) //abcdef
 					{
 						hex.append(**aux);
 						(*aux)++;
@@ -1203,7 +1203,7 @@ KviKvsVariant* KviKvsVariant::unserializeHash(const TQChar** aux)
 		while((*aux)->isSpace())
 				(*aux)++;
 		//waiting for starting of string
-		if((*aux)->tqunicode()!='\"')
+		if((*aux)->unicode()!='\"')
 		{
 			//strange characters
 			delete pHash;
@@ -1221,7 +1221,7 @@ KviKvsVariant* KviKvsVariant::unserializeHash(const TQChar** aux)
 		while((*aux)->isSpace())
 				(*aux)++;
 		//waiting for name-value delimeter
-		if((*aux)->tqunicode()!=':')
+		if((*aux)->unicode()!=':')
 		{
 			//strange characters
 			delete pHash;
@@ -1238,7 +1238,7 @@ KviKvsVariant* KviKvsVariant::unserializeHash(const TQChar** aux)
 			i++;
 			while((*aux)->isSpace())
 				(*aux)++;
-			switch((*aux)->tqunicode())
+			switch((*aux)->unicode())
 			{
 			case ',':
 				//goto next
@@ -1278,7 +1278,7 @@ KviKvsVariant* KviKvsVariant::unserializeArray(const TQChar** aux)
 			i++;
 			while((*aux)->isSpace())
 				(*aux)++;
-			switch((*aux)->tqunicode())
+			switch((*aux)->unicode())
 			{
 			case ',':
 				//goto next
@@ -1310,7 +1310,7 @@ KviKvsVariant* KviKvsVariant::unserialize(const TQChar** aux)
 	while((*aux)->isSpace())
 		(*aux)++;
 
-	switch((*aux)->tqunicode())
+	switch((*aux)->unicode())
 	{
 	case 't':
 		//true
@@ -1373,7 +1373,7 @@ KviKvsVariant* KviKvsVariant::unserialize(const TQString& data)
 	
 	pResult = unserialize(&aux);
 
-	if(aux->tqunicode())
+	if(aux->unicode())
 	{
 		//strange extra characters?
 		if(pResult) delete pResult;
diff --git a/src/kvirc/sparser/kvi_sp_ctcp.cpp b/src/kvirc/sparser/kvi_sp_ctcp.cpp
index b7150e8..3a28909 100644
--- a/src/kvirc/sparser/kvi_sp_ctcp.cpp
+++ b/src/kvirc/sparser/kvi_sp_ctcp.cpp
@@ -1808,7 +1808,7 @@ void KviServerParser::parseCtcpReplyUserinfo(KviCtcpMessage *msg)
 		if(pos>=0)
 		{
 			TQChar c = decoded[pos+7];
-			switch(c.tqunicode())
+			switch(c.unicode())
 			{
 				case 'F':
 				case 'f':
diff --git a/src/kvirc/sparser/kvi_sp_literal.cpp b/src/kvirc/sparser/kvi_sp_literal.cpp
index 18ab099..d488c8f 100644
--- a/src/kvirc/sparser/kvi_sp_literal.cpp
+++ b/src/kvirc/sparser/kvi_sp_literal.cpp
@@ -186,13 +186,13 @@ void KviServerParser::parseLiteralJoin(KviIrcMessage *msg)
 	// nick!user@host JOIN :#channel\x07[o|v]
 	const TQChar * pExt = KviTQString::nullTerminatedArray(channel);
 	char  chExtMode = 0;
-	while(pExt->tqunicode() && (pExt->tqunicode() != 0x07))pExt++;
-	if(pExt->tqunicode())
+	while(pExt->unicode() && (pExt->unicode() != 0x07))pExt++;
+	if(pExt->unicode())
 	{
 		++pExt;
-		if(pExt->tqunicode())
+		if(pExt->unicode())
 		{
-			chExtMode = (char)pExt->tqunicode();
+			chExtMode = (char)pExt->unicode();
 			channel.remove(channel.length() - 2,2); // assuming that we're at the end (we should be)
 		} // else { senseless 0x07 in channel name ?
 	}
@@ -993,7 +993,7 @@ void KviServerParser::parseLiteralPrivmsg(KviIrcMessage *msg)
 		if(!chan)
 		{
 			// check if the channel has some leading mode prefixes 
-			while((szTarget.length() > 0) && console->connection()->serverInfo()->isSupportedModePrefix(szTarget[0].tqunicode()))
+			while((szTarget.length() > 0) && console->connection()->serverInfo()->isSupportedModePrefix(szTarget[0].unicode()))
 			{
 				szPrefixes += szTarget[0];
 				szTarget.remove(0,1);
@@ -1328,7 +1328,7 @@ void KviServerParser::parseLiteralNotice(KviIrcMessage *msg)
 	if(!chan)
 	{
 		// check if the channel has some leading mode prefixes 
-		while((szTarget.length() > 0) && console->connection()->serverInfo()->isSupportedModePrefix(szTarget[0].tqunicode()))
+		while((szTarget.length() > 0) && console->connection()->serverInfo()->isSupportedModePrefix(szTarget[0].unicode()))
 		{
 			szPrefixes += szTarget[0];
 			szTarget.remove(0,1);
diff --git a/src/kvirc/ui/kvi_channel.cpp b/src/kvirc/ui/kvi_channel.cpp
index c22b36b..03ab82e 100644
--- a/src/kvirc/ui/kvi_channel.cpp
+++ b/src/kvirc/ui/kvi_channel.cpp
@@ -112,7 +112,7 @@ KviChannel::KviChannel(KviFrame * lpFrm,KviConsole * lpConsole,const char * name
 
 	// Register ourselves
 	connection()->registerChannel(this);
-	// And create the widgets tqlayout
+	// And create the widgets layout
 	// Button box
 	m_pButtonBox = new KviTalHBox(this);
 	
@@ -287,7 +287,7 @@ void KviChannel::applyOptions()
 
 	m_pModeWidget->applyOptions();
 
-	// this applies options for IrcView and Input and forces the window to retqlayout
+	// this applies options for IrcView and Input and forces the window to relayout
 	KviWindow::applyOptions();
 }
 
diff --git a/src/kvirc/ui/kvi_console.cpp b/src/kvirc/ui/kvi_console.cpp
index a4eba90..e9e560b 100644
--- a/src/kvirc/ui/kvi_console.cpp
+++ b/src/kvirc/ui/kvi_console.cpp
@@ -634,7 +634,7 @@ int KviConsole::applyHighlighting(KviWindow *wnd,int type,const TQString &nick,c
 	TQChar* aux=(TQChar*)(szStripMsg.ucs2());
 	if(aux)
 	{
-		while(aux->tqunicode())
+		while(aux->unicode())
 		{
 			if( KVI_OPTION_STRING(KviOption_stringWordSplitters).find(*aux) > -1 )
 				szSource.append(' ');
@@ -794,11 +794,11 @@ void KviConsole::outputPrivmsg(KviWindow *wnd,
 	{
 		int sum = 0;
 		int i = nick.length();
-		const TQChar * aux = nick.tqunicode();
+		const TQChar * aux = nick.unicode();
 		// FIXME: Shouldn't this be case insensitive ?
 		while(i > 0)
 		{
-			sum += aux->tqunicode();
+			sum += aux->unicode();
 			aux++;
 			i--;
 		}
@@ -815,11 +815,11 @@ void KviConsole::outputPrivmsg(KviWindow *wnd,
 			{
 				int sum = 0;
 				int i = nick.length();
-				const TQChar * aux = nick.tqunicode();
+				const TQChar * aux = nick.unicode();
 				// FIXME: Shouldn't this be case insensitive ?
 				while(i > 0)
 				{
-					sum += aux->tqunicode();
+					sum += aux->unicode();
 					aux++;
 					i--;
 				}
diff --git a/src/kvirc/ui/kvi_customtoolbar.cpp b/src/kvirc/ui/kvi_customtoolbar.cpp
index e974b94..774ba53 100644
--- a/src/kvirc/ui/kvi_customtoolbar.cpp
+++ b/src/kvirc/ui/kvi_customtoolbar.cpp
@@ -70,9 +70,9 @@ TQSize KviCustomToolBarSeparator::sizeHint() const
 #ifdef COMPILE_USE_QT4
 	TQStyleOption opt;
 	opt.initFrom(this);
-	int extent = tqstyle()->pixelMetric(TQStyle::PM_ToolBarSeparatorExtent,&opt,this);
+	int extent = style()->pixelMetric(TQStyle::PM_ToolBarSeparatorExtent,&opt,this);
 #else
-	int extent = tqstyle().pixelMetric(TQStyle::PM_DockWindowSeparatorExtent,this);
+	int extent = style().pixelMetric(TQStyle::PM_DockWindowSeparatorExtent,this);
 #endif
 	if(m_pToolBar->orientation() == Qt::Horizontal)return TQSize(extent,0);
 	else return TQSize(0,extent);
@@ -84,11 +84,11 @@ void KviCustomToolBarSeparator::paintEvent(TQPaintEvent *)
 #ifdef COMPILE_USE_QT4
 	TQStyleOption opt;
 	opt.initFrom(this);
-	tqstyle()->drawPrimitive(TQStyle::PE_Q3DockWindowSeparator,&opt,&p,this);
+	style()->drawPrimitive(TQStyle::PE_Q3DockWindowSeparator,&opt,&p,this);
 #else
 	TQStyle::SFlags flags = TQStyle::Style_Default;
 	if(m_pToolBar->orientation() == Qt::Horizontal)flags |= TQStyle::Style_Horizontal;
-	tqstyle().tqdrawPrimitive(TQStyle::PE_DockWindowSeparator,&p,rect(),colorGroup(),flags);
+	style().tqdrawPrimitive(TQStyle::PE_DockWindowSeparator,&p,rect(),colorGroup(),flags);
 #endif
 }
 
@@ -334,7 +334,7 @@ int KviCustomToolBar::dropIndexAt(const TQPoint &pnt,TQWidget * exclude,int * ex
 	// treating exclude as if it was going to be removed
 	// find also the exclude index if needed
 #ifdef COMPILE_USE_QT4
-	TQLayout * l = tqlayout();
+	TQLayout * l = layout();
 #else
 	TQBoxLayout * l = boxLayout();
 #endif
@@ -453,7 +453,7 @@ int KviCustomToolBar::dropIndexAt(const TQPoint &pnt,TQWidget * exclude,int * ex
 #ifdef COMPILE_USE_QT4
 TQWidget * KviCustomToolBar::widgetAt(int index)
 {
-	TQLayout * l = tqlayout();
+	TQLayout * l = layout();
 	if(!l)
 		return NULL;
 	TQLayoutItem * it = l->itemAt(index);
diff --git a/src/kvirc/ui/kvi_frame.cpp b/src/kvirc/ui/kvi_frame.cpp
index 49084c3..0128f29 100644
--- a/src/kvirc/ui/kvi_frame.cpp
+++ b/src/kvirc/ui/kvi_frame.cpp
@@ -173,7 +173,7 @@ KviFrame::KviFrame()
 
 	installAccelerators(this);
 
-	tqlayout()->setResizeMode(TQLayout::FreeResize);
+	layout()->setResizeMode(TQLayout::FreeResize);
 }
 
 KviFrame::~KviFrame()
diff --git a/src/kvirc/ui/kvi_input.cpp b/src/kvirc/ui/kvi_input.cpp
index 5d2e1c6..94afb59 100644
--- a/src/kvirc/ui/kvi_input.cpp
+++ b/src/kvirc/ui/kvi_input.cpp
@@ -317,7 +317,7 @@ TQSize KviInputEditor::sizeHint() const
 				     TQSize( w + m, h + m ).
 				     expandedTo(TQApplication::globalStrut()),this));
 #else
-	return (tqstyle().tqsizeFromContents(TQStyle::CT_LineEdit, this,
+	return (style().tqsizeFromContents(TQStyle::CT_LineEdit, this,
 				     TQSize( w + m, h + m ).
 				     expandedTo(TQApplication::globalStrut())));
 #endif
@@ -454,7 +454,7 @@ void KviInputEditor::drawContents(TQPainter *p)
 		{
 			pa.setPen(KVI_OPTION_COLOR(KviOption_colorInputControl));
 
-			TQString s = getSubstituteChar(m_szTextBuffer[charIdx].tqunicode());
+			TQString s = getSubstituteChar(m_szTextBuffer[charIdx].unicode());
 
 			// the block width is 4 pixels more than the actual character
 
@@ -523,9 +523,9 @@ void KviInputEditor::drawContents(TQPainter *p)
 	{
 		TQChar c = m_szTextBuffer.at(m_iBlockLen);
 #ifdef COMPILE_USE_QT4
-		m_iLastCursorXPosition+= c.tqunicode() < 32 ? fm.width(getSubstituteChar(c.tqunicode())) + 3 : fm.width(c);
+		m_iLastCursorXPosition+= c.unicode() < 32 ? fm.width(getSubstituteChar(c.unicode())) + 3 : fm.width(c);
 #else
-		m_iLastCursorXPosition+= (c.tqunicode() < 256) ? g_iInputFontCharWidth[c.tqunicode()] : fm.width(c);
+		m_iLastCursorXPosition+= (c.unicode() < 256) ? g_iInputFontCharWidth[c.unicode()] : fm.width(c);
 #endif
 		m_iBlockLen++;
 	}
@@ -626,7 +626,7 @@ void KviInputEditor::extractNextBlock(int idx,TQFontMetrics & fm,int curXPos,int
 
 	TQChar c = m_szTextBuffer[idx];
 
-	if((c.tqunicode() > 32) ||
+	if((c.unicode() > 32) ||
 		((c != TQChar(KVI_TEXT_COLOR)) &&
 		(c != TQChar(KVI_TEXT_BOLD)) && (c != TQChar(KVI_TEXT_UNDERLINE)) &&
 		(c != TQChar(KVI_TEXT_RESET)) && (c != TQChar(KVI_TEXT_REVERSE)) &&
@@ -637,7 +637,7 @@ void KviInputEditor::extractNextBlock(int idx,TQFontMetrics & fm,int curXPos,int
 		while((idx < ((int)(m_szTextBuffer.length()))) && (curXPos < maxXPos))
 		{
 			c = m_szTextBuffer[idx];
-			if((c.tqunicode() > 32) ||
+			if((c.unicode() > 32) ||
 				((c != TQChar(KVI_TEXT_COLOR)) && (c != TQChar(KVI_TEXT_BOLD)) &&
 				(c != TQChar(KVI_TEXT_UNDERLINE)) && (c != TQChar(KVI_TEXT_RESET)) &&
 				(c != TQChar(KVI_TEXT_REVERSE)) && (c != TQChar(KVI_TEXT_CRYPTESCAPE)) &&
@@ -645,9 +645,9 @@ void KviInputEditor::extractNextBlock(int idx,TQFontMetrics & fm,int curXPos,int
 			{
 				m_iBlockLen++;
 #ifdef COMPILE_USE_QT4
-				int xxx = c.tqunicode() < 32 ? fm.width(getSubstituteChar(c.tqunicode())) + 3 : fm.width(c);;
+				int xxx = c.unicode() < 32 ? fm.width(getSubstituteChar(c.unicode())) + 3 : fm.width(c);;
 #else
-				int xxx = (c.tqunicode() < 256 ? g_iInputFontCharWidth[c.tqunicode()] : fm.width(c));
+				int xxx = (c.unicode() < 256 ? g_iInputFontCharWidth[c.unicode()] : fm.width(c));
 #endif
 				m_iBlockWidth +=xxx;
 				curXPos       +=xxx;
@@ -658,9 +658,9 @@ void KviInputEditor::extractNextBlock(int idx,TQFontMetrics & fm,int curXPos,int
 	} else {
 		m_bControlBlock = true;
 		m_iBlockLen = 1;
-		m_iBlockWidth = g_iInputFontCharWidth[c.tqunicode()];
+		m_iBlockWidth = g_iInputFontCharWidth[c.unicode()];
 		//Control code
-		switch(c.tqunicode())
+		switch(c.unicode())
 		{
 			case KVI_TEXT_BOLD:
 				m_bCurBold = ! m_bCurBold;
@@ -716,7 +716,7 @@ void KviInputEditor::runUpToTheFirstVisibleChar()
 	register int idx = 0;
 	while(idx < m_iFirstVisibleChar)
 	{
-		unsigned short c = m_szTextBuffer[idx].tqunicode();
+		unsigned short c = m_szTextBuffer[idx].unicode();
 		if(c < 32)
 		{
 			switch(c)
@@ -789,7 +789,7 @@ void KviInputEditor::mousePressEvent(TQMouseEvent *e)
 		
 		TQString szClip;
 
-		TQClipboard * c = TQApplication::tqclipboard();
+		TQClipboard * c = TQApplication::clipboard();
 		if(c)
 		{
 			szClip = c->text(TQClipboard::Clipboard);
@@ -918,7 +918,7 @@ bool KviInputEditor::hasSelection()
 void KviInputEditor::copyToClipboard()
 {
 	if(!hasSelection())return;
-	TQClipboard * c = TQApplication::tqclipboard();
+	TQClipboard * c = TQApplication::clipboard();
 	if(!c)return;
 	TQString szTxt = m_szTextBuffer.mid(m_iSelectionBegin,(m_iSelectionEnd-m_iSelectionBegin)+1);
 	c->setText(szTxt,TQClipboard::Clipboard);
@@ -928,7 +928,7 @@ void KviInputEditor::copyToClipboard()
 void KviInputEditor::copyToSelection(bool bDonNotCopyToClipboard)
 {
 	if(!hasSelection())return;
-	TQClipboard * c = TQApplication::tqclipboard();
+	TQClipboard * c = TQApplication::clipboard();
 	if(!c)return;
 	TQString szTxt = m_szTextBuffer.mid(m_iSelectionBegin,(m_iSelectionEnd-m_iSelectionBegin)+1);
 	if(c->supportsSelection())
@@ -969,7 +969,7 @@ void KviInputEditor::removeSelected()
 void KviInputEditor::cut()
 {
 	if(!hasSelection())return;
-	TQClipboard * c = TQApplication::tqclipboard();
+	TQClipboard * c = TQApplication::clipboard();
 	if(!c)return;
 	c->setText(m_szTextBuffer.mid(m_iSelectionBegin,(m_iSelectionEnd-m_iSelectionBegin)+1),TQClipboard::Clipboard);
 	m_szTextBuffer.remove(m_iSelectionBegin,(m_iSelectionEnd-m_iSelectionBegin)+1);
@@ -1042,7 +1042,7 @@ int KviInputEditor::replaceSegment(int start, int length, const TQString &text)
 
 void KviInputEditor::pasteClipboardWithConfirmation()
 {
-	TQClipboard * c = TQApplication::tqclipboard();
+	TQClipboard * c = TQApplication::clipboard();
 	if(!c)return;
 	TQString szText = c->text(TQClipboard::Clipboard);
 
@@ -1057,7 +1057,7 @@ void KviInputEditor::pasteClipboardWithConfirmation()
 
 void KviInputEditor::pasteSelectionWithConfirmation()
 {
-	TQClipboard * c = TQApplication::tqclipboard();
+	TQClipboard * c = TQApplication::clipboard();
 	if(!c)return;
 	TQString szText = c->text(c->supportsSelection() ? TQClipboard::Selection : TQClipboard::Clipboard);
 
@@ -1819,7 +1819,7 @@ void KviInputEditor::completion(bool bShift)
 	bool bIsDir = false;
 	bool bIsNick = false;
 
-	unsigned short uc = word[0].tqunicode();
+	unsigned short uc = word[0].unicode();
 
 	if(uc == '/')
 	{
@@ -1845,7 +1845,7 @@ void KviInputEditor::completion(bool bShift)
 	{
 		if(m_pKviWindow)
 		{
-			if( (word.length()==1) && (m_pKviWindow->windowName()[0].tqunicode()==uc))
+			if( (word.length()==1) && (m_pKviWindow->windowName()[0].unicode()==uc))
 			{
 				match=m_pKviWindow->windowName();
 				match.append(" ");
@@ -1911,8 +1911,8 @@ void KviInputEditor::completion(bool bShift)
 				const TQChar * b2 = KviTQString::nullTerminatedArray(match) + wLen;
 				const TQChar * c1 = b1;
 				const TQChar * c2 = b2;
-				if(bIsDir)while(c1->tqunicode() && (c1->tqunicode() == c2->tqunicode()))c1++,c2++;
-				else while(c1->tqunicode() && (c1->lower().tqunicode() == c2->lower().tqunicode()))c1++,c2++;
+				if(bIsDir)while(c1->unicode() && (c1->unicode() == c2->unicode()))c1++,c2++;
+				else while(c1->unicode() && (c1->lower().unicode() == c2->lower().unicode()))c1++,c2++;
 				int len = wLen + (c1 - b1);
 				if(len < ((int)(match.length())))match.remove(len,match.length() - len);
 				if(!all.isEmpty())all.append(", ");
@@ -2084,17 +2084,17 @@ void KviInputEditor::moveRightFirstVisibleCharToShowCursor()
 	TQChar c = m_szTextBuffer.at(m_iCursorPosition);
 
 #ifdef COMPILE_USE_QT4
-	m_iLastCursorXPosition += c.tqunicode() < 32 ? fm.width(getSubstituteChar(c.tqunicode())) + 3 : fm.width(c);;
+	m_iLastCursorXPosition += c.unicode() < 32 ? fm.width(getSubstituteChar(c.unicode())) + 3 : fm.width(c);;
 #else
-	m_iLastCursorXPosition += (c.tqunicode() < 256) ? g_iInputFontCharWidth[c.tqunicode()] : fm.width(c);
+	m_iLastCursorXPosition += (c.unicode() < 256) ? g_iInputFontCharWidth[c.unicode()] : fm.width(c);
 #endif
 	while(m_iLastCursorXPosition >= contentsRect().width()-2*KVI_INPUT_MARGIN)
 	{
 		c = m_szTextBuffer.at(m_iFirstVisibleChar);
 #ifdef COMPILE_USE_QT4
-		m_iLastCursorXPosition -= c.tqunicode() < 32 ? fm.width(getSubstituteChar(c.tqunicode())) + 3 : fm.width(c);;
+		m_iLastCursorXPosition -= c.unicode() < 32 ? fm.width(getSubstituteChar(c.unicode())) + 3 : fm.width(c);;
 #else
-		m_iLastCursorXPosition -= (c.tqunicode() < 256) ? g_iInputFontCharWidth[c.tqunicode()] : fm.width(c);
+		m_iLastCursorXPosition -= (c.unicode() < 256) ? g_iInputFontCharWidth[c.unicode()] : fm.width(c);
 #endif
 		m_iFirstVisibleChar++;
 	}
@@ -2127,9 +2127,9 @@ int KviInputEditor::charIndexFromXPosition(int xPos)
 	{
 		TQChar c = m_szTextBuffer.at(curChar);
 #ifdef COMPILE_USE_QT4
-		int widthCh = c.tqunicode() < 32 ? fm.width(getSubstituteChar(c.tqunicode())) + 3 : fm.width(c);;
+		int widthCh = c.unicode() < 32 ? fm.width(getSubstituteChar(c.unicode())) + 3 : fm.width(c);;
 #else
-		int widthCh = (c.tqunicode() < 256) ? g_iInputFontCharWidth[c.tqunicode()] : fm.width(c);
+		int widthCh = (c.unicode() < 256) ? g_iInputFontCharWidth[c.unicode()] : fm.width(c);
 #endif
 		if(xPos < (curXPos+(widthCh/2)))return curChar;
 		else if(xPos < (curXPos+widthCh))return (curChar+1);
@@ -2150,9 +2150,9 @@ int  KviInputEditor::xPositionFromCharIndex(TQFontMetrics& fm,int chIdx,bool bCo
 	{
 		TQChar c = m_szTextBuffer.at(curChar);
 #ifdef COMPILE_USE_QT4
-		curXPos += c.tqunicode() < 32 ? fm.width(getSubstituteChar(c.tqunicode())) + 3 : fm.width(c);;
+		curXPos += c.unicode() < 32 ? fm.width(getSubstituteChar(c.unicode())) + 3 : fm.width(c);;
 #else
-		curXPos += (c.tqunicode() < 256) ? g_iInputFontCharWidth[c.tqunicode()] : fm.width(c);
+		curXPos += (c.unicode() < 256) ? g_iInputFontCharWidth[c.unicode()] : fm.width(c);
 #endif
 		curChar++;
 	}
@@ -2170,9 +2170,9 @@ int KviInputEditor::xPositionFromCharIndex(int chIdx,bool bContentsCoords)
 	{
 		TQChar c = m_szTextBuffer.at(curChar);
 #ifdef COMPILE_USE_QT4
-		curXPos += c.tqunicode() < 32 ? g_pLastFontMetrics->width(getSubstituteChar(c.tqunicode())) + 3 : g_pLastFontMetrics->width(c);
+		curXPos += c.unicode() < 32 ? g_pLastFontMetrics->width(getSubstituteChar(c.unicode())) + 3 : g_pLastFontMetrics->width(c);
 #else
-		curXPos += (c.tqunicode() < 256) ? g_iInputFontCharWidth[c.tqunicode()] : g_pLastFontMetrics->width(c);
+		curXPos += (c.unicode() < 256) ? g_iInputFontCharWidth[c.unicode()] : g_pLastFontMetrics->width(c);
 #endif
 		curChar++;
 	}
@@ -2336,8 +2336,8 @@ KviInput::KviInput(KviWindow *par,KviUserListView * view)
 
 #ifdef COMPILE_USE_QT4
 	m_pButtonContainer->setSizePolicy(TQSizePolicy(TQSizePolicy::Minimum,TQSizePolicy::Preferred));
-//	if(m_pButtonContainer->tqlayout())
-//		m_pButtonContainer->tqlayout()->setSizeConstraint(TQLayout::SetMinimumSize);
+//	if(m_pButtonContainer->layout())
+//		m_pButtonContainer->layout()->setSizeConstraint(TQLayout::SetMinimumSize);
 #endif
 
 	m_pHistoryButton = new KviStyledToolButton(m_pButtonContainer,"historybutton");
diff --git a/src/kvirc/ui/kvi_ircview.cpp b/src/kvirc/ui/kvi_ircview.cpp
index 9eb166c..1ddf275 100644
--- a/src/kvirc/ui/kvi_ircview.cpp
+++ b/src/kvirc/ui/kvi_ircview.cpp
@@ -243,12 +243,12 @@ void kvi_appendWCharToTQStringWithLength(TQString * qstrptr,const kvi_wchar_t *
 	kvi_wslen_t oldLen = qstrptr->length();
 	qstrptr->setLength(oldLen + len);
 	#ifdef WSTRINGCONFIG_SAFE_TO_MEMCPY_TQCHAR
-		_WSTRING_WMEMCPY(qstrptr->tqunicode() + oldLen,ptr,len);
+		_WSTRING_WMEMCPY(qstrptr->unicode() + oldLen,ptr,len);
 	#else // !WSTRINGCONFIG_SAFE_TO_MEMCPY_TQCHAR
-		TQChar * c = (qstrptr->tqunicode() + oldLen);
+		TQChar * c = (qstrptr->unicode() + oldLen);
 		while(*ptr)
 		{
-			c->tqunicode() = *ptr;
+			c->unicode() = *ptr;
 			ptr++;
 			c++;
 		}
@@ -1964,8 +1964,8 @@ const kvi_wchar_t * KviIrcView::getTextLine(int iMsgType,
 		iTextIdx = iTimeStampLength;                     // the rest of the string will begin 11 chars later
 
 		// throw away const: we WANT to set the chars :D
-		register TQChar * data_ptr_aux = (TQChar *)line_ptr->szText.tqunicode();
-		register TQChar * stamp_ptr_aux = (TQChar *)szTimestamp.tqunicode();
+		register TQChar * data_ptr_aux = (TQChar *)line_ptr->szText.unicode();
+		register TQChar * stamp_ptr_aux = (TQChar *)szTimestamp.unicode();
 		
 		for(int i=0;i<iTimeStampLength;i++)
 			*data_ptr_aux++  = *stamp_ptr_aux++;
@@ -3449,7 +3449,7 @@ no_selection_paint:
 //
 ///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
 
-#define IRCVIEW_WCHARWIDTH(__c) (((__c).tqunicode() < 0xff) ? m_iFontCharacterWidth[(__c).tqunicode()] : m_pFm->width(__c))
+#define IRCVIEW_WCHARWIDTH(__c) (((__c).unicode() < 0xff) ? m_iFontCharacterWidth[(__c).unicode()] : m_pFm->width(__c))
 
 void KviIrcView::calculateLineWraps(KviIrcViewLine *ptr,int maxWidth)
 {
@@ -3476,12 +3476,12 @@ void KviIrcView::calculateLineWraps(KviIrcViewLine *ptr,int maxWidth)
 
 	int maxBlockLen = ptr->pChunks->iTextLen; // ptr->pChunks[0].iTextLen
 
-	const TQChar * tqunicode = ptr->szText.tqunicode();
+	const TQChar * unicode = ptr->szText.unicode();
 
 	for(;;)
 	{
 		//Calculate the block_width
-		register const TQChar * p = tqunicode + ptr->pBlocks[ptr->iBlockCount].block_start;
+		register const TQChar * p = unicode + ptr->pBlocks[ptr->iBlockCount].block_start;
 		int curBlockLen   = 0;
 		int curBlockWidth = 0;
 
@@ -3546,7 +3546,7 @@ void KviIrcView::calculateLineWraps(KviIrcViewLine *ptr,int maxWidth)
 					ptr->pBlocks[ptr->iBlockCount].block_width = 0;
 					ptr->iBlockCount++;
 					ptr->pBlocks = (KviIrcViewWrappedBlock *)kvi_realloc(ptr->pBlocks,(ptr->iBlockCount + 1) * sizeof(KviIrcViewWrappedBlock));
-					ptr->pBlocks[ptr->iBlockCount].block_start = p - tqunicode;
+					ptr->pBlocks[ptr->iBlockCount].block_start = p - unicode;
 					ptr->pBlocks[ptr->iBlockCount].block_len   = 0;
 					ptr->pBlocks[ptr->iBlockCount].block_width = 0;
 					ptr->pBlocks[ptr->iBlockCount].pChunk  = &(ptr->pChunks[curAttrBlock]);
@@ -3579,7 +3579,7 @@ void KviIrcView::calculateLineWraps(KviIrcViewLine *ptr,int maxWidth)
 			maxBlockLen-=curBlockLen;
 			ptr->iBlockCount++;
 			ptr->pBlocks = (KviIrcViewWrappedBlock *)kvi_realloc(ptr->pBlocks,(ptr->iBlockCount + 1) * sizeof(KviIrcViewWrappedBlock));
-			ptr->pBlocks[ptr->iBlockCount].block_start = p - tqunicode;
+			ptr->pBlocks[ptr->iBlockCount].block_start = p - unicode;
 			ptr->pBlocks[ptr->iBlockCount].block_len   = 0;
 			ptr->pBlocks[ptr->iBlockCount].block_width = 0;
 			ptr->pBlocks[ptr->iBlockCount].pChunk  = 0;
@@ -3632,8 +3632,8 @@ bool KviIrcView::checkSelectionBlock(KviIrcViewLine * line,int left,int bottom,i
 	//
 	// Yahoo!!!!
 	//
-	const TQChar * tqunicode = line->szText.tqunicode();
-	register const TQChar * p = tqunicode + line->pBlocks[bufIndex].block_start;
+	const TQChar * unicode = line->szText.unicode();
+	register const TQChar * p = unicode + line->pBlocks[bufIndex].block_start;
 
 	int top = bottom-m_iFontLineSpacing;
 	int right  = ((line->pBlocks[bufIndex].block_width >= 0) ? \
@@ -4479,7 +4479,7 @@ void KviIrcView::mouseDoubleClickEvent(TQMouseEvent *e)
 	pParams->append(szCmd);
 	
 
-	switch(linkCmd[0].tqunicode())
+	switch(linkCmd[0].unicode())
 	{
 		case 'n':
 		{
@@ -4517,7 +4517,7 @@ void KviIrcView::mouseDoubleClickEvent(TQMouseEvent *e)
 				if(((KviChannel *)m_pKviWindow)->isMeOp())
 				{
 					TQChar plmn = linkCmd[1];
-					if((plmn.tqunicode() == '+') || (plmn.tqunicode() == '-'))
+					if((plmn.unicode() == '+') || (plmn.unicode() == '-'))
 					{
 						TQString target(m_pKviWindow->windowName());
 						target.replace("\\","\\\\");
@@ -4526,7 +4526,7 @@ void KviIrcView::mouseDoubleClickEvent(TQMouseEvent *e)
 						target.replace("$","\\$");
 						target.replace("%","\\%");
 						TQChar flag = linkCmd[2];
-						switch(flag.tqunicode())
+						switch(flag.unicode())
 						{
 							case 'o':
 							case 'v':
@@ -4669,7 +4669,7 @@ void KviIrcView::mouseRealPressEvent(TQMouseEvent *e)
 	{
 		if(!linkCmd.isEmpty())
 		{
-			switch(linkCmd[0].tqunicode())
+			switch(linkCmd[0].unicode())
 			{
 				case 'n':
 					{
@@ -4782,7 +4782,7 @@ void KviIrcView::mouseReleaseEvent(TQMouseEvent *)
 	{
 		killTimer(m_iSelectTimer);
 		m_iSelectTimer = 0;
-		TQClipboard * c = TQApplication::tqclipboard();
+		TQClipboard * c = TQApplication::clipboard();
 		if(c)
 		{
 			// copy to both!
@@ -4896,7 +4896,7 @@ void KviIrcView::doLinkToolTip(const TQRect &rct,TQString &linkCmd,TQString &lin
 	
 	TQString tip;
 
-	switch(linkCmd[0].tqunicode())
+	switch(linkCmd[0].unicode())
 	{
 		case 'u': // url link
 		{
@@ -4972,11 +4972,11 @@ void KviIrcView::doLinkToolTip(const TQRect &rct,TQString &linkCmd,TQString &lin
 				if(((KviChannel *)m_pKviWindow)->isMeOp())
 				{
 					TQChar plmn = linkCmd[1];
-					if((plmn.tqunicode() == '+') || (plmn.tqunicode() == '-'))
+					if((plmn.unicode() == '+') || (plmn.unicode() == '-'))
 					{
 						tip = __tr2qs("Double-click to set<br>");
 						TQChar flag = linkCmd[2];
-						switch(flag.tqunicode())
+						switch(flag.unicode())
 						{
 							case 'o':
 							case 'v':
diff --git a/src/kvirc/ui/kvi_ircviewprivate.h b/src/kvirc/ui/kvi_ircviewprivate.h
index 790976b..34c70c4 100644
--- a/src/kvirc/ui/kvi_ircviewprivate.h
+++ b/src/kvirc/ui/kvi_ircviewprivate.h
@@ -148,7 +148,7 @@ typedef struct _KviIrcViewWrappedBlockSelectionInfoTag
 #endif //!COMPILE_ON_WINDOWS
 
 //=========================================================================================================
-// Screen tqlayout
+// Screen layout
 //=========================================================================================================
 
 //FIRST LINE (prev_line = 0) <---m_pFirstLine
diff --git a/src/kvirc/ui/kvi_mdimanager.cpp b/src/kvirc/ui/kvi_mdimanager.cpp
index 607f699..039bf28 100644
--- a/src/kvirc/ui/kvi_mdimanager.cpp
+++ b/src/kvirc/ui/kvi_mdimanager.cpp
@@ -591,7 +591,7 @@ void KviMdiManager::enterSDIMode(KviMdiChild *lpC)
 		// This is an obscure, undocumented and internal function in QT4 TQMenuBar
 		// I won't be surprised if this disappears....
 		b->setCornerWidget(m_pSdiControls,TQt::TopRightCorner);
-		// The show below SHOULD force a re-tqlayout of the menubar..
+		// The show below SHOULD force a re-layout of the menubar..
 		// but it doesn't work when the KviFrame is still hidden (at startup)
 		// We handle this BUG in showEvent()
 		m_pSdiControls->show();
@@ -611,7 +611,7 @@ void KviMdiManager::enterSDIMode(KviMdiChild *lpC)
 void KviMdiManager::relayoutMenuButtons()
 {
 #ifdef COMPILE_USE_QT4
-	// force a re-tqlayout of the menubar in TQt4 (see the note in enterSDIMode())
+	// force a re-layout of the menubar in TQt4 (see the note in enterSDIMode())
 	// by resetting the corner widget
 	if(m_pSdiControls)
 	{
@@ -662,7 +662,7 @@ void KviMdiManager::leaveSDIMode()
 	}
 	if(m_pSdiIconButton)
 	{
-		m_pSdiIconButton->hide(); // this will force a TQMenuBar retqlayout
+		m_pSdiIconButton->hide(); // this will force a TQMenuBar relayout
 		delete m_pSdiIconButton;
 		m_pSdiIconButton = 0;
 	}
@@ -1073,7 +1073,7 @@ void KviMdiManager::tileAnodine()
 	int numVisible=getVisibleChildCount(); // count visible windows
 	if(numVisible<1)return;
 	int numCols=int(sqrt((double)numVisible)); // set columns to square root of visible count
-	// create an array to form grid tqlayout
+	// create an array to form grid layout
 	int *numRows=new int[numCols];
 	int numCurCol=0;
 	while(numCurCol<numCols)
diff --git a/src/kvirc/ui/kvi_menubar.cpp b/src/kvirc/ui/kvi_menubar.cpp
index 1c43223..ad5531e 100644
--- a/src/kvirc/ui/kvi_menubar.cpp
+++ b/src/kvirc/ui/kvi_menubar.cpp
@@ -97,7 +97,7 @@ void KviMenuBar::showEvent(TQShowEvent *e)
 {
 #ifdef COMPILE_USE_QT4
 	debug("menubar show");
-	// force a re-tqlayout of the menubar in TQt4 (see the note in enterSDIMode())
+	// force a re-layout of the menubar in TQt4 (see the note in enterSDIMode())
 	// by resetting the corner widget
 	m_pFrm->mdiManager()->relayoutMenuButtons();
 #endif
diff --git a/src/kvirc/ui/kvi_modeeditor.cpp b/src/kvirc/ui/kvi_modeeditor.cpp
index 18ce661..5c385cf 100644
--- a/src/kvirc/ui/kvi_modeeditor.cpp
+++ b/src/kvirc/ui/kvi_modeeditor.cpp
@@ -121,11 +121,11 @@ KviModeEditor::KviModeEditor(TQWidget * par,KviWindowToolPageButton* button,cons
 		TQChar ccc = szModes[0];
 		szModes.remove(0,1);
 
-		KviTQString::sprintf(tmp,"%c: %Q",ccc.tqunicode(),&(c->connection()->serverInfo()->getChannelModeDescription(ccc)));
+		KviTQString::sprintf(tmp,"%c: %Q",ccc.unicode(),&(c->connection()->serverInfo()->getChannelModeDescription(ccc)));
 		KviStyledCheckBox * cb = new KviStyledCheckBox(tmp,pBackground);
 		cb->setEnabled(isEnabled);
 		m_pCheckBoxes->append(cb);
-		cb->setChecked(m_szMode.contains((char)ccc.tqunicode()));
+		cb->setChecked(m_szMode.contains((char)ccc.unicode()));
 		i++;
 		g->addMultiCellWidget(cb,i,i,0,2);
 	}
@@ -193,11 +193,11 @@ KviModeEditor::KviModeEditor(TQWidget * par,KviWindowToolPageButton* button,cons
 		TQChar ccc = szModes[0];
 		szModes.remove(0,1);
 
-		KviTQString::sprintf(tmp,"%c: %Q",(char)ccc.tqunicode(),&(c->connection()->serverInfo()->getChannelModeDescription(ccc)));
+		KviTQString::sprintf(tmp,"%c: %Q",(char)ccc.unicode(),&(c->connection()->serverInfo()->getChannelModeDescription(ccc)));
 		KviStyledCheckBox * cb = new KviStyledCheckBox(tmp,pBackground);
 		cb->setEnabled(isEnabled);
 		m_pCheckBoxes->append(cb);
-		cb->setChecked(m_szMode.contains((char)ccc.tqunicode()));
+		cb->setChecked(m_szMode.contains((char)ccc.unicode()));
 		i++;
 		g->addMultiCellWidget(cb,i,i,0,2);
 	}
@@ -317,9 +317,9 @@ void KviModeEditor::commit()
 			TQChar ccc = sz[0];
 			if(cb->isChecked())
 			{
-				if(!m_szMode.contains((char)ccc.tqunicode()))szPlusModes.append((char)ccc.tqunicode());
+				if(!m_szMode.contains((char)ccc.unicode()))szPlusModes.append((char)ccc.unicode());
 			} else {
-				if(m_szMode.contains((char)ccc.tqunicode()))szMinusModes.append((char)ccc.tqunicode());
+				if(m_szMode.contains((char)ccc.unicode()))szMinusModes.append((char)ccc.unicode());
 			}
 		}
 	}
diff --git a/src/kvirc/ui/kvi_optionswidget.cpp b/src/kvirc/ui/kvi_optionswidget.cpp
index d0dae63..82c1a83 100644
--- a/src/kvirc/ui/kvi_optionswidget.cpp
+++ b/src/kvirc/ui/kvi_optionswidget.cpp
@@ -98,16 +98,16 @@ void KviOptionsWidget::createLayout(int rows,int cols)
 void KviOptionsWidget::createTabbedPage()
 {
 	createLayout(1,1);
-	tqlayout()->setMargin(0);
-	tqlayout()->setSpacing(0);
+	layout()->setMargin(0);
+	layout()->setSpacing(0);
 	m_pTabWidget = new TQTabWidget(this);
 	addWidgetToLayout(m_pTabWidget,0,0,0,0);
 }
 
 void KviOptionsWidget::addOptionsWidget(const TQString &szText,const TQIconSet &iconSet,KviOptionsWidget * pWidget)
 {
-	if(pWidget->tqlayout())
-		pWidget->tqlayout()->setMargin(10);
+	if(pWidget->layout())
+		pWidget->layout()->setMargin(10);
 	m_pTabWidget->addTab(pWidget,iconSet,szText);
 	m_pSelectorInterfaceList->append(pWidget);
 }
@@ -115,8 +115,8 @@ void KviOptionsWidget::addOptionsWidget(const TQString &szText,const TQIconSet &
 
 void KviOptionsWidget::addWidgetToLayout(TQWidget * w,int x1,int y1,int x2,int y2)
 {
-	if((x1 == x2) && (y1 == y2))tqlayout()->addWidget(w,y1,x1);
-	else tqlayout()->addMultiCellWidget(w,y1,y2,x1,x2);
+	if((x1 == x2) && (y1 == y2))layout()->addWidget(w,y1,x1);
+	else layout()->addMultiCellWidget(w,y1,y2,x1,x2);
 }
 
 ///////////////////////////////////////////////////////////////////////////////////////////////////
@@ -622,7 +622,7 @@ void KviOptionsWidget::addRowSpacer(int x1,int y1,int x2,int y2)
 {
 	TQWidget * w = new TQWidget(this);
 	addWidgetToLayout(w,x1,y1,x2,y2);
-	tqlayout()->setRowStretch(y1,1);
+	layout()->setRowStretch(y1,1);
 }
 
 TQLabel * KviOptionsWidget::addLabel(int x1,int y1,int x2,int y2,const TQString & text,bool bEnabled)
diff --git a/src/kvirc/ui/kvi_optionswidget.h b/src/kvirc/ui/kvi_optionswidget.h
index 5e397f1..38023fa 100644
--- a/src/kvirc/ui/kvi_optionswidget.h
+++ b/src/kvirc/ui/kvi_optionswidget.h
@@ -54,7 +54,7 @@ private:
 public:
 	void mergeResetFlag(int flag){ m_iResetFlags |= flag; };
 	void createLayout(int rows,int columns);
-	TQGridLayout * tqlayout(){ return m_pLayout; };
+	TQGridLayout * layout(){ return m_pLayout; };
 protected:
 	void commitSelectors();
 	void commitOptionsReset();
diff --git a/src/kvirc/ui/kvi_query.cpp b/src/kvirc/ui/kvi_query.cpp
index ef70a1d..0d133bd 100644
--- a/src/kvirc/ui/kvi_query.cpp
+++ b/src/kvirc/ui/kvi_query.cpp
@@ -547,7 +547,7 @@ void KviQuery::applyOptions()
 {
 	m_pUserListView->applyOptions();
 	updateLabelText();
-	// this applies options for IrcView and Input and forces the window to retqlayout
+	// this applies options for IrcView and Input and forces the window to relayout
 	KviWindow::applyOptions();
 }
 
diff --git a/src/kvirc/ui/kvi_statusbar.cpp b/src/kvirc/ui/kvi_statusbar.cpp
index 1985217..481a521 100644
--- a/src/kvirc/ui/kvi_statusbar.cpp
+++ b/src/kvirc/ui/kvi_statusbar.cpp
@@ -249,7 +249,7 @@ void KviStatusBar::recalcMinimumHeight()
 	{
 		m_iLastMinimumHeight = s;
 		setMinimumHeight(s);
-		TQLayout * l = tqlayout();
+		TQLayout * l = layout();
 		if(l)
 			if(l->inherits(TQBOXLAYOUT_OBJECT_NAME_STRING))
 				((TQBoxLayout *)l)->addStrut(s);
diff --git a/src/kvirc/ui/kvi_topicw.cpp b/src/kvirc/ui/kvi_topicw.cpp
index 63fd4e6..3267679 100644
--- a/src/kvirc/ui/kvi_topicw.cpp
+++ b/src/kvirc/ui/kvi_topicw.cpp
@@ -153,7 +153,7 @@ TQString convertToHtml(const TQString &text)
 
 	while(idx < text.length())
 	{
-		unsigned short c = text[(int)idx].tqunicode();
+		unsigned short c = text[(int)idx].unicode();
 
 		unsigned int start = idx;
 
@@ -168,7 +168,7 @@ TQString convertToHtml(const TQString &text)
 		{
 			idx++;
 			if(idx >= text.length())break;
-			else c = text[(int)idx].tqunicode();
+			else c = text[(int)idx].unicode();
 		}
 		
 		int len = idx - start;
@@ -251,7 +251,7 @@ TQString convertToHtml(const TQString &text)
 				++idx;
 
 				unsigned int icoStart = idx;
-				while((idx < text.length()) && (text[(int)idx].tqunicode() > 32))idx++;
+				while((idx < text.length()) && (text[(int)idx].unicode() > 32))idx++;
 
 				KviStr lookupString = text.mid(icoStart,idx - icoStart);
 
@@ -291,7 +291,7 @@ void KviTopicWidget::paintColoredText(TQPainter *p, TQString text,const TQColorG
 
 	while((idx < text.length()) && (curX < width))
 	{
-		unsigned short c = text[(int)idx].tqunicode();
+		unsigned short c = text[(int)idx].unicode();
 
 		unsigned int start = idx;
 
@@ -305,7 +305,7 @@ void KviTopicWidget::paintColoredText(TQPainter *p, TQString text,const TQColorG
 			)
 		{
 			idx++;
-			c = text[(int)idx].tqunicode();
+			c = text[(int)idx].unicode();
 		}
 
 		int len = idx - start;
@@ -392,7 +392,7 @@ void KviTopicWidget::paintColoredText(TQPainter *p, TQString text,const TQColorG
 				++idx;
 
 				unsigned int icoStart = idx;
-				while((idx < text.length()) && (text[(int)idx].tqunicode() > 32))idx++;
+				while((idx < text.length()) && (text[(int)idx].unicode() > 32))idx++;
 
 				KviStr lookupString = text.mid(icoStart,idx - icoStart);
 
@@ -629,7 +629,7 @@ void KviTopicWidget::contextPopupAboutToShow()
 
 void KviTopicWidget::copy()
 {
-	TQClipboard * c = TQApplication::tqclipboard();
+	TQClipboard * c = TQApplication::clipboard();
 	if(!c)return;
 	if(c->supportsSelection())c->setText(m_szTopic,TQClipboard::Selection);
 	c->setText(m_szTopic,TQClipboard::Clipboard);
diff --git a/src/kvirc/ui/kvi_userlistview.cpp b/src/kvirc/ui/kvi_userlistview.cpp
index d86b864..a66156c 100644
--- a/src/kvirc/ui/kvi_userlistview.cpp
+++ b/src/kvirc/ui/kvi_userlistview.cpp
@@ -838,7 +838,7 @@ int KviUserListView::getUserModeLevel(const TQString &szNick)
 char KviUserListView::getUserFlag(KviUserListEntry * e)
 {
 	if(!e)return 0;
-	return (char)m_pKviWindow->connection()->serverInfo()->modePrefixChar(e->m_iFlags).tqunicode();
+	return (char)m_pKviWindow->connection()->serverInfo()->modePrefixChar(e->m_iFlags).unicode();
 }
 
 void KviUserListView::prependUserFlag(const TQString &nick,TQString &buffer)
diff --git a/src/kvirc/ui/kvi_window.cpp b/src/kvirc/ui/kvi_window.cpp
index a4828bf..984fb70 100644
--- a/src/kvirc/ui/kvi_window.cpp
+++ b/src/kvirc/ui/kvi_window.cpp
@@ -1327,7 +1327,7 @@ void KviWindow::applyOptions()
 	if(m_pIrcView)m_pIrcView->applyOptions();
 	if(m_pInput)m_pInput->applyOptions();
 
-	// trick: retqlayout
+	// trick: relayout
 	resize(width() - 1,height() - 1);
 	resize(width() + 1,height() + 1);
 }
diff --git a/src/modules/editor/scripteditor.cpp b/src/modules/editor/scripteditor.cpp
index 6945cd1..9d704ec 100644
--- a/src/modules/editor/scripteditor.cpp
+++ b/src/modules/editor/scripteditor.cpp
@@ -107,11 +107,11 @@ void KviCompletionBox::updateContents(TQString buffer)
 	if(pos>0)
 	{
 		szModule=buffer.left(pos);
-		if(szModule[0].tqunicode()=='$')
+		if(szModule[0].unicode()=='$')
 			szModule.remove(0,1);
 	}
 	
-	if(pCur->tqunicode() == '$')
+	if(pCur->unicode() == '$')
 	{
 		buffer.remove(0,1);
 		if(!buffer.isEmpty())
@@ -369,13 +369,13 @@ void KviScriptEditorWidget::keyPressEvent(TQKeyEvent * e)
 				TQString szPrev=text(para-1);
 				if(!szPrev.isEmpty())
 				{
-					if(szPrev.at(szPrev.length() - 1).tqunicode() == ' ')
+					if(szPrev.at(szPrev.length() - 1).unicode() == ' ')
 						szPrev.remove(szPrev.length() - 1,1);
 					TQString szCur;
 					const TQChar * pCur = (const TQChar *)szPrev.ucs2();
 					if(pCur)
 					{
-						while(pCur->tqunicode() && pCur->isSpace()) 
+						while(pCur->unicode() && pCur->isSpace()) 
 						{
 							szCur.append(*pCur);
 							pCur++;
@@ -557,9 +557,9 @@ void KviScriptEditorWidget::slotComplete(const TQString &str)
 	bool bIsFirstWordInLine;
 	getWordBeforeCursor(buffer,index,&bIsFirstWordInLine);
 	int len=buffer.length();
-//	if (buffer[1].tqunicode() == '$') len --;
+//	if (buffer[1].unicode() == '$') len --;
 	complete.remove(0,len-1);
-	if (buffer[1].tqunicode() == '$') complete.append("(");
+	if (buffer[1].unicode() == '$') complete.append("(");
 	else complete.append(" ");
 	insert (complete);
 	completelistbox->hide();
@@ -595,19 +595,19 @@ int KviScriptSyntaxHighlighter::highlightParagraph(const TQString &text,int endS
 	const TQChar * pBegin;
 
 
-	while(c->tqunicode())
+	while(c->unicode())
 	{
 		if(bInComment)
 		{
 			pBegin = c;
-			while(c->tqunicode() && (c->tqunicode() != '*'))c++;
-			if(!c->tqunicode())
+			while(c->unicode() && (c->unicode() != '*'))c++;
+			if(!c->unicode())
 			{
 				setFormat(pBegin - pBuf,c - pBegin,g_fntNormal,g_clrComment);
 				return IN_COMMENT;
 			}
 			c++;
-			if(c->tqunicode() == '/')
+			if(c->unicode() == '/')
 			{
 				// end of the comment!
 				c++;
@@ -620,14 +620,14 @@ int KviScriptSyntaxHighlighter::highlightParagraph(const TQString &text,int endS
 
 		if(c->isSpace())
 		{
-			while(c->tqunicode() && c->isSpace())c++;
-			if(!c->tqunicode())continue;
+			while(c->unicode() && c->isSpace())c++;
+			if(!c->unicode())continue;
 		}
 
 		pBegin = c;
 
 		// this does not break the bNewCommand flag
-		if((c->tqunicode() == '{') || (c->tqunicode() == '}'))
+		if((c->unicode() == '{') || (c->unicode() == '}'))
 		{
 			c++;
 			setFormat(pBegin - pBuf,1,g_fntNormal,g_clrBracket);
@@ -639,12 +639,12 @@ int KviScriptSyntaxHighlighter::highlightParagraph(const TQString &text,int endS
 		{
 			bNewCommand = false;
 
-			if(c->tqunicode() == '#')
+			if(c->unicode() == '#')
 			{
 				if(c > pBuf)
 				{
 					const TQChar * prev = c - 1;
-					if((prev->tqunicode() == ']') || (prev->tqunicode() == '}'))
+					if((prev->unicode() == ']') || (prev->unicode() == '}'))
 					{
 						// array or hash count
 						c++;
@@ -653,19 +653,19 @@ int KviScriptSyntaxHighlighter::highlightParagraph(const TQString &text,int endS
 					}
 				}
 				// comment until the end of the line
-				while(c->tqunicode())c++;
+				while(c->unicode())c++;
 				setFormat(pBegin - pBuf,c - pBegin,g_fntNormal,g_clrComment);
 				continue;
 			}
-			if(c->tqunicode() == '/')
+			if(c->unicode() == '/')
 			{
 				c++;
-				if(c->tqunicode() == '/')
+				if(c->unicode() == '/')
 				{
-					while(c->tqunicode())c++;
+					while(c->unicode())c++;
 					setFormat(pBegin - pBuf,c - pBegin,g_fntNormal,g_clrComment);
 					continue;
-				} else if(c->tqunicode() == '*')
+				} else if(c->unicode() == '*')
 				{
 					c++;
 					setFormat(pBegin - pBuf,c - pBegin,g_fntNormal,g_clrComment);
@@ -674,13 +674,13 @@ int KviScriptSyntaxHighlighter::highlightParagraph(const TQString &text,int endS
 				}
 				c--;
 			}
-			if(c->tqunicode() && (c->isLetterOrNumber() || (c->tqunicode() == '_')))
+			if(c->unicode() && (c->isLetterOrNumber() || (c->unicode() == '_')))
 			{
 				c++;
-				while(c->tqunicode() && (c->isLetterOrNumber() || (c->tqunicode() == '.') || (c->tqunicode() == '_') || (c->tqunicode() == ':')))c++;
+				while(c->unicode() && (c->isLetterOrNumber() || (c->unicode() == '.') || (c->unicode() == '_') || (c->unicode() == ':')))c++;
 				setFormat(pBegin - pBuf,c - pBegin,g_fntNormal,g_clrKeyword);
 				// special processing for callbacks and magic commands
-				if(pBegin->tqunicode() == 'e')
+				if(pBegin->unicode() == 'e')
 				{
 					if(c - pBegin == 4)
 					{
@@ -691,7 +691,7 @@ int KviScriptSyntaxHighlighter::highlightParagraph(const TQString &text,int endS
 					}
 				}
 				else
-				if(pBegin->tqunicode() == 'f')
+				if(pBegin->unicode() == 'f')
 				{
 					if(c - pBegin == 8)
 					{
@@ -702,7 +702,7 @@ int KviScriptSyntaxHighlighter::highlightParagraph(const TQString &text,int endS
 					}
 				}
 
-				if(pBegin->tqunicode() == 'i')
+				if(pBegin->unicode() == 'i')
 				{
 					if(c - pBegin == 8)
 					{
@@ -717,28 +717,28 @@ int KviScriptSyntaxHighlighter::highlightParagraph(const TQString &text,int endS
 				continue;
 			}
 		}
-		if(c->tqunicode() == '$')
+		if(c->unicode() == '$')
 		{
 			c++;
-			if(c->tqunicode() == '$')
+			if(c->unicode() == '$')
 			{
 				c++;
 				setFormat(pBegin - pBuf,c - pBegin,g_fntNormal,g_clrKeyword);
 			} else {
-				while(c->tqunicode() && (c->isLetterOrNumber() || (c->tqunicode() == '.') || (c->tqunicode() == '_') || (c->tqunicode() == ':')))c++;
+				while(c->unicode() && (c->isLetterOrNumber() || (c->unicode() == '.') || (c->unicode() == '_') || (c->unicode() == ':')))c++;
 				setFormat(pBegin - pBuf,c - pBegin,g_fntNormal,g_clrFunction);
 			}
 			continue;
 		}
 		
-		if(c->tqunicode() == '-')
+		if(c->unicode() == '-')
 		{
 			TQChar * pTmp =(TQChar *) c;
 			c++;
-			if(c->tqunicode() == '-')	c++;
+			if(c->unicode() == '-')	c++;
 			if(c->isLetter())
 			{
-				while(c->tqunicode() && (c->isLetterOrNumber() || (c->tqunicode() == '_')))c++;
+				while(c->unicode() && (c->isLetterOrNumber() || (c->unicode() == '_')))c++;
 				setFormat(pBegin - pBuf,c - pBegin,g_fntNormal,g_clrKeyword);
 				continue;
 			} else {
@@ -746,35 +746,35 @@ int KviScriptSyntaxHighlighter::highlightParagraph(const TQString &text,int endS
 			}
 		}
 
-		if(c->tqunicode() == '%')
+		if(c->unicode() == '%')
 		{
 			c++;
-			if(c->tqunicode() && (c->isLetterOrNumber() || (c->tqunicode() == ':') || (c->tqunicode() == '_')))
+			if(c->unicode() && (c->isLetterOrNumber() || (c->unicode() == ':') || (c->unicode() == '_')))
 			{
-				while(c->tqunicode() && (c->isLetterOrNumber() || (c->tqunicode() == ':') || (c->tqunicode() == '_')))c++;
+				while(c->unicode() && (c->isLetterOrNumber() || (c->unicode() == ':') || (c->unicode() == '_')))c++;
 				setFormat(pBegin - pBuf,c - pBegin,g_fntNormal,g_clrVariable);
 				continue;
 			}
 			c--;
 		}
 
-		if(!c->tqunicode())continue;
+		if(!c->unicode())continue;
 
-		if(c->isLetterOrNumber() || c->tqunicode() == '_')
+		if(c->isLetterOrNumber() || c->unicode() == '_')
 		{
 			c++;
-			while(c->tqunicode() && c->isLetterOrNumber() || (c->tqunicode() == '_'))c++;
+			while(c->unicode() && c->isLetterOrNumber() || (c->unicode() == '_'))c++;
 			setFormat(pBegin - pBuf,c - pBegin,g_fntNormal,g_clrNormalText);
 			continue;
 		}
 
-		if(c->tqunicode() == '\\')
+		if(c->unicode() == '\\')
 		{
 			c++;
 			setFormat(pBegin - pBuf,c - pBegin,g_fntNormal,g_clrPunctuation);
 			// the next char is to be interpreted as normal text
 			pBegin = c;
-			if(c->tqunicode() && (c->tqunicode() != '\n'))
+			if(c->unicode() && (c->unicode() != '\n'))
 			{
 				c++;
 				setFormat(pBegin - pBuf,c - pBegin,g_fntNormal,g_clrNormalText);
@@ -785,13 +785,13 @@ int KviScriptSyntaxHighlighter::highlightParagraph(const TQString &text,int endS
 			return IN_LINE;
 		}
 
-		if(c->tqunicode() == '"')
+		if(c->unicode() == '"')
 		{
 			bInString = !bInString;
 			c++;
 			setFormat(pBegin - pBuf,c - pBegin,g_fntNormal,g_clrPunctuation);
 			continue;
-		} else if(c->tqunicode() == ';')
+		} else if(c->unicode() == ';')
 		{
 			if(!bInString)	bNewCommand = true; // the next will be a new command
 		}
@@ -1124,7 +1124,7 @@ KviScriptEditorReplaceDialog::KviScriptEditorReplaceDialog( TQWidget* parent, co
 	emit initFind();
 	setPaletteForegroundColor( TQColor( 0, 0, 0 ) );
 	setPaletteBackgroundColor( TQColor( 236, 233, 216 ) );
-	TQGridLayout *tqlayout = new TQGridLayout( this, 1, 1, 11, 6, "replace tqlayout"); 
+	TQGridLayout *layout = new TQGridLayout( this, 1, 1, 11, 6, "replace layout"); 
  
 	m_pFindlineedit = new TQLineEdit( this, "findlineedit" );
 #ifndef COMPILE_USE_QT4
@@ -1133,14 +1133,14 @@ KviScriptEditorReplaceDialog::KviScriptEditorReplaceDialog( TQWidget* parent, co
 	m_pFindlineedit->setFrameShadow( TQLineEdit::Sunken );
 #endif
 
-	tqlayout->addMultiCellWidget( m_pFindlineedit, 2, 2, 1, 2 );
+	layout->addMultiCellWidget( m_pFindlineedit, 2, 2, 1, 2 );
 
 	m_pReplacelineedit = new TQLineEdit( this, "replacelineedit" );
 #ifndef COMPILE_USE_QT4
 	m_pReplacelineedit->setFrameShape( TQLineEdit::LineEditPanel );
 	m_pReplacelineedit->setFrameShadow( TQLineEdit::Sunken );
 #endif
-	tqlayout->addMultiCellWidget( m_pReplacelineedit, 3, 3, 1, 2 );
+	layout->addMultiCellWidget( m_pReplacelineedit, 3, 3, 1, 2 );
 
    	m_pFindlineedit->setFocus();
 
@@ -1150,36 +1150,36 @@ KviScriptEditorReplaceDialog::KviScriptEditorReplaceDialog( TQWidget* parent, co
 	findlabel->setAutoResize(true);
 #endif
 
-	tqlayout->addWidget( findlabel, 2, 0 );
+	layout->addWidget( findlabel, 2, 0 );
 
     TQLabel *replacelabel = new TQLabel( this, "replacelabel" );
 	replacelabel->setText(tr("Replace with"));
 #ifndef COMPILE_USE_QT4
 	replacelabel->setAutoResize(true);
 #endif
-	tqlayout->addWidget( replacelabel, 3, 0 );
+	layout->addWidget( replacelabel, 3, 0 );
 
     TQPushButton *cancelbutton = new TQPushButton( this, "cancelButton" );
 	cancelbutton->setText(tr("&Cancel"));
-	tqlayout->addWidget( cancelbutton, 5, 2 );
+	layout->addWidget( cancelbutton, 5, 2 );
 
     replacebutton = new TQPushButton( this, "replacebutton" );
 	replacebutton->setText(tr("&Replace"));
 	replacebutton->setEnabled( FALSE );
-	tqlayout->addWidget( replacebutton, 5, 0 );
+	layout->addWidget( replacebutton, 5, 0 );
 
 	checkReplaceAll = new KviStyledCheckBox( this, "replaceAll" );
 	checkReplaceAll->setText(tr("&Replace in all Aliases"));
-	tqlayout->addWidget( checkReplaceAll, 4, 0 );
+	layout->addWidget( checkReplaceAll, 4, 0 );
 	
 	findNext = new TQPushButton(this, "findNext(WIP)" );	
 	findNext->setText(tr("&Findnext"));
-	tqlayout->addWidget( findNext, 2, 3 );
+	layout->addWidget( findNext, 2, 3 );
 	findNext->setEnabled(false);
 
 	replace = new TQPushButton(this, "replace" );	
 	replace->setText(tr("&Replace(WIP)"));
-	tqlayout->addWidget( replace, 3, 3 );
+	layout->addWidget( replace, 3, 3 );
 	replace->setEnabled(false);
 
 #ifndef COMPILE_USE_QT4
diff --git a/src/modules/file/libkvifile.cpp b/src/modules/file/libkvifile.cpp
index 14ddad5..009340f 100644
--- a/src/modules/file/libkvifile.cpp
+++ b/src/modules/file/libkvifile.cpp
@@ -873,7 +873,7 @@ static bool file_kvs_fnc_readLines(KviKvsModuleFunctionCall * c)
 	@switches:
 		!sw: -l | --local-8-bit
 		Causes the lines to be saved in local 8 bit character set instead
-		of the default tqunicode encoding.
+		of the default unicode encoding.
 		!sw: -a | --append
 		If the file already exists, then the lines are appended to the end
 		instead of overwriting the file.
diff --git a/src/modules/filetransferwindow/filetransferwindow.cpp b/src/modules/filetransferwindow/filetransferwindow.cpp
index 9274946..0990e17 100644
--- a/src/modules/filetransferwindow/filetransferwindow.cpp
+++ b/src/modules/filetransferwindow/filetransferwindow.cpp
@@ -580,12 +580,12 @@ void KviFileTransferWindow::copyLocalFileToClipboard()
 	TQString tmp = t->localFileName();
 	if(tmp.isEmpty())return;
 #ifdef COMPILE_USE_QT4
-	TQApplication::tqclipboard()->setText(tmp);
+	TQApplication::clipboard()->setText(tmp);
 #else
-	TQApplication::tqclipboard()->setSelectionMode(false);
-	TQApplication::tqclipboard()->setText(tmp);
-	TQApplication::tqclipboard()->setSelectionMode(true);
-	TQApplication::tqclipboard()->setText(tmp);
+	TQApplication::clipboard()->setSelectionMode(false);
+	TQApplication::clipboard()->setText(tmp);
+	TQApplication::clipboard()->setSelectionMode(true);
+	TQApplication::clipboard()->setText(tmp);
 #endif
 }
 
diff --git a/src/modules/help/helpwidget.cpp b/src/modules/help/helpwidget.cpp
index c0f7f1c..96a7edb 100644
--- a/src/modules/help/helpwidget.cpp
+++ b/src/modules/help/helpwidget.cpp
@@ -138,7 +138,7 @@ TQSize KviHelpWidget::sizeHint() const
 
 bool KviHelpWidget::eventFilter(TQObject * o, TQEvent *e)
 {
-	TQClipboard *cb = TQApplication::tqclipboard();
+	TQClipboard *cb = TQApplication::clipboard();
 	
 	if(e->type() == TQEvent::MouseButtonRelease) {
 		if(m_pTextBrowser->hasSelectedText()) {
diff --git a/src/modules/help/index.cpp b/src/modules/help/index.cpp
index 46dc4f2..d77e6fe 100755
--- a/src/modules/help/index.cpp
+++ b/src/modules/help/index.cpp
@@ -164,7 +164,7 @@ void Index::parseDocument( const TQString &filename, int docNum )
     if (text.isNull())
         return;
     bool valid = TRUE;
-    const TQChar *buf = text.tqunicode();
+    const TQChar *buf = text.unicode();
     TQChar str[64];
     TQChar c = buf[0];
     int j = 0;
@@ -727,7 +727,7 @@ bool Index::searchForPattern( const TQStringList &patterns, const TQStringList &
 
     bool valid = TRUE;
 
-    const TQChar *buf = text.tqunicode();
+    const TQChar *buf = text.unicode();
 
     TQChar str[64];
 
diff --git a/src/modules/list/listwindow.cpp b/src/modules/list/listwindow.cpp
index acc6fd1..b7bd8bc 100644
--- a/src/modules/list/listwindow.cpp
+++ b/src/modules/list/listwindow.cpp
@@ -145,7 +145,7 @@ void KviChannelListViewItem::paintCell(TQPainter * p,const TQColorGroup &cg,int
 		if ( isEnabled() || !lv )
 			p->setPen( cg.text() );
 		else if ( !isEnabled() && lv)
-			p->setPen( lv->tqpalette().disabled().text() );
+			p->setPen( lv->palette().disabled().text() );
 	}
 	
 	KviTopicWidget::paintColoredText(p,szText,cg,height(),width);
diff --git a/src/modules/logview/logviewmdiwindow.cpp b/src/modules/logview/logviewmdiwindow.cpp
index 55b3622..84a6711 100644
--- a/src/modules/logview/logviewmdiwindow.cpp
+++ b/src/modules/logview/logviewmdiwindow.cpp
@@ -90,67 +90,67 @@ KviLogViewMDIWindow::KviLogViewMDIWindow(KviModuleExtensionDescriptor * d,KviFra
 	m_pSearchTab  = new TQWidget(m_pTabWidget);
 	m_pTabWidget->insertTab(m_pSearchTab,__tr2qs_ctx("Filter","logview"));
 
-	TQGridLayout *tqlayout = new TQGridLayout(m_pSearchTab,10,2,3,5);
+	TQGridLayout *layout = new TQGridLayout(m_pSearchTab,10,2,3,5);
 	
 	m_pShowChannelsCheck = new KviStyledCheckBox(__tr2qs_ctx("Show channel logs","logview"),m_pSearchTab);
 	m_pShowChannelsCheck->setChecked(true);
-	tqlayout->addMultiCellWidget(m_pShowChannelsCheck,0,0,0,1);
+	layout->addMultiCellWidget(m_pShowChannelsCheck,0,0,0,1);
 	
 	m_pShowQueryesCheck  = new KviStyledCheckBox(__tr2qs_ctx("Show query logs","logview"),m_pSearchTab);
 	m_pShowQueryesCheck->setChecked(true);
-	tqlayout->addMultiCellWidget(m_pShowQueryesCheck,1,1,0,1);
+	layout->addMultiCellWidget(m_pShowQueryesCheck,1,1,0,1);
 	
 	m_pShowConsolesCheck = new KviStyledCheckBox(__tr2qs_ctx("Show console logs","logview"),m_pSearchTab);
 	m_pShowConsolesCheck->setChecked(true);
-	tqlayout->addMultiCellWidget(m_pShowConsolesCheck,2,2,0,1);
+	layout->addMultiCellWidget(m_pShowConsolesCheck,2,2,0,1);
 
 	m_pShowDccChatCheck  = new KviStyledCheckBox(__tr2qs_ctx("Show DCC chat logs","logview"),m_pSearchTab);
 	m_pShowDccChatCheck->setChecked(true);
-	tqlayout->addMultiCellWidget(m_pShowDccChatCheck,3,3,0,1);
+	layout->addMultiCellWidget(m_pShowDccChatCheck,3,3,0,1);
 	
 	m_pShowOtherCheck   = new KviStyledCheckBox(__tr2qs_ctx("Show other logs","logview"),m_pSearchTab);
 	m_pShowOtherCheck->setChecked(true);
-	tqlayout->addMultiCellWidget(m_pShowOtherCheck,4,4,0,1);
+	layout->addMultiCellWidget(m_pShowOtherCheck,4,4,0,1);
 	
 	TQLabel *l;
 	l = new TQLabel(__tr2qs_ctx("Contents filter","logview"),m_pSearchTab);
-	tqlayout->addMultiCellWidget(l,5,5,0,1);
+	layout->addMultiCellWidget(l,5,5,0,1);
 
 	l = new TQLabel(__tr2qs_ctx("Log name mask:","logview"),m_pSearchTab);
 	m_pFileNameMask = new TQLineEdit(m_pSearchTab);
 	connect(m_pFileNameMask,TQT_SIGNAL(returnPressed()),this,TQT_SLOT(applyFilter()));
-	tqlayout->addWidget(l,6,0);
-	tqlayout->addWidget(m_pFileNameMask,6,1);
+	layout->addWidget(l,6,0);
+	layout->addWidget(m_pFileNameMask,6,1);
 
 	l = new TQLabel(__tr2qs_ctx("Log contents mask:","logview"),m_pSearchTab);
 	m_pContentsMask = new TQLineEdit(m_pSearchTab);
 	connect(m_pContentsMask,TQT_SIGNAL(returnPressed()),this,TQT_SLOT(applyFilter()));
-	tqlayout->addWidget(l,7,0);
-	tqlayout->addWidget(m_pContentsMask,7,1);
+	layout->addWidget(l,7,0);
+	layout->addWidget(m_pContentsMask,7,1);
 
 	m_pEnableFromFilter = new KviStyledCheckBox(__tr2qs_ctx("Only older than","logview"),m_pSearchTab);
 	m_pFromDateEdit = new TQDateEdit(m_pSearchTab);
 	m_pFromDateEdit->setDate(TQDate::currentDate());
-	tqlayout->addWidget(m_pEnableFromFilter,8,0);
-	tqlayout->addWidget(m_pFromDateEdit,8,1);
+	layout->addWidget(m_pEnableFromFilter,8,0);
+	layout->addWidget(m_pFromDateEdit,8,1);
 	connect(m_pEnableFromFilter,TQT_SIGNAL(toggled(bool)),m_pFromDateEdit,TQT_SLOT(setEnabled(bool)));
 	m_pFromDateEdit->setEnabled(false);
 
 	m_pEnableToFilter = new KviStyledCheckBox(__tr2qs_ctx("Only newier than","logview"),m_pSearchTab);
 	m_pToDateEdit = new TQDateEdit(m_pSearchTab);
 	m_pToDateEdit->setDate(TQDate::currentDate());
-	tqlayout->addWidget(m_pEnableToFilter,9,0);
-	tqlayout->addWidget(m_pToDateEdit,9,1);
+	layout->addWidget(m_pEnableToFilter,9,0);
+	layout->addWidget(m_pToDateEdit,9,1);
 	connect(m_pEnableToFilter,TQT_SIGNAL(toggled(bool)),m_pToDateEdit,TQT_SLOT(setEnabled(bool)));
 	m_pToDateEdit->setEnabled(false);
 
 	TQPushButton *pb = new TQPushButton(__tr2qs_ctx("Apply filter","logview"),m_pSearchTab);
 	connect(pb,TQT_SIGNAL(clicked()),this,TQT_SLOT(applyFilter()));
-	tqlayout->addWidget(pb,10,1);
+	layout->addWidget(pb,10,1);
 
 	TQWidget *w = new TQWidget(m_pSearchTab);
 	w->setSizePolicy(TQSizePolicy::Ignored,TQSizePolicy::Ignored);
-	tqlayout->addWidget(w,11,1);
+	layout->addWidget(w,11,1);
 
 	m_pIrcView = new KviIrcView(m_pSplitter,g_pFrame,this);
 #ifdef COMPILE_USE_QT4
diff --git a/src/modules/notifier/notifierwindow.h b/src/modules/notifier/notifierwindow.h
index dfc9d6d..cbb2682 100644
--- a/src/modules/notifier/notifierwindow.h
+++ b/src/modules/notifier/notifierwindow.h
@@ -77,7 +77,7 @@ protected:
 	TQPixmap m_pixBackgroundHighlighted;
 	TQPixmap m_pixForeground;         // we paint the stuff HERE
 	
-	// Notifier graphic tqlayout
+	// Notifier graphic layout
 	TQPixmap m_pixBckgrnd;
 
 	TQImage  m_imgBuffer;             // here we merge the two images
diff --git a/src/modules/objects/class_buttongroup.cpp b/src/modules/objects/class_buttongroup.cpp
index 0a4f58a..96ecc40 100644
--- a/src/modules/objects/class_buttongroup.cpp
+++ b/src/modules/objects/class_buttongroup.cpp
@@ -48,8 +48,8 @@
 	@description:
 		This widget organizes buttons in a group.
 		It will be usually a parent for other child controls.
-		You can either use a child tqlayout to manage the children geometries
-		or use $setColumnLayout function to manage the tqlayout automatically.
+		You can either use a child layout to manage the children geometries
+		or use $setColumnLayout function to manage the layout automatically.
 		The class ineriths groupbox.
 
 	@functions:
diff --git a/src/modules/objects/class_dockwindow.cpp b/src/modules/objects/class_dockwindow.cpp
index 852db9d..c0942a6 100644
--- a/src/modules/objects/class_dockwindow.cpp
+++ b/src/modules/objects/class_dockwindow.cpp
@@ -49,11 +49,11 @@
 		[class]widget[/class]
 	@description:
 		A window dockable to the KVIrc main frame borders (like a toolbar).
-		The window has an implicit tqlayout that will automatically manage
+		The window has an implicit layout that will automatically manage
 		the children depending on the dock window's orientation.
 	@functions:
 		!fn: $addWidget(<widget:hobject>)
-			Adds <widget> to the internal tqlayout of this dock window.[br]
+			Adds <widget> to the internal layout of this dock window.[br]
 			The widget must be a child of this dock window (otherwise strange things may happen).
 		!fn: <string> $orientation()
 			Returns the string "vertical" or "horizontal" depending on the orientation of this dock window.
diff --git a/src/modules/objects/class_groupbox.cpp b/src/modules/objects/class_groupbox.cpp
index a1f5c11..7c01140 100644
--- a/src/modules/objects/class_groupbox.cpp
+++ b/src/modules/objects/class_groupbox.cpp
@@ -60,8 +60,8 @@ const int align_cod[] = {
 	@description:
 		This widget can be used to display a groupbox.
 		It will be usually a parent for other child controls.
-		You can either use a child tqlayout to manage the children geometries
-		or use $setColumnLayout to manage the tqlayout automatically.
+		You can either use a child layout to manage the children geometries
+		or use $setColumnLayout to manage the layout automatically.
 	@functions:
 		!fn: $setTitle(<text:String>)
 		Sets the group box title to <text>.
@@ -96,7 +96,7 @@ const int align_cod[] = {
 		!fn: $setOrientation<orientation:string>
 		Sets the group box's orientation. Valid values are:Qt::Horizontal,Qt::Vertical.
 		!fn: $setColumnLayout(<columns:integer>,<orientation:string>)
-		Enables the automatic tqlayout management. The children are arranged in n columns with the specified orientation.[br]
+		Enables the automatic layout management. The children are arranged in n columns with the specified orientation.[br]
 		Valid values for <orientation> are:Qt::Horizontal,Qt::Vertical.
 	@examples:
 		[example]
@@ -120,16 +120,16 @@ const int align_cod[] = {
 		%inputpass->$setechomode("password")[br]
 		[br]
 		#now lets' layouting the groupbox's element's.[br]
-		%layoutgb=$new(tqlayout,%gb)[br]
+		%layoutgb=$new(layout,%gb)[br]
 		%layoutgb->$setmargin(20)[br]
 		%layoutgb->$addwidget(%labeluser,0,0)[br]
 		%layoutgb->$addwidget(%labelpass,1,0)[br]
 		%layoutgb->$addwidget(%inputuser,0,1)[br]
 		%layoutgb->$addwidget(%inputpass,1,1)[br]
 		[br]
-		# now we create a fake widget and managing the two buttons tqlayout.[br]
+		# now we create a fake widget and managing the two buttons layout.[br]
 		%fakewidget=$new(widget,%widget)[br]
-		%layoutbtn=$new(tqlayout,%fakewidget)[br]
+		%layoutbtn=$new(layout,%fakewidget)[br]
 		%btnok=$new(button,%fakewidget)[br]
 		%btnok->$settext("OK")[br]
 		%btncancel=$new(button,%fakewidget)[br]
@@ -137,13 +137,13 @@ const int align_cod[] = {
 		%layoutbtn->$addwidget(%btnok,0,0)[br]
 		%layoutbtn->$addwidget(%btncancel,0,1)[br]
 		[br]
-		#And finally we create a main tqlayout with the groupbox (and its "children")[br]
+		#And finally we create a main layout with the groupbox (and its "children")[br]
 		#and fakewiget (with its buttons children).
-		%maintqlayout=$new(tqlayout,%widget)[br]
-		%maintqlayout->$setspacing(10)[br]
-		%maintqlayout->$setmargin(10)[br]
-		%maintqlayout->$addwidget(%gb,0,0)[br]
-		%maintqlayout->$addwidget(%fakewidget,1,0)[br]
+		%mainlayout=$new(layout,%widget)[br]
+		%mainlayout->$setspacing(10)[br]
+		%mainlayout->$setmargin(10)[br]
+		%mainlayout->$addwidget(%gb,0,0)[br]
+		%mainlayout->$addwidget(%fakewidget,1,0)[br]
 		[br]
 		#Let's show our nice login request =D ! [br]
 		%widget->$show()[br]
diff --git a/src/modules/objects/class_hbox.cpp b/src/modules/objects/class_hbox.cpp
index 0f6ae24..21167be 100644
--- a/src/modules/objects/class_hbox.cpp
+++ b/src/modules/objects/class_hbox.cpp
@@ -44,7 +44,7 @@
 		!fn: $setSpacing(<spacing:uint>)
 		Sets the default spacing of the widgets in pixels
 		!fn: $setMargin(<margin:uint>)
-		Sets the dimension of the tqlayout margin : the distance from the border to the outermost child widget edges.
+		Sets the dimension of the layout margin : the distance from the border to the outermost child widget edges.
 		!fn: $setStretchFactor(<widget:hobject>,<stretch:uint>)
 		Sets the stretch factor of widget to stretch.
 */
diff --git a/src/modules/objects/class_layout.cpp b/src/modules/objects/class_layout.cpp
index 5caac1d..7b2d252 100644
--- a/src/modules/objects/class_layout.cpp
+++ b/src/modules/objects/class_layout.cpp
@@ -40,11 +40,11 @@
 
 
 /*
-	@doc: tqlayout
+	@doc: layout
 	@keyterms:
-		tqlayout object class, child widgets
+		layout object class, child widgets
 	@title:
-		tqlayout class
+		layout class
 	@type:
 		class
 	@short:
@@ -52,25 +52,25 @@
 	@inherits:
 		[class]object[/class]
 	@description:
-		The tqlayout is a geometry management tool for child widgets.
-		You create a tqlayout , give it some widgets to manage and it will tqlayout them
+		The layout is a geometry management tool for child widgets.
+		You create a layout , give it some widgets to manage and it will layout them
 		automatically.[br]
-		The parent of the tqlayout must be the widget for which child widget geometries have to be managed.
-		A tqlayout is a grid of NxM cells in which you insert child widgets with [classfnc:tqlayout]$addWidget[/classfnc]().[br]
-		Widgets that must span multiple cells can be added to the tqlayout with [classfnc:tqlayout]$addMultiCellWidget[/classfnc]().[br]
+		The parent of the layout must be the widget for which child widget geometries have to be managed.
+		A layout is a grid of NxM cells in which you insert child widgets with [classfnc:layout]$addWidget[/classfnc]().[br]
+		Widgets that must span multiple cells can be added to the layout with [classfnc:layout]$addMultiCellWidget[/classfnc]().[br]
 	@functions:
 		!fn: $addWidget(<widget:object widget>,<row:uint>,<column:uint>)
-		Adds a widget to this tqlayout placing it at position <row>,<column> in the grid
+		Adds a widget to this layout placing it at position <row>,<column> in the grid
 		!fn: $addMultiCellWidget(<widget:object widget>,<start_row:uint>,<end_row:uint>,<start_col:uint>,<end_col:uint>)
-		Adds a widget to this tqlayout spanning multiple grid cells
+		Adds a widget to this layout spanning multiple grid cells
 		!fn: $setRowStretch(<row:uint>,<stretch:uint>)
-		Sets the stretch value for a particular row of this tqlayout. The <stretch_value>
+		Sets the stretch value for a particular row of this layout. The <stretch_value>
 		must be a positive integer. The rows with bigger stretch values will take more space
-		in the tqlayout.
+		in the layout.
 		!fn: $setColStretch(<column:uint>,<stretch:uint>)
-		Sets the stretch value for a particular column in this tqlayout. The <stretch_value>
+		Sets the stretch value for a particular column in this layout. The <stretch_value>
 		must be a positive integer. The rows with bigger stretch values will take more space
-		in the tqlayout.
+		in the layout.
 		!fn: $addRowSpacing(<row:uint>,<spacing:uint>)
 		Sets the minimum height of the specified <row> to <spacing> which must be a positive integer
 		!fn: $addColSpacing(<column:uint>,<spacing:uint>)
@@ -78,18 +78,18 @@
 		!fn: $setSpacing(<spacing:uint>)
 		Sets the default spacing of the widgets in pixels
 		!fn: $setMargin(<margin:uint>)
-		Sets the dimension of the tqlayout margin : the distance from the border to the outermost child widget edges.
+		Sets the dimension of the layout margin : the distance from the border to the outermost child widget edges.
 		!fn: $setResizeMode(<resize_mode:string>)
-		Sets the resize mode of the parent widget in relation to this tqlayout.
+		Sets the resize mode of the parent widget in relation to this layout.
 		<mode> can be one of:[br]
 		-Auto: this is the default[br]
-		-Fixed: the parent widget of this tqlayout is resized to the "sizeHint" value and it cannot be resized by the user.[br]
-		-Minimum: the minimum size of the parent widget of this tqlayout is set to minimumSize() and it cannot be smaller[br]
-		-FreeResize: the parent widget of this tqlayout is not constrained at all[br]
+		-Fixed: the parent widget of this layout is resized to the "sizeHint" value and it cannot be resized by the user.[br]
+		-Minimum: the minimum size of the parent widget of this layout is set to minimumSize() and it cannot be smaller[br]
+		-FreeResize: the parent widget of this layout is not constrained at all[br]
 */
 
 
-KVSO_BEGIN_REGISTERCLASS(KviKvsObject_layout,"tqlayout","object")
+KVSO_BEGIN_REGISTERCLASS(KviKvsObject_layout,"layout","object")
 	KVSO_REGISTER_HANDLER(KviKvsObject_layout,"addWidget", functionAddWidget)
 	KVSO_REGISTER_HANDLER(KviKvsObject_layout,"addMultiCellWidget", functionAddMultiCellWidget)
 	KVSO_REGISTER_HANDLER(KviKvsObject_layout,"setRowStretch", functionSetRowStretch)
@@ -116,7 +116,7 @@ bool KviKvsObject_layout::init(KviKvsRunTimeContext * pContext,KviKvsVariantList
 
 	if(!w)
 	{
-		pContext->warning(__tr2qs("The parent of a tqlayout must be a widget!"));
+		pContext->warning(__tr2qs("The parent of a layout must be a widget!"));
 		return false;
 	}
 	setObject(TQT_TQOBJECT(new TQGridLayout(w)));
diff --git a/src/modules/objects/class_painter.cpp b/src/modules/objects/class_painter.cpp
index 81cc3f6..0949945 100644
--- a/src/modules/objects/class_painter.cpp
+++ b/src/modules/objects/class_painter.cpp
@@ -323,7 +323,7 @@
 			}[br]
 		}[br] 
 		[br]
-		%lay=$new(tqlayout,%Hello)[br] 
+		%lay=$new(layout,%Hello)[br] 
 		%lay->$addwidget(%Btn,4,0)[br] 
 		%Hello->$setBackgroundColor("000000");[br] 
 		%Hello->$setmaximumwidth(800)[br] 
diff --git a/src/modules/objects/class_popupmenu.cpp b/src/modules/objects/class_popupmenu.cpp
index 8f1afd7..cb9c3bb 100644
--- a/src/modules/objects/class_popupmenu.cpp
+++ b/src/modules/objects/class_popupmenu.cpp
@@ -89,7 +89,7 @@
 			{[br]
 				#Geometry of the widget and setting-up of popupmenu [br]
 				$$->$setGeometry(%X,%Y,100,100)[br]
-			    $$->%lay=$new(tqlayout,$$)[br]
+			    $$->%lay=$new(layout,$$)[br]
 				#Here we generate a cicle to create our labels inside the widget.[br]
 				%i=0[br]
 				while (%i<10)[br]
diff --git a/src/modules/objects/class_process.cpp b/src/modules/objects/class_process.cpp
index 9ec6cc5..1c45ed4 100644
--- a/src/modules/objects/class_process.cpp
+++ b/src/modules/objects/class_process.cpp
@@ -82,7 +82,7 @@
 		%tt=$new(test)[br]
 		%A=$new(widget)[br]
 		%A->$setGeometry(100,100,400,300)[br]
-		%layoutA=$new(tqlayout,%A)[br]
+		%layoutA=$new(layout,%A)[br]
 		%Ainput=$new(lineedit,%A)[br]
 		#%Aoutput=$new(textedit,%A)// coming soon in the new texteditor class[br]
 		%Aoutput=$new(label,%A)[br]
diff --git a/src/modules/objects/class_tabwidget.cpp b/src/modules/objects/class_tabwidget.cpp
index fc22188..3b76821 100644
--- a/src/modules/objects/class_tabwidget.cpp
+++ b/src/modules/objects/class_tabwidget.cpp
@@ -94,7 +94,7 @@
 			%secondtab=$new(widget,%Tabwidget)
 			
 			# Now we'll create the item to put in to tab's pages.
-			%layoutfirsttab=$new(tqlayout,%firsttab)
+			%layoutfirsttab=$new(layout,%firsttab)
 			%labelbt=$new(label,%firsttab)
 			%labelbt->$settext(Botton Tab)
 			%labeltt=$new(label,%firsttab)
@@ -104,7 +104,7 @@
 			%buttontt=$new(button,%firsttab)
 			%buttontt->$settext("To &Top")
 			
-			# Now we'll give a tqlayout to all items.
+			# Now we'll give a layout to all items.
 			# This also allows to use privateimpl without making buttons global variables
 			%layoutfirsttab->$addwidget(%labelbt,0,0)
 			%layoutfirsttab->$addwidget(%labeltt,0,1)
@@ -125,7 +125,7 @@
 			}
 			
 			# We do the same work  with the second tab's page.
-			%layoutsecondtab=$new(tqlayout,%secondtab)
+			%layoutsecondtab=$new(layout,%secondtab)
 			%labelwp=$new(label,%secondtab)
 			%labelwp->$settext("Enjoy the new Class provided by")
 			%layoutsecondtab->$addwidget(%labelwp,0,0)
diff --git a/src/modules/objects/class_vbox.cpp b/src/modules/objects/class_vbox.cpp
index bfc8014..0019f00 100644
--- a/src/modules/objects/class_vbox.cpp
+++ b/src/modules/objects/class_vbox.cpp
@@ -44,7 +44,7 @@
 		!fn: $setSpacing(<spacing:int>)
 		Sets the default spacing of the widgets in pixels
 		!fn: $setMargin(<margin:int>)
-		Sets the dimension of the tqlayout margin : the distance from the border to the outermost child widget edges.
+		Sets the dimension of the layout margin : the distance from the border to the outermost child widget edges.
 		!fn: $setStretchFactor(<widget:hobject>,<stretch:uint>)
 		Sets the stretch factor of widget to stretch.
 */
diff --git a/src/modules/objects/class_widget.cpp b/src/modules/objects/class_widget.cpp
index 83d5608..644999a 100644
--- a/src/modules/objects/class_widget.cpp
+++ b/src/modules/objects/class_widget.cpp
@@ -167,19 +167,19 @@ const int widgettypes_cod[] = {
 		!fn: $setMinimumWidth(<value>)
 		Sets the minimum width of this widget to <value>.
 		The user will not be able to resize the widget to a smaller
-		value. This value is also used by the [class:tqlayout]tqlayout class[/class].
+		value. This value is also used by the [class:layout]layout class[/class].
 		!fn: $setMinimumHeight(<value>)
 		Sets the minimum height of this widget to <value>.
 		The user will not be able to resize the widget to a smaller
-		value. This value is also used by the [class:tqlayout]tqlayout class[/class].
+		value. This value is also used by the [class:layout]layout class[/class].
 		!fn: $setMaximumWidth(<value>)
 		Sets the maximum width of this widget to <value>.
 		The user will not be able to resize the widget to a bigger
-		value. This value is also used by the [class:tqlayout]tqlayout class[/class].
+		value. This value is also used by the [class:layout]layout class[/class].
 		!fn: $setMaximumHeight(<value>)
 		Sets the maximum height of this widget to <value>.
 		The user will not be able to resize the widget to a bigger
-		value. This value is also used by the [class:tqlayout]tqlayout class[/class].
+		value. This value is also used by the [class:layout]layout class[/class].
 		!fn: $move(<x_or_array>[,<y>])
 		Moves this widget to the coordinate <x> and <y> relative to its
 		parent widget (or the desktop if this widget is a toplevel one).
@@ -1616,7 +1616,7 @@ bool KviKvsObject_widget::function_addWidgetToWrappedLayout(KviKvsObjectFunction
 		c->warning(__tr2qs("Widget parameter is not a valid object"));
 		return true;
 	}
-	TQLayout *lay=widget()->tqlayout();
+	TQLayout *lay=widget()->layout();
 	if (!lay)
 	{
 		c->warning(__tr2qs("No Layout associated to the widget "));
diff --git a/src/modules/objects/class_workspace.cpp b/src/modules/objects/class_workspace.cpp
index 4809277..4f17802 100644
--- a/src/modules/objects/class_workspace.cpp
+++ b/src/modules/objects/class_workspace.cpp
@@ -110,7 +110,7 @@
 			constructor[br]
 			{[br]
 			       $$->$setGeometry(%X,%Y,100,100)[br]
-			       $$->%lay=$new(tqlayout,$$)[br]
+			       $$->%lay=$new(layout,$$)[br]
 			       %i=0[br]
 			       while (%i<10)[br]
 				{[br]
diff --git a/src/modules/options/dialog.cpp b/src/modules/options/dialog.cpp
index 4f1dedf..7eab580 100644
--- a/src/modules/options/dialog.cpp
+++ b/src/modules/options/dialog.cpp
@@ -70,7 +70,7 @@ KviGeneralOptionsFrontWidget::KviGeneralOptionsFrontWidget(TQWidget *parent,cons
 	l->setWordWrap(true);
 #endif
 	l->setAlignment(TQt::AlignTop);
-	tqlayout()->addWidget(l,0,0);
+	layout()->addWidget(l,0,0);
 }
 
 KviGeneralOptionsFrontWidget::~KviGeneralOptionsFrontWidget()
diff --git a/src/modules/options/optw_antispam.cpp b/src/modules/options/optw_antispam.cpp
index 43cc13e..770db33 100644
--- a/src/modules/options/optw_antispam.cpp
+++ b/src/modules/options/optw_antispam.cpp
@@ -47,7 +47,7 @@ KviAntispamOptionsWidget::KviAntispamOptionsWidget(TQWidget * parent)
 
 	reenableStuff(true);
 
-	tqlayout()->setRowStretch(2,1);
+	layout()->setRowStretch(2,1);
 }
 
 KviAntispamOptionsWidget::~KviAntispamOptionsWidget()
diff --git a/src/modules/options/optw_identity.cpp b/src/modules/options/optw_identity.cpp
index 57b67a4..e403dae 100644
--- a/src/modules/options/optw_identity.cpp
+++ b/src/modules/options/optw_identity.cpp
@@ -311,7 +311,7 @@ KviIdentityGeneralOptionsWidget::KviIdentityGeneralOptionsWidget(TQWidget * pare
 
 
 	createLayout(3,1);
-	tqlayout()->setMargin(10);
+	layout()->setMargin(10);
 
 	KviTalGroupBox * gbox = addGroupBox(0,0,0,0,1,Qt::Horizontal,__tr2qs_ctx("Basic Properties","options"));
 	KviTalHBox * hb = new KviTalHBox(gbox);
@@ -492,7 +492,7 @@ KviIdentityAvatarOptionsWidget::KviIdentityAvatarOptionsWidget(TQWidget * parent
 : KviOptionsWidget(parent)
 {
 	createLayout(4,1);
-	tqlayout()->setMargin(10);
+	layout()->setMargin(10);
 	
 	m_pLocalAvatar = new KviPixmap(KVI_OPTION_PIXMAP(KviOption_pixmapMyAvatar));
 
@@ -540,7 +540,7 @@ KviIdentityAvatarOptionsWidget::KviIdentityAvatarOptionsWidget(TQWidget * parent
 
 	connect(m_pChooseAvatarButton,TQT_SIGNAL(clicked()),this,TQT_SLOT(chooseAvatar()));
 
-	tqlayout()->setRowStretch(1,2);
+	layout()->setRowStretch(1,2);
 }
 
 KviIdentityAvatarOptionsWidget::~KviIdentityAvatarOptionsWidget()
@@ -678,7 +678,7 @@ KviIdentityAdvancedOptionsWidget::KviIdentityAdvancedOptionsWidget(TQWidget * pa
     
 
 	createLayout(2,1);
-	tqlayout()->setMargin(10);
+	layout()->setMargin(10);
 
 	KviTalGroupBox * gbox = addGroupBox(0,0,0,0,1,Qt::Horizontal,__tr2qs_ctx("User Mode","options"));
 	m_pISelector = addBoolSelector(gbox,__tr2qs_ctx("Invisible (+i)","options"),&m_bI);
diff --git a/src/modules/options/optw_input.cpp b/src/modules/options/optw_input.cpp
index c1ad6e8..1153365 100644
--- a/src/modules/options/optw_input.cpp
+++ b/src/modules/options/optw_input.cpp
@@ -92,7 +92,7 @@ KviInputLookOptionsWidget::KviInputLookOptionsWidget(TQWidget * parent)
 	}
 
 
-	tqlayout()->setRowStretch(7,1);
+	layout()->setRowStretch(7,1);
 }
 
 KviInputLookOptionsWidget::~KviInputLookOptionsWidget()
diff --git a/src/modules/options/optw_interfacelookglobal.cpp b/src/modules/options/optw_interfacelookglobal.cpp
index 1e2c998..e5d0cd5 100644
--- a/src/modules/options/optw_interfacelookglobal.cpp
+++ b/src/modules/options/optw_interfacelookglobal.cpp
@@ -104,13 +104,13 @@ KviThemeTransparencyOptionsWidget::KviThemeTransparencyOptionsWidget(TQWidget *
 
 	m_pGlobalBackgroundPixmapSelector = addPixmapSelector(0,6,1,6,__tr2qs_ctx("Transparency blend image:","options"),KviOption_pixmapGlobalTransparencyBackground,
 				KVI_OPTION_BOOL(KviOption_boolUseGlobalPseudoTransparency) && !KVI_OPTION_BOOL(KviOption_boolObtainGlobalBackgroundFromKde));
-	tqlayout()->setRowStretch(6,1);
+	layout()->setRowStretch(6,1);
 	connect(m_pObtainBackgroundFromKdeBoolSelector,TQT_SIGNAL(toggled(bool)),this,TQT_SLOT(enableGlobalBackgroundPixmapSelector(bool)));
 
 #else //!COMPILE_KDE_SUPPORT
 	m_pGlobalBackgroundPixmapSelector = addPixmapSelector(0,4,1,4,__tr2qs_ctx("Transparency blend image:","options"),KviOption_pixmapGlobalTransparencyBackground,
 				KVI_OPTION_BOOL(KviOption_boolUseGlobalPseudoTransparency));
-	tqlayout()->setRowStretch(4,1);
+	layout()->setRowStretch(4,1);
 #endif //!COMPILE_KDE_SUPPORT
 	connect(m_pUseTransparencyBoolSelector,TQT_SIGNAL(toggled(bool)),this,TQT_SLOT(enableGlobalBackgroundPixmapSelector(bool)));
 	connect(m_pUseTransparencyBoolSelector,TQT_SIGNAL(toggled(bool)),this,TQT_SLOT(enableUpdateKdeBackgroundBoolSelector(bool)));
@@ -177,7 +177,7 @@ KviThemeMdiAreaOptionsWidget::KviThemeMdiAreaOptionsWidget(TQWidget * parent)
 	addColorSelector(0,0,0,0,__tr2qs_ctx("Background","options"),KviOption_colorMdiBackground);
 	addPixmapSelector(0,1,0,1,__tr2qs_ctx("Background Image","options"),KviOption_pixmapMdiBackground);
 
-	tqlayout()->setRowStretch(1,1);
+	layout()->setRowStretch(1,1);
 }
 
 KviThemeMdiAreaOptionsWidget::~KviThemeMdiAreaOptionsWidget()
@@ -204,7 +204,7 @@ KviThemeToolBarAppletsOptionsWidget::KviThemeToolBarAppletsOptionsWidget(TQWidge
 
 	addPixmapSelector(0,8,0,8,__tr2qs_ctx("Background Image","options"),KviOption_pixmapIrcToolBarAppletBackground);
 
-	tqlayout()->setRowStretch(8,1);
+	layout()->setRowStretch(8,1);
 }
 
 KviThemeToolBarAppletsOptionsWidget::~KviThemeToolBarAppletsOptionsWidget()
diff --git a/src/modules/options/optw_ircview.cpp b/src/modules/options/optw_ircview.cpp
index 4bb80f5..52f7cec 100644
--- a/src/modules/options/optw_ircview.cpp
+++ b/src/modules/options/optw_ircview.cpp
@@ -98,7 +98,7 @@ KviIrcViewLookOptionsWidget::KviIrcViewLookOptionsWidget(TQWidget * parent)
 			m_pVerticalAlign->setCurrentItem(0);
 	}
 	
-	tqlayout()->setRowStretch(2,1);
+	layout()->setRowStretch(2,1);
 }
 
 KviIrcViewLookOptionsWidget::~KviIrcViewLookOptionsWidget()
diff --git a/src/modules/options/optw_mediatypes.cpp b/src/modules/options/optw_mediatypes.cpp
index b93081e..c4fb694 100644
--- a/src/modules/options/optw_mediatypes.cpp
+++ b/src/modules/options/optw_mediatypes.cpp
@@ -77,72 +77,72 @@ KviMediaTypesOptionsWidget::KviMediaTypesOptionsWidget(TQWidget * parent)
 
 	connect(m_pListView,TQT_SIGNAL(currentChanged(KviTalListViewItem *)),this,TQT_SLOT(currentItemChanged(KviTalListViewItem *)));
 
-	tqlayout()->addMultiCellWidget(m_pListView,0,0,0,2);
+	layout()->addMultiCellWidget(m_pListView,0,0,0,2);
 
 	TQLabel * l = new TQLabel(__tr2qs_ctx("Description:","options"),this);
-	tqlayout()->addWidget(l,1,0);
+	layout()->addWidget(l,1,0);
 	m_pDescription = new TQLineEdit(this);
-	tqlayout()->addMultiCellWidget(m_pDescription,1,1,1,2);
+	layout()->addMultiCellWidget(m_pDescription,1,1,1,2);
 
 	l = new TQLabel(__tr2qs_ctx("MIME type:","options"),this);
-	tqlayout()->addWidget(l,2,0);
+	layout()->addWidget(l,2,0);
 	m_pIanaType = new TQLineEdit(this);
-	tqlayout()->addMultiCellWidget(m_pIanaType,2,2,1,2);
+	layout()->addMultiCellWidget(m_pIanaType,2,2,1,2);
 
 	l = new TQLabel(__tr2qs_ctx("File pattern:","options"),this);
-	tqlayout()->addWidget(l,3,0);
+	layout()->addWidget(l,3,0);
 	m_pFileMask = new TQLineEdit(this);
-	tqlayout()->addMultiCellWidget(m_pFileMask,3,3,1,2);
+	layout()->addMultiCellWidget(m_pFileMask,3,3,1,2);
 
 	l = new TQLabel(__tr2qs_ctx("Magic bytes:","options"),this);
-	tqlayout()->addWidget(l,4,0);
+	layout()->addWidget(l,4,0);
 	m_pMagicBytes = new TQLineEdit(this);
-	tqlayout()->addMultiCellWidget(m_pMagicBytes,4,4,1,2);
+	layout()->addMultiCellWidget(m_pMagicBytes,4,4,1,2);
 
 	l = new TQLabel(__tr2qs_ctx("Save path:","options"),this);
-	tqlayout()->addWidget(l,5,0);
+	layout()->addWidget(l,5,0);
 	m_pSavePath = new TQLineEdit(this);
-	tqlayout()->addMultiCellWidget(m_pSavePath,5,5,1,2);
+	layout()->addMultiCellWidget(m_pSavePath,5,5,1,2);
 
 	l = new TQLabel(__tr2qs_ctx("Local open command:","options"),this);
-	tqlayout()->addWidget(l,6,0);
+	layout()->addWidget(l,6,0);
 	m_pCommandline = new TQLineEdit(this);
-	tqlayout()->addMultiCellWidget(m_pCommandline,6,6,1,2);
+	layout()->addMultiCellWidget(m_pCommandline,6,6,1,2);
 #ifdef COMPILE_INFO_TIPS
 	mergeTip(m_pCommandline,__tr2qs_ctx("<center>This field contains the command to execute to open a local file.<br>" \
 		"<tt>$0</tt> is used in place of the filename</center>","options"));
 #endif
 
 	l = new TQLabel(__tr2qs_ctx("Remote open command:","options"),this);
-	tqlayout()->addWidget(l,7,0);
+	layout()->addWidget(l,7,0);
 	m_pRemoteExecCommandline = new TQLineEdit(this);
-	tqlayout()->addMultiCellWidget(m_pRemoteExecCommandline,7,7,1,2);
+	layout()->addMultiCellWidget(m_pRemoteExecCommandline,7,7,1,2);
 #ifdef COMPILE_INFO_TIPS
 	mergeTip(m_pRemoteExecCommandline,__tr2qs_ctx("<center>This field contains the command to execute when automatically opening a received file.<br>" \
 		"<tt>$0</tt> is used in place of the filename</center>","options"));
 #endif
 
 	l = new TQLabel(__tr2qs_ctx("Icon","options"),this);
-	tqlayout()->addWidget(l,8,0);
+	layout()->addWidget(l,8,0);
 	m_pIcon = new TQLineEdit(this);
-	tqlayout()->addMultiCellWidget(m_pIcon,8,8,1,2);
+	layout()->addMultiCellWidget(m_pIcon,8,8,1,2);
 
 	TQFrame * f = new TQFrame(this);
 	f->setFrameStyle(TQFrame::Sunken | TQFrame::HLine);
-	tqlayout()->addMultiCellWidget(f,9,9,0,2);
+	layout()->addMultiCellWidget(f,9,9,0,2);
 
 	TQPushButton * b = new TQPushButton(__tr2qs_ctx("&New","options"),this);
 	connect(b,TQT_SIGNAL(clicked()),this,TQT_SLOT(newMediaType()));
-	tqlayout()->addWidget(b,10,1);
+	layout()->addWidget(b,10,1);
 
 	m_pDelete = new TQPushButton(__tr2qs_ctx("Re&move","options"),this);
 	connect(m_pDelete,TQT_SIGNAL(clicked()),this,TQT_SLOT(delMediaType()));
-	tqlayout()->addWidget(m_pDelete,10,2);
+	layout()->addWidget(m_pDelete,10,2);
 	
 
-	tqlayout()->setColStretch(1,1);
-	tqlayout()->setColStretch(2,1);
-	tqlayout()->setRowStretch(0,1);
+	layout()->setColStretch(1,1);
+	layout()->setColStretch(2,1);
+	layout()->setRowStretch(0,1);
 
 	m_pLastItem = 0;
 
diff --git a/src/modules/options/optw_messages.cpp b/src/modules/options/optw_messages.cpp
index 568499a..0a8e70b 100644
--- a/src/modules/options/optw_messages.cpp
+++ b/src/modules/options/optw_messages.cpp
@@ -186,7 +186,7 @@ KviStandardColorsOptionsWidget::KviStandardColorsOptionsWidget(TQWidget * parent
 
 	addRowSpacer(0,4,3,4);
 	
-	tqlayout()->setRowStretch(4,1);
+	layout()->setRowStretch(4,1);
 }
 
 KviStandardColorsOptionsWidget::~KviStandardColorsOptionsWidget()
@@ -464,8 +464,8 @@ KviMessageColorsOptionsWidget::KviMessageColorsOptionsWidget(TQWidget * parent)
 		it = new KviMessageListViewItem(m_pListView,i);
 	}
 
-	tqlayout()->setRowStretch(0,1);
-	tqlayout()->setColStretch(0,1);
+	layout()->setRowStretch(0,1);
+	layout()->setColStretch(0,1);
 
 	connect(m_pListView,TQT_SIGNAL(selectionChanged(KviTalListViewItem *)),this,TQT_SLOT(itemChanged(KviTalListViewItem *)));
 	connect(m_pForeListBox,TQT_SIGNAL(selectionChanged(KviTalListBoxItem *)),this,TQT_SLOT(colorChanged(KviTalListBoxItem *)));
diff --git a/src/modules/options/optw_nickserv.cpp b/src/modules/options/optw_nickserv.cpp
index 19a7683..612627f 100644
--- a/src/modules/options/optw_nickserv.cpp
+++ b/src/modules/options/optw_nickserv.cpp
@@ -236,7 +236,7 @@ KviNickServOptionsWidget::KviNickServOptionsWidget(TQWidget * parent)
 {
 	createLayout(3,3);
 	
-	TQGridLayout * gl = tqlayout();
+	TQGridLayout * gl = layout();
 
 	KviNickServRuleSet * rs = g_pNickServRuleSet;
 	bool bNickServEnabled = rs ? (rs->isEnabled() && !rs->isEmpty()) : false;
diff --git a/src/modules/options/optw_proxy.cpp b/src/modules/options/optw_proxy.cpp
index f5db325..aa9ceda 100644
--- a/src/modules/options/optw_proxy.cpp
+++ b/src/modules/options/optw_proxy.cpp
@@ -104,7 +104,7 @@ KviProxyOptionsWidget::KviProxyOptionsWidget(TQWidget * parent)
 
 
 	KviTalGroupBox * gbox = addGroupBox(0,2,1,2,2,Qt::Horizontal,__tr2qs_ctx("Configuration","options"),this);
-	//TQGridLayout * gl = new TQGridLayout(gbox->tqlayout());
+	//TQGridLayout * gl = new TQGridLayout(gbox->layout());
 	//gl->setMargin(2);
 	//gl->setSpacing(4);
 
@@ -147,8 +147,8 @@ KviProxyOptionsWidget::KviProxyOptionsWidget(TQWidget * parent)
 
 	fillProxyList();
 
-	tqlayout()->setRowStretch(0,1);
-	tqlayout()->setColStretch(0,1);
+	layout()->setRowStretch(0,1);
+	layout()->setColStretch(0,1);
 
 	m_pContextPopup = new KviTalPopupMenu(this);
 
diff --git a/src/modules/options/optw_servers.cpp b/src/modules/options/optw_servers.cpp
index 2c26ac5..3706f10 100644
--- a/src/modules/options/optw_servers.cpp
+++ b/src/modules/options/optw_servers.cpp
@@ -1192,10 +1192,10 @@ KviServerOptionsWidget::KviServerOptionsWidget(TQWidget * parent)
 
 	fillServerList();
 
-	tqlayout()->setRowStretch(0,1);
-	//tqlayout()->setColStretch(1,5);
-	//tqlayout()->setColStretch(2,2);
-	tqlayout()->setColStretch(0,1);
+	layout()->setRowStretch(0,1);
+	//layout()->setColStretch(1,5);
+	//layout()->setColStretch(2,2);
+	layout()->setColStretch(0,1);
 	setMinimumWidth(320);
 }
 
diff --git a/src/modules/options/optw_taskbar.cpp b/src/modules/options/optw_taskbar.cpp
index 201766c..0c85ea7 100644
--- a/src/modules/options/optw_taskbar.cpp
+++ b/src/modules/options/optw_taskbar.cpp
@@ -161,7 +161,7 @@ KviTreeTaskBarBackgroundOptionsWidget::KviTreeTaskBarBackgroundOptionsWidget(TQW
 			m_pVerticalAlign->setCurrentItem(0);
 	}
 
-	tqlayout()->setRowStretch(1,1);
+	layout()->setRowStretch(1,1);
 }
 
 
diff --git a/src/modules/options/optw_texticons.cpp b/src/modules/options/optw_texticons.cpp
index 7f86182..bbd2290 100644
--- a/src/modules/options/optw_texticons.cpp
+++ b/src/modules/options/optw_texticons.cpp
@@ -160,14 +160,14 @@ KviTextIconsOptionsWidget::KviTextIconsOptionsWidget(TQWidget * parent)
 		++it;
 	}
 
-	tqlayout()->addMultiCellWidget(m_pTable,0,0,0,1);
+	layout()->addMultiCellWidget(m_pTable,0,0,0,1);
 
 	m_pAdd = new TQPushButton(__tr2qs_ctx("Add","options"),this);
-	tqlayout()->addWidget(m_pAdd,1,0);
+	layout()->addWidget(m_pAdd,1,0);
 	connect(m_pAdd,TQT_SIGNAL(clicked()),this,TQT_SLOT(addClicked()));
 
 	m_pDel = new TQPushButton(__tr2qs_ctx("Delete","options"),this);
-	tqlayout()->addWidget(m_pDel,1,1);
+	layout()->addWidget(m_pDel,1,1);
 	connect(m_pDel,TQT_SIGNAL(clicked()),this,TQT_SLOT(delClicked()));
 
 	m_pDel->setEnabled(false);
diff --git a/src/modules/options/optw_topiclabel.cpp b/src/modules/options/optw_topiclabel.cpp
index ec076da..904eeae 100644
--- a/src/modules/options/optw_topiclabel.cpp
+++ b/src/modules/options/optw_topiclabel.cpp
@@ -33,7 +33,7 @@ KviTopicLabelLookOptionsWidget::KviTopicLabelLookOptionsWidget(TQWidget *p):KviO
 	addColorSelector(0, 2, 0, 2, __tr2qs_ctx("Background color","options"), KviOption_colorLabelBackground);
 	addPixmapSelector(0, 3, 0, 3, __tr2qs_ctx("Background image","options"), KviOption_pixmapLabelBackground);
 	
-	tqlayout()->setRowStretch(3, 1);
+	layout()->setRowStretch(3, 1);
 }
 
 KviTopicLabelLookOptionsWidget::~KviTopicLabelLookOptionsWidget()
diff --git a/src/modules/options/optw_userlist.cpp b/src/modules/options/optw_userlist.cpp
index 9785cf2..595db91 100644
--- a/src/modules/options/optw_userlist.cpp
+++ b/src/modules/options/optw_userlist.cpp
@@ -178,8 +178,8 @@ KviUserListLookBackgroundOptionsWidget::KviUserListLookBackgroundOptionsWidget(T
 
 
 
-	//tqlayout()->setColStretch(0,1);
-	tqlayout()->setRowStretch(1,1);
+	//layout()->setColStretch(0,1);
+	layout()->setRowStretch(1,1);
 }
 
 KviUserListLookBackgroundOptionsWidget::~KviUserListLookBackgroundOptionsWidget()
diff --git a/src/modules/reguser/edituser.cpp b/src/modules/reguser/edituser.cpp
index 9fb7f61..115cf4b 100644
--- a/src/modules/reguser/edituser.cpp
+++ b/src/modules/reguser/edituser.cpp
@@ -460,25 +460,25 @@ KviRegisteredUserEntryDialog::KviRegisteredUserEntryDialog(TQWidget *p,KviRegist
 	TQGroupBox * gb = new TQGroupBox(__tr2qs("Ignore features"),vb);
 	connect(m_pIgnoreEnabled,TQT_SIGNAL(toggled(bool)),gb,TQT_SLOT(setEnabled(bool)));
 	
-	TQVBoxLayout * tqlayout = new TQVBoxLayout(gb,20,3);
+	TQVBoxLayout * layout = new TQVBoxLayout(gb,20,3);
 	
 	m_pIgnoreQuery = new KviStyledCheckBox(__tr2qs("Ignore query-messages"),gb);
-	tqlayout->addWidget(m_pIgnoreQuery);
+	layout->addWidget(m_pIgnoreQuery);
 
 	m_pIgnoreChannel = new KviStyledCheckBox(__tr2qs("Ignore channel-messages"),gb);
-	tqlayout->addWidget(m_pIgnoreChannel);
+	layout->addWidget(m_pIgnoreChannel);
 
 	m_pIgnoreNotice = new KviStyledCheckBox(__tr2qs("Ignore notice-messages"),gb);
-	tqlayout->addWidget(m_pIgnoreNotice);
+	layout->addWidget(m_pIgnoreNotice);
 
 	m_pIgnoreCtcp = new KviStyledCheckBox(__tr2qs("Ignore ctcp-messages"),gb);
-	tqlayout->addWidget(m_pIgnoreCtcp);
+	layout->addWidget(m_pIgnoreCtcp);
 
 	m_pIgnoreInvite = new KviStyledCheckBox(__tr2qs("Ignore invites"),gb);
-	tqlayout->addWidget(m_pIgnoreInvite);
+	layout->addWidget(m_pIgnoreInvite);
 
 	m_pIgnoreDcc = new KviStyledCheckBox(__tr2qs("Ignore DCCs"),gb);
-	tqlayout->addWidget(m_pIgnoreDcc);
+	layout->addWidget(m_pIgnoreDcc);
 
 	TQWidget *w = new TQWidget(vb);
 	w->setSizePolicy(TQSizePolicy::Ignored,TQSizePolicy::Ignored);
diff --git a/src/modules/sharedfileswindow/sharedfileswindow.cpp b/src/modules/sharedfileswindow/sharedfileswindow.cpp
index 11e320d..d4e59cb 100644
--- a/src/modules/sharedfileswindow/sharedfileswindow.cpp
+++ b/src/modules/sharedfileswindow/sharedfileswindow.cpp
@@ -592,10 +592,10 @@ void KviSharedFilesWindow::copyLocalFileToClipboard()
 	if(!t)return;
 	TQString tmp = t->localFileName();
 	if(tmp.isEmpty())return;
-	TQApplication::tqclipboard()->setSelectionMode(false);
-	TQApplication::tqclipboard()->setText(tmp);
-	TQApplication::tqclipboard()->setSelectionMode(true);
-	TQApplication::tqclipboard()->setText(tmp);
+	TQApplication::clipboard()->setSelectionMode(false);
+	TQApplication::clipboard()->setText(tmp);
+	TQApplication::clipboard()->setSelectionMode(true);
+	TQApplication::clipboard()->setText(tmp);
 }
 
 void KviSharedFilesWindow::openLocalFileFolder()
diff --git a/src/modules/str/libkvistr.cpp b/src/modules/str/libkvistr.cpp
index de2236c..b7ea2e7 100644
--- a/src/modules/str/libkvistr.cpp
+++ b/src/modules/str/libkvistr.cpp
@@ -102,7 +102,7 @@ static bool str_kvs_fnc_fromclipboard(KviKvsModuleFunctionCall * c)
 	TQString szString;
 	KVSM_PARAMETERS_BEGIN(c)
 	KVSM_PARAMETERS_END(c)
-	TQClipboard *cb = TQApplication::tqclipboard();
+	TQClipboard *cb = TQApplication::clipboard();
         szString = cb->text(TQClipboard::Clipboard);
 	c->returnValue()->setString(szString);
 	return true;
@@ -132,7 +132,7 @@ static bool str_kvs_cmd_toClipboard(KviKvsModuleCommandCall * c)
 	KVSM_PARAMETERS_BEGIN(c)
 		KVSM_PARAMETER("value",KVS_PT_STRING,KVS_PF_OPTIONAL,szValue)
 	KVSM_PARAMETERS_END(c)
-	TQClipboard *cb = TQApplication::tqclipboard();
+	TQClipboard *cb = TQApplication::clipboard();
 	cb->setText(szValue, TQClipboard::Clipboard );
 	return true;
 }
@@ -1360,17 +1360,17 @@ static bool str_kvs_fnc_word(KviKvsModuleFunctionCall * c)
 	int len = szString.length();
 	while (idx<len)
 	{
-		TQChar szTmp = szString[idx].tqunicode();
+		TQChar szTmp = szString[idx].unicode();
 		while (szTmp.isSpace())
 		{
 			idx++;
-			 szTmp = szString[idx].tqunicode();
+			 szTmp = szString[idx].unicode();
 		}
 		begin = idx;
 		while (idx<len && !szTmp.isSpace())
 		{
 			idx++;
-			szTmp = szString[idx].tqunicode();
+			szTmp = szString[idx].unicode();
 		}
 		if (iOccurence == (kvs_int_t)cnt)
 		{
@@ -1433,18 +1433,18 @@ static bool str_kvs_fnc_token(KviKvsModuleFunctionCall * c)
 	int len = szString.length();
 	while (idx<len)
 	{
-		TQChar szTmp = szString[idx].tqunicode();
+		TQChar szTmp = szString[idx].unicode();
 //		while (szTmp==sep)
 		while (sep.contains(szTmp))
 		{
 			idx++;
-			 szTmp = szString[idx].tqunicode();
+			 szTmp = szString[idx].unicode();
 		}
 		begin = idx;
 		while (idx<len && !sep.contains(szTmp))
 		{
 			idx++;
-			szTmp = szString[idx].tqunicode();
+			szTmp = szString[idx].unicode();
 		}
 		if (n == cnt)
 		{
@@ -1489,13 +1489,13 @@ static bool str_kvs_fnc_charsum(KviKvsModuleFunctionCall * c)
 	{
 		while(idx < len)
 		{
-			sum += szString[idx].lower().tqunicode();
+			sum += szString[idx].lower().unicode();
 			idx++;
 		}
 	} else {
 		while(idx < len)
 		{
-			sum += szString[idx].tqunicode();
+			sum += szString[idx].unicode();
 			idx++;
 		}
 	}
@@ -1963,7 +1963,7 @@ static bool str_kvs_fnc_printf(KviKvsModuleFunctionCall * c)
 	if(fmt)
 	{
 		TQChar * buffer = (TQChar *)kvi_malloc(sizeof(TQChar) * allocsize);
-		//TQChar * p = (TQChar *)s.tqunicode();
+		//TQChar * p = (TQChar *)s.unicode();
 	
 		//9999999999999999999999999999999\0
 		char numberBuffer[1024];
@@ -1993,12 +1993,12 @@ static bool str_kvs_fnc_printf(KviKvsModuleFunctionCall * c)
 	
 		pVar = vArgs.first();
 
-		for(; fmt->tqunicode() ; ++fmt)
+		for(; fmt->unicode() ; ++fmt)
 		{
 			if(reallen == allocsize)INCREMENT_MEM
 	
 			//copy up to a '?'
-			if(fmt->tqunicode() != '?')
+			if(fmt->unicode() != '?')
 			{
 				*p++ = *fmt;
 				reallen++;
@@ -2006,7 +2006,7 @@ static bool str_kvs_fnc_printf(KviKvsModuleFunctionCall * c)
 			}
 	
 			++fmt; //skip this '?'
-			switch(fmt->tqunicode())
+			switch(fmt->unicode())
 			{
 				case 's':
 				{
@@ -2015,7 +2015,7 @@ static bool str_kvs_fnc_printf(KviKvsModuleFunctionCall * c)
 					if(sz.isEmpty())continue;
 					int len = sz.length();
 					if((allocsize - reallen) < len)INCREMENT_MEM_BY(len)
-					const TQChar * ch = sz.tqunicode();
+					const TQChar * ch = sz.unicode();
 					while(len--)*p++ = *ch++;
 					reallen += sz.length();
 					pVar = vArgs.next();
@@ -2149,7 +2149,7 @@ static bool str_kvs_fnc_printf(KviKvsModuleFunctionCall * c)
 				}
 				case '?':
 				{
-					if(fmt->tqunicode())
+					if(fmt->unicode())
 					{
 						if(reallen == allocsize)INCREMENT_MEM
 						*p++ = *fmt;
@@ -2171,15 +2171,15 @@ static bool str_kvs_fnc_printf(KviKvsModuleFunctionCall * c)
 	
 					int idx = 2;
 					
-					while((fmt->tqunicode() >= '0') && (fmt->tqunicode() <= '9') && (idx < 6))
+					while((fmt->unicode() >= '0') && (fmt->unicode() <= '9') && (idx < 6))
 					{
 						uPrecision *= 10;
-						fmtbuffer[idx] = fmt->tqunicode();
+						fmtbuffer[idx] = fmt->unicode();
 						uPrecision += fmtbuffer[idx] - '0';
 						fmt++;
 						idx++;
 					}
-					fmtbuffer[idx] = fmt->tqunicode();
+					fmtbuffer[idx] = fmt->unicode();
 					fmtbuffer[idx+1] = 0;
 	
 					if(pVar)
@@ -2193,7 +2193,7 @@ static bool str_kvs_fnc_printf(KviKvsModuleFunctionCall * c)
 						c->warning(__tr2qs("Missing argument for a floating point escape sequence, 0.0 assumed"));
 						argRValue = 0;
 					}
-					switch(fmt->tqunicode())
+					switch(fmt->unicode())
 					{
 						case 'e':
 						case 'E':
@@ -2212,7 +2212,7 @@ static bool str_kvs_fnc_printf(KviKvsModuleFunctionCall * c)
 							fmt = save;
 							*p++ = '?';  //write it
 							reallen++;
-							if(fmt->tqunicode())
+							if(fmt->unicode())
 							{
 								if(reallen == allocsize)INCREMENT_MEM
 								*p++ = *fmt;
@@ -2228,7 +2228,7 @@ static bool str_kvs_fnc_printf(KviKvsModuleFunctionCall * c)
 				{
 					*p++ = '?';  //write it
 					reallen++;
-					if(fmt->tqunicode())
+					if(fmt->unicode())
 					{
 						if(reallen == allocsize)INCREMENT_MEM
 						*p++ = *fmt;
diff --git a/src/modules/system/libkvisystem.cpp b/src/modules/system/libkvisystem.cpp
index df68402..879a2ae 100644
--- a/src/modules/system/libkvisystem.cpp
+++ b/src/modules/system/libkvisystem.cpp
@@ -240,7 +240,7 @@ static bool system_kvs_fnc_getenv(KviKvsModuleFunctionCall *c)
 
 static bool system_kvs_fnc_clipboard(KviKvsModuleFunctionCall *c)
 {
-	c->returnValue()->setString(g_pApp->tqclipboard()->text(TQClipboard::Clipboard));
+	c->returnValue()->setString(g_pApp->clipboard()->text(TQClipboard::Clipboard));
 	return true;
 }
 
@@ -275,7 +275,7 @@ static bool system_kvs_cmd_setClipboard(KviKvsModuleCommandCall * c)
 	KVSM_PARAMETERS_BEGIN(c)
 		KVSM_PARAMETER("data",KVS_PT_STRING,KVS_PF_OPTIONAL,szValue)
 	KVSM_PARAMETERS_END(c)
-	g_pApp->tqclipboard()->setText(szValue,TQClipboard::Clipboard);
+	g_pApp->clipboard()->setText(szValue,TQClipboard::Clipboard);
 	return true;
 }
 
@@ -307,7 +307,7 @@ static bool system_kvs_cmd_setSelection(KviKvsModuleCommandCall * c)
 	KVSM_PARAMETERS_BEGIN(c)
 		KVSM_PARAMETER("data",KVS_PT_STRING,KVS_PF_OPTIONAL,szValue)
 	KVSM_PARAMETERS_END(c)
-	g_pApp->tqclipboard()->setText(szValue,TQClipboard::Selection);
+	g_pApp->clipboard()->setText(szValue,TQClipboard::Selection);
 	return true;
 }
 
@@ -337,7 +337,7 @@ static bool system_kvs_cmd_setSelection(KviKvsModuleCommandCall * c)
 
 static bool system_kvs_fnc_selection(KviKvsModuleFunctionCall *c)
 {
-	c->returnValue()->setString(g_pApp->tqclipboard()->text(TQClipboard::Selection));
+	c->returnValue()->setString(g_pApp->clipboard()->text(TQClipboard::Selection));
 	return true;
 }
 
