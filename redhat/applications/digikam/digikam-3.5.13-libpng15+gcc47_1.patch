diff -uNrb digikam.orig/digikam/digikam/albummanager.cpp digikam/digikam/digikam/albummanager.cpp
--- digikam.orig/digikam/digikam/albummanager.cpp	2012-02-21 18:52:03.000000000 -0600
+++ digikam/digikam/digikam/albummanager.cpp	2012-04-19 16:42:29.951033101 -0500
@@ -1579,16 +1579,16 @@
 
         // Check if Year Album already exist.
         DAlbum *yAlbum = 0;
-        AlbumIterator it(d->rootDAlbum);
-        while (it.current())
+        AlbumIterator it2(d->rootDAlbum);
+        while (it2.current())
         {
-            DAlbum* a = (DAlbum*)(*it);
+            DAlbum* a = (DAlbum*)(*it2);
             if (a->date() == TQDate(year, 1, 1) && a->range() == DAlbum::Year)
             {
                 yAlbum = a;
                 break;
             }
-            ++it;
+            ++it2;
         }
 
         // If no, create Year album.
diff -uNrb digikam.orig/digikam/kioslave/digikamthumbnail.cpp digikam/digikam/kioslave/digikamthumbnail.cpp
--- digikam.orig/digikam/kioslave/digikamthumbnail.cpp	2012-04-19 07:02:43.000000000 -0500
+++ digikam/digikam/kioslave/digikamthumbnail.cpp	2012-04-19 16:44:10.307517462 -0500
@@ -413,16 +413,16 @@
     if (color_type == PNG_COLOR_TYPE_PALETTE)
         png_set_expand(png_ptr);
 
-    if (info_ptr->color_type == PNG_COLOR_TYPE_RGB_ALPHA)
+    if (color_type == PNG_COLOR_TYPE_RGB_ALPHA)
         has_alpha = 1;
 
-    if (info_ptr->color_type == PNG_COLOR_TYPE_GRAY_ALPHA)
+    if (color_type == PNG_COLOR_TYPE_GRAY_ALPHA)
     {
         has_alpha = 1;
         has_grey = 1;
     }
 
-    if (info_ptr->color_type == PNG_COLOR_TYPE_GRAY)
+    if (color_type == PNG_COLOR_TYPE_GRAY)
         has_grey = 1;
 
     unsigned char **lines;
